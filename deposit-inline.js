(function () {
  if (window.depositRoute) return;

  const state = {
    container: null,
    app: null,
    styleEl: null,
    scriptLoaded: false,
    loadPromise: null,
  };

  const EDAA_BASE64 = `PCFET0NUWVBFIGh0bWw+DQo8aHRtbCBsYW5nPSJhciIgZGlyPSJydGwiPg0KPGhlYWQ+DQogIDxtZXRhIGNoYXJzZXQ9IlVURi04Ii8+DQogIDxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wIi8+DQogIDx0aXRsZT7Yp9mE2KXZitiv2KfYuTwvdGl0bGU+DQo8bGluayByZWw9Imljb24iIGhyZWY9ImVtcC5wbmciIHR5cGU9ImltYWdlL3BuZyI+DQogIDxsaW5rIHJlbD0iYXBwbGUtdG91Y2gtaWNvbiIgaHJlZj0iZW1wLnBuZyIgc2l6ZXM9IjE4MHgxODAiPg0KICA8bWV0YSBwcm9wZXJ0eT0ib2c6aW1hZ2UiIGNvbnRlbnQ9ImVtcC5wbmciPg0KICA8bWV0YSBuYW1lPSJ0d2l0dGVyOmltYWdlIiBjb250ZW50PSJlbXAucG5nIj4NCg0KICA8IS0tINiq2YfZitim2Kkg2KfZhNir2YrZhSDZhdio2YPYsdmL2KcgKNmF2YbYuSDYp9mE2YTZhdi52Kkg2LnZhtivINin2YTYqtit2YXZitmEKSAtLT4NCiAgPHNjcmlwdD4NCiAgICAoZnVuY3Rpb24oKXsNCiAgICAgIHZhciB0aGVtZSA9ICdkYXJrJzsNCiAgICAgIHRyeXsNCiAgICAgICAgdmFyIHQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGhlbWUnKTsNCiAgICAgICAgaWYoIXQpeyB0ID0gKHdpbmRvdy5tYXRjaE1lZGlhICYmIHdpbmRvdy5tYXRjaE1lZGlhKCcocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspJykubWF0Y2hlcyk/J2RhcmsnOidsaWdodCc7IH0NCiAgICAgICAgdGhlbWUgPSAodD09PSdsaWdodCcpID8gJ2xpZ2h0JyA6ICdkYXJrJzsNCiAgICAgIH1jYXRjaChlKXsgdGhlbWU9J2RhcmsnOyB9DQogICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLXRoZW1lJywgdGhlbWUpOw0KICAgICAgdHJ5ew0KICAgICAgICB2YXIgbWV0YUNTPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21ldGFbbmFtZT0iY29sb3Itc2NoZW1lIl0nKTsgaWYoIW1ldGFDUyl7IG1ldGFDUz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdtZXRhJyk7IG1ldGFDUy5uYW1lPSdjb2xvci1zY2hlbWUnOyBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKG1ldGFDUyk7fSBtZXRhQ1Muc2V0QXR0cmlidXRlKCdjb250ZW50JywgdGhlbWU9PT0nZGFyayc/J2RhcmsgbGlnaHQnOidsaWdodCBkYXJrJyk7DQogICAgICAgIHZhciBtZXRhVEM9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWV0YVtuYW1lPSJ0aGVtZS1jb2xvciJdJyk7IGlmKCFtZXRhVEMpeyBtZXRhVEM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbWV0YScpOyBtZXRhVEMubmFtZT0ndGhlbWUtY29sb3InOyBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKG1ldGFUQyk7fSBtZXRhVEMuc2V0QXR0cmlidXRlKCdjb250ZW50JywgdGhlbWU9PT0nZGFyayc/JyMwNTA1MGInOicjZjlmOWY5Jyk7DQogICAgICB9Y2F0Y2goZSl7fQ0KICAgICAgdmFyIHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTsgcy5pZD0nY3JpdGljYWwtdGhlbWUnOyBzLnRleHRDb250ZW50PSdodG1se2JhY2tncm91bmQ6JysodGhlbWU9PT0nZGFyayc/JyMwNTA1MGInOicjZjlmOWY5JykrJztjb2xvcjonKyh0aGVtZT09PSdkYXJrJz8nI2YwZjFmZic6JyMzMzMnKSsnfSBib2R5e2JhY2tncm91bmQ6aW5oZXJpdDtjb2xvcjppbmhlcml0O21hcmdpbjowfSc7IGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQocyk7DQogICAgfSkoKTsNCiAgPC9zY3JpcHQ+DQogIDxtZXRhIG5hbWU9ImNvbG9yLXNjaGVtZSIgY29udGVudD0iZGFyayBsaWdodCI+DQoNCiAgPCEtLSDYrdin2LHYsyDZhdio2YPYsTog2YXZhti5INmB2KrYrSDYp9mE2LXZgdit2Kkg2YXYqNin2LTYsdip2Ysg2KPZiCDYpdmGINmD2KfZhtiqINin2YTYqNi32KfZgtipINmF2LrZhNmC2KkgLS0+DQogIDxzY3JpcHQ+DQogICAgKGZ1bmN0aW9uKCl7DQogICAgICB0cnl7DQogICAgICAgIHZhciBiYXNlID0gKGxvY2F0aW9uLnBhdGhuYW1lLnNwbGl0KCcvJykucG9wKCkgfHwgJycpOw0KICAgICAgICB2YXIgcGFnZSA9IGJhc2UucmVwbGFjZSgvXC5odG1sJC8sJycpOw0KICAgICAgICB2YXIgcmVkaXJlY3RUbyA9ICdpbmRleC5odG1sJzsNCg0KICAgICAgICAvLyAxKSDYp9mB2K3YtSDZg9in2LQg2K3Yp9mE2KfYqiDYp9mE2KjYt9in2YLYp9iqICjZhdmF2YTZiNihINmF2YYg2KfZhNi12YHYrdipINin2YTYsdim2YrYs9mK2KkpDQogICAgICAgIHRyeXsNCiAgICAgICAgICB2YXIgcmF3ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3N0YXRlc0NhY2hlJyk7DQogICAgICAgICAgaWYgKHJhdyl7DQogICAgICAgICAgICB2YXIgb2JqID0gSlNPTi5wYXJzZShyYXcpOw0KICAgICAgICAgICAgdmFyIG1hcCA9IG9iaiAmJiBvYmoubWFwID8gb2JqLm1hcCA6IG51bGw7DQogICAgICAgICAgICBpZiAobWFwICYmIHBhZ2UgJiYgbWFwW3BhZ2VdID09PSAnb2ZmJyl7DQogICAgICAgICAgICAgIHRyeXsgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnbmF2OnJlYXNvbicsJ2Nsb3NlZDonK3BhZ2UpOyB9Y2F0Y2goXyl7IH0NCiAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKHJlZGlyZWN0VG8pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfWNhdGNoKF8pey8qIGlnbm9yZSAqL30NCg0KICAgICAgICAvLyAyKSDYp9mF2YbYuSDYp9mE2K/YrtmI2YQg2KfZhNmF2KjYp9i02LEgKNmE2YrYsyDZhdmGINiv2KfYrtmEINin2YTZhdmI2YLYuSkNCiAgICAgICAgdmFyIG5hdiA9IChwZXJmb3JtYW5jZS5nZXRFbnRyaWVzQnlUeXBlICYmIHBlcmZvcm1hbmNlLmdldEVudHJpZXNCeVR5cGUoJ25hdmlnYXRpb24nKSkgfHwgW107DQogICAgICAgIHZhciB0eXBlID0gbmF2WzBdID8gbmF2WzBdLnR5cGUgOiAocGVyZm9ybWFuY2UubmF2aWdhdGlvbiA/IChwZXJmb3JtYW5jZS5uYXZpZ2F0aW9uLnR5cGUgPT09IDEgPyAncmVsb2FkJyA6IChwZXJmb3JtYW5jZS5uYXZpZ2F0aW9uLnR5cGUgPT09IDIgPyAnYmFja19mb3J3YXJkJyA6ICcnKSkgOiAnJyk7DQogICAgICAgIHZhciBpc1JlbG9hZCA9IHR5cGUgPT09ICdyZWxvYWQnOw0KICAgICAgICB2YXIgaXNCRiA9IHR5cGUgPT09ICdiYWNrX2ZvcndhcmQnOw0KICAgICAgICB2YXIgZnJvbUhvbWUgPSBmYWxzZTsgdHJ5eyBmcm9tSG9tZSA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ25hdjpmcm9tSG9tZScpID09PSAnMSc7IH1jYXRjaChfKXsgfQ0KICAgICAgICB2YXIgcmVmT2sgPSBmYWxzZTsgdHJ5eyB2YXIgcnI9ZG9jdW1lbnQucmVmZXJyZXI7IGlmKHJyKXsgdmFyIHV1PW5ldyBVUkwocnIpOyByZWZPaz0odXUub3JpZ2luPT09bG9jYXRpb24ub3JpZ2luKTt9IH1jYXRjaChfKXsgfQ0KICAgICAgICB2YXIgcGFyYW1zQWxsb3cgPSBmYWxzZTsgdHJ5eyBwYXJhbXNBbGxvdz0obmV3IFVSTFNlYXJjaFBhcmFtcyhsb2NhdGlvbi5zZWFyY2gpKS5oYXMoJ2FsbG93Jyk7IH1jYXRjaChfKXsgfQ0KICAgICAgICB2YXIgZ3VhcmRPZmYgPSBmYWxzZTsgdHJ5eyBndWFyZE9mZj1sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbmF2Omd1YXJkT2ZmJyk9PT0nMSc7IH1jYXRjaChfKXsgfQ0KDQogICAgICAgIGlmICghZnJvbUhvbWUgJiYgIWlzUmVsb2FkICYmICFpc0JGICYmICFyZWZPayAmJiAhcGFyYW1zQWxsb3cgJiYgIWd1YXJkT2ZmKXsNCiAgICAgICAgICB0cnl7IHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ25hdjpyZWRpcmVjdGVkRnJvbScsIGJhc2UpOyB9Y2F0Y2goXyl7IH0NCiAgICAgICAgICByZXR1cm4gd2luZG93LmxvY2F0aW9uLnJlcGxhY2UocmVkaXJlY3RUbyk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKGZyb21Ib21lKXsgdHJ5eyBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCduYXY6ZnJvbUhvbWUnKTsgfWNhdGNoKF8pe30gfQ0KICAgICAgfWNhdGNoKGUpeyB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSgnaW5kZXguaHRtbCcpOyB9DQogICAgfSkoKTsNCiAgPC9zY3JpcHQ+DQoNCiAgPCEtLSDYrti32YjYtyDZiNij2YrZgtmI2YbYp9iqIC0tPg0KICA8bGluayBocmVmPSJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PUNhaXJvOndnaHRANDAwOzcwMCZkaXNwbGF5PXN3YXAiIHJlbD0ic3R5bGVzaGVldCIvPg0KICA8bGluayBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9mb250LWF3ZXNvbWUvNi41LjAvY3NzL2FsbC5taW4uY3NzIiByZWw9InN0eWxlc2hlZXQiLz4NCg0KICA8IS0tIEZpcmViYXNlIChDb21wYXQpIC0tPg0KICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly93d3cuZ3N0YXRpYy5jb20vZmlyZWJhc2Vqcy85LjIzLjAvZmlyZWJhc2UtYXBwLWNvbXBhdC5qcyI+PC9zY3JpcHQ+DQogIDxzY3JpcHQgc3JjPSJodHRwczovL3d3dy5nc3RhdGljLmNvbS9maXJlYmFzZWpzLzkuMjMuMC9maXJlYmFzZS1hdXRoLWNvbXBhdC5qcyI+PC9zY3JpcHQ+DQogIDxzY3JpcHQgc3JjPSJodHRwczovL3d3dy5nc3RhdGljLmNvbS9maXJlYmFzZWpzLzkuMjMuMC9maXJlYmFzZS1maXJlc3RvcmUtY29tcGF0LmpzIj48L3NjcmlwdD4NCiAgICANCiAgICA8c2NyaXB0Pg0KICAoZnVuY3Rpb24oKXsNCiAgICBmdW5jdGlvbiBhcHBseUNhcmRTdGF0ZShjYXJkLCBzdGF0ZSl7DQogICAgICB2YXIgZmluYWxTdGF0ZSA9IChzdGF0ZSA9PSBudWxsKSA/ICdvbicgOiBzdGF0ZTsNCiAgICAgIHZhciB0aXRsZUVsID0gY2FyZC5xdWVyeVNlbGVjdG9yID8gY2FyZC5xdWVyeVNlbGVjdG9yKCdoMicpIDogbnVsbDsNCiAgICAgIHZhciBpbWcgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IgPyBjYXJkLnF1ZXJ5U2VsZWN0b3IoJ2ltZycpIDogbnVsbDsNCiAgICAgIHRyeXsgY2FyZC5jbGFzc0xpc3QucmVtb3ZlKCdsb2FkaW5nJyk7IH1jYXRjaChfKXsgfQ0KICAgICAgaWYgKGZpbmFsU3RhdGUgPT09ICdvZmYnKXsNCiAgICAgICAgaWYgKGltZyl7IHRyeXsgaW1nLnNldEF0dHJpYnV0ZSgnbG9hZGluZycsJ2VhZ2VyJyk7IGltZy5zZXRBdHRyaWJ1dGUoJ2RlY29kaW5nJywnc3luYycpOyBpbWcuc2V0QXR0cmlidXRlKCdmZXRjaHByaW9yaXR5JywnaGlnaCcpOyB9Y2F0Y2goXyl7IH0gfQ0KICAgICAgICB0cnl7IGNhcmQuY2xhc3NMaXN0LmFkZCgnbWFpbnRlbmFuY2UnKTsgY2FyZC5jbGFzc0xpc3QucmVtb3ZlKCdwZW5kaW5nLXN0YXRlJyk7IH1jYXRjaChfKXsgfQ0KICAgICAgICB0cnl7IGNhcmQucmVtb3ZlQXR0cmlidXRlKCdocmVmJyk7IH1jYXRjaChfKXsgfQ0KICAgICAgICBpZiAodGl0bGVFbCl7IHRyeXsgdGl0bGVFbC50ZXh0Q29udGVudCA9ICfwn5qnINmF2LrZhNmCINmE2YTYtdmK2KfZhtipJzsgfWNhdGNoKF8peyB9IH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRyeXsNCiAgICAgICAgICBpZiAoY2FyZC5kYXRhc2V0ICYmIGNhcmQuZGF0YXNldC5vcmlnaW5hbEhyZWYpeyBjYXJkLnNldEF0dHJpYnV0ZSgnaHJlZicsIGNhcmQuZGF0YXNldC5vcmlnaW5hbEhyZWYpOyB9DQogICAgICAgICAgY2FyZC5jbGFzc0xpc3QucmVtb3ZlKCdtYWludGVuYW5jZScsJ3BlbmRpbmctc3RhdGUnKTsNCiAgICAgICAgICBpZiAodGl0bGVFbCAmJiBjYXJkLmRhdGFzZXQgJiYgY2FyZC5kYXRhc2V0Lm9yaWdpbmFsVGl0bGUpeyB0aXRsZUVsLnRleHRDb250ZW50ID0gY2FyZC5kYXRhc2V0Lm9yaWdpbmFsVGl0bGU7IH0NCiAgICAgICAgfWNhdGNoKF8peyB9DQogICAgICB9DQogICAgfQ0KICAgIGZ1bmN0aW9uIHByZXBDYXJkKGNhcmQpew0KICAgICAgdHJ5ew0KICAgICAgICBpZiAoIWNhcmQuZGF0YXNldC5vcmlnaW5hbEhyZWYpeyB2YXIgaHJlZiA9IGNhcmQuZ2V0QXR0cmlidXRlKCdocmVmJyk7IGlmIChocmVmKSBjYXJkLmRhdGFzZXQub3JpZ2luYWxIcmVmID0gaHJlZjsgfQ0KICAgICAgICB2YXIgdCA9IGNhcmQucXVlcnlTZWxlY3RvciAmJiBjYXJkLnF1ZXJ5U2VsZWN0b3IoJ2gyJyk7DQogICAgICAgIGlmICh0ICYmICFjYXJkLmRhdGFzZXQub3JpZ2luYWxUaXRsZSl7IGNhcmQuZGF0YXNldC5vcmlnaW5hbFRpdGxlID0gdC50ZXh0Q29udGVudCB8fCAnJzsgfQ0KICAgICAgfWNhdGNoKF8peyB9DQogICAgfQ0KICAgIGZ1bmN0aW9uIGdldFBhZ2VOYW1lRnJvbUNhcmQoY2FyZCl7DQogICAgICB0cnl7DQogICAgICAgIHZhciBocmVmID0gKGNhcmQuZGF0YXNldCAmJiBjYXJkLmRhdGFzZXQub3JpZ2luYWxIcmVmKSB8fCBjYXJkLmdldEF0dHJpYnV0ZSgnaHJlZicpIHx8ICcnOw0KICAgICAgICBocmVmID0gaHJlZi5zcGxpdCgnPycpWzBdLnNwbGl0KCcjJylbMF07DQogICAgICAgIHJldHVybiBocmVmLnJlcGxhY2UoL1wuaHRtbCQvLCcnKTsNCiAgICAgIH1jYXRjaChfKXsgcmV0dXJuICcnOyB9DQogICAgfQ0KICAgIHZhciBTVEFURVNfVFRMX01TID0gNSo2MCoxMDAwOw0KICAgIHZhciBTVEFURVNfQ0FDSEVfS0VZID0gJ3N0YXRlc0NhY2hlJzsNCiAgICBmdW5jdGlvbiBzYXZlU3RhdGVzQ2FjaGUobWFwKXsgdHJ5eyBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShTVEFURVNfQ0FDSEVfS0VZLCBKU09OLnN0cmluZ2lmeSh7IHNhdmVkQXQ6IERhdGUubm93KCksIG1hcDogbWFwfHx7fSB9KSk7IH1jYXRjaChfKXsgfSB9DQogICAgZnVuY3Rpb24gcmVhZFN0YXRlc0NhY2hlKGlnbm9yZVRUTCl7DQogICAgICB0cnl7DQogICAgICAgIHZhciByYXcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShTVEFURVNfQ0FDSEVfS0VZKTsNCiAgICAgICAgaWYoIXJhdykgcmV0dXJuIG51bGw7DQogICAgICAgIHZhciBvYmo7IHRyeXsgb2JqID0gSlNPTi5wYXJzZShyYXcpOyB9Y2F0Y2goXyl7IG9iaj1udWxsOyB9DQogICAgICAgIGlmIChvYmogJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcpew0KICAgICAgICAgIGlmKCFpZ25vcmVUVEwpeyB2YXIgbm93ID0gRGF0ZS5ub3coKTsgaWYob2JqLnNhdmVkQXQgJiYgKG5vdy1vYmouc2F2ZWRBdCk+U1RBVEVTX1RUTF9NUyl7IC8qIGV4cGlyZWQgKi8gfSB9DQogICAgICAgICAgaWYgKG9iai5tYXAgJiYgdHlwZW9mIG9iai5tYXAgPT09ICdvYmplY3QnKSByZXR1cm4gb2JqLm1hcDsNCiAgICAgICAgICBpZiAodHlwZW9mIG9iai5zdGF0ZUpzb24gPT09ICdzdHJpbmcnKXsgdHJ5eyB2YXIgbT1KU09OLnBhcnNlKG9iai5zdGF0ZUpzb24pOyBpZihtICYmIHR5cGVvZiBtPT09J29iamVjdCcpIHJldHVybiBtOyB9Y2F0Y2goXyl7IH0gfQ0KICAgICAgICAgIHZhciB2YWxzID0gT2JqZWN0LnZhbHVlcyhvYmopOyBpZiAodmFscy5sZW5ndGggJiYgdmFscy5ldmVyeShmdW5jdGlvbih2KXtyZXR1cm4gdj09PSdvbid8fHY9PT0nb2ZmJzt9KSkgcmV0dXJuIG9iajsNCiAgICAgICAgfQ0KICAgICAgICB0cnl7IHZhciBtMiA9IEpTT04ucGFyc2UocmF3KTsgaWYgKG0yICYmIHR5cGVvZiBtMj09PSdvYmplY3QnKSByZXR1cm4gbTI7IH1jYXRjaChfKXsgfQ0KICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgIH1jYXRjaChfKXsgcmV0dXJuIG51bGw7IH0NCiAgICB9DQogICAgZnVuY3Rpb24gcGFyc2VTdGF0ZXNEb2MoZGF0YSl7DQogICAgICB2YXIgbWFwID0ge307DQogICAgICB0cnl7DQogICAgICAgIGlmICh0eXBlb2YgZGF0YS5zdGF0ZUpzb24gPT09ICdzdHJpbmcnKSB7IG1hcCA9IEpTT04ucGFyc2UoZGF0YS5zdGF0ZUpzb24pfHx7fTsgfQ0KICAgICAgICBlbHNlIGlmIChkYXRhLm1hcCAmJiB0eXBlb2YgZGF0YS5tYXA9PT0nb2JqZWN0Jyl7IG1hcCA9IGRhdGEubWFwOyB9DQogICAgICAgIGVsc2UgeyBtYXAgPSBkYXRhfHx7fTsgfQ0KICAgICAgfWNhdGNoKF8peyBtYXAgPSB7fTsgfQ0KICAgICAgcmV0dXJuIG1hcDsNCiAgICB9DQogICAgYXN5bmMgZnVuY3Rpb24gbG9hZFN0YXRlc01hcCgpew0KICAgICAgdHJ5ew0KICAgICAgICBpZiAodHlwZW9mIGZpcmViYXNlPT09J3VuZGVmaW5lZCcgfHwgIWZpcmViYXNlLmZpcmVzdG9yZSkgcmV0dXJuIG51bGw7DQogICAgICAgIHZhciByZWYgPSBmaXJlYmFzZS5maXJlc3RvcmUoKS5jb2xsZWN0aW9uKCdjb25maWcnKS5kb2MoJ3N0YXRlcycpOw0KICAgICAgICB2YXIgc25hcCA9IGF3YWl0IHJlZi5nZXQoeyBzb3VyY2U6J3NlcnZlcicgfSkuY2F0Y2goZnVuY3Rpb24oKXsgcmV0dXJuIHJlZi5nZXQoKTsgfSk7DQogICAgICAgIGlmICghc25hcCB8fCAhc25hcC5leGlzdHMpIHJldHVybiBudWxsOw0KICAgICAgICB2YXIgbWFwID0gcGFyc2VTdGF0ZXNEb2Moc25hcC5kYXRhKCl8fHt9KTsNCiAgICAgICAgc2F2ZVN0YXRlc0NhY2hlKG1hcCk7DQogICAgICAgIHJldHVybiBtYXA7DQogICAgICB9Y2F0Y2goXyl7IHJldHVybiBudWxsOyB9DQogICAgfQ0KICAgIGZ1bmN0aW9uIGFwcGx5U3RhdGVzVG9QYWdlKCl7DQogICAgICB0cnl7DQogICAgICAgIHZhciBjYXJkcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2EuY2FyZCwgLmNhcmRbaHJlZl0nKSk7DQogICAgICAgIGlmICghY2FyZHMubGVuZ3RoKSByZXR1cm47DQogICAgICAgIGNhcmRzLmZvckVhY2gocHJlcENhcmQpOw0KICAgICAgICBpZiAod2luZG93Ll9fU0tJUF9GSVJFQkFTRV9fKXsgdHJ5eyBjYXJkcy5mb3JFYWNoKGZ1bmN0aW9uKGNhcmQpeyB0cnl7IGNhcmQucmVtb3ZlQXR0cmlidXRlKCdocmVmJyk7IGNhcmQuY2xhc3NMaXN0LmFkZCgncGVuZGluZy1zdGF0ZScpOyB9Y2F0Y2goXyl7IH0gfSk7IH1jYXRjaChfKXsgfSB2YXIgY2FjaGVkID0gcmVhZFN0YXRlc0NhY2hlKHRydWUpOw0KICAgICAgICAgIGlmIChjYWNoZWQpeyBjYXJkcy5mb3JFYWNoKGZ1bmN0aW9uKGNhcmQpeyB2YXIgbmFtZT1nZXRQYWdlTmFtZUZyb21DYXJkKGNhcmQpOyB2YXIgcz0obmFtZSAmJiBjYWNoZWQuaGFzT3duUHJvcGVydHkobmFtZSkpPyBjYWNoZWRbbmFtZV0gOiAnb24nOyBhcHBseUNhcmRTdGF0ZShjYXJkLHMpOyB9KTsgfQ0KICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICBsb2FkU3RhdGVzTWFwKCkudGhlbihmdW5jdGlvbihtYXApeyBpZighbWFwKXsgbWFwID0gcmVhZFN0YXRlc0NhY2hlKGZhbHNlKXx8e307IH0gY2FyZHMuZm9yRWFjaChmdW5jdGlvbihjYXJkKXsgdmFyIG5hbWU9Z2V0UGFnZU5hbWVGcm9tQ2FyZChjYXJkKTsgdmFyIHM9KG5hbWUgJiYgbWFwICYmIG1hcC5oYXNPd25Qcm9wZXJ0eShuYW1lKSk/IG1hcFtuYW1lXSA6ICdvbic7IGFwcGx5Q2FyZFN0YXRlKGNhcmQscyk7IH0pOyB9KTsNCiAgICAgIH1jYXRjaChfKXsgfQ0KICAgIH0NCiAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZT09PSdsb2FkaW5nJykgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGFwcGx5U3RhdGVzVG9QYWdlKTsgZWxzZSB0cnl7IGFwcGx5U3RhdGVzVG9QYWdlKCk7IH1jYXRjaChfKXsgfQ0KICB9KSgpOw0KICA8L3NjcmlwdD4NCg0KICA8IS0tIFR1cm5zdGlsZSAoQ2xpZW50KSAtLT4NCiAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2hhbGxlbmdlcy5jbG91ZGZsYXJlLmNvbS90dXJuc3RpbGUvdjAvYXBpLmpzIiBhc3luYyBkZWZlcj48L3NjcmlwdD4NCg0KICA8IS0tINmF2YTZgdin2Kog2KfZhNmH2YrYr9ixINmE2K/ZitmDICjYp9iu2KrZitin2LHZiikgLS0+DQogIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaGVhZGVyLmNzcyIvPg0KICA8c2NyaXB0IHNyYz0iaGVhZGVyLmpzIiBkZWZlcj48L3NjcmlwdD4NCiAgPCEtLSBMb2FkZXIgYXNzZXRzIC0tPg0KICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9ImxvYWRlci5jc3MiPg0KICA8c2NyaXB0IHNyYz0ibG9hZGVyLmpzIiBkZWZlcj48L3NjcmlwdD4NCg0KICA8IS0tIFRoZW1lIHRva2VucyArIGRhcmsgb3ZlcnJpZGVzIC0tPg0KICA8c3R5bGU+DQogICAgOnJvb3QgewogICAgICAtLWJnOiNmOGY5ZmE7IC0tdGV4dDojMTExODI3OyAtLW11dGVkOiM2ZjcyYTY7CiAgICAgIC0tY2FyZC1iZzojZjlmOWZmOyAtLWNhcmQtdGV4dDp2YXIoLS10ZXh0KTsgLS1jYXJkLWJvcmRlcjojZDlkYmZmOwogICAgICAtLWNhcmQtZ3JhZGllbnQ6bGluZWFyLWdyYWRpZW50KDE2MGRlZywgcmdiYSgxMjIsMTI0LDIwOCwuMTYpIDAlLCByZ2JhKDI0OSwyNTAsMjU1LC45NikgMTAwJSk7CiAgICAgIC0tY2FyZC1ib3JkZXItc3Ryb25nOnJnYmEoMTIyLDEyNCwyMDgsLjMyKTsKICAgICAgLS1jYXJkLWJvcmRlci1ob3ZlcjpyZ2JhKDEyMiwxMjQsMjA4LC40NSk7CiAgICAgIC0tY2FyZC1zaGFkb3c6MCAxMnB4IDI4cHggcmdiYSgzMiwzNCw3OSwuMTQpOwogICAgICAtLWNhcmQtc2hhZG93LWhvdmVyOjAgMTZweCAzNnB4IHJnYmEoMzIsMzQsNzksLjIpOwogICAgICAtLWlucHV0LWJnOiNmZmZmZmY7IC0taW5wdXQtdGV4dDp2YXIoLS10ZXh0KTsKICAgICAgLS1idG4tYmc6IzdhN2NkMDsgLS1idG4tYmctaG92ZXI6IzVjNWViZjsgLS1idG4tdGV4dDojZmZmZmZmOwogICAgICAtLWVsZXYtc2hhZG93OjAgMnB4IDhweCByZ2JhKDAsMCwwLC4wOCk7CiAgICAgIC0tc2tlbGV0b246I2VjZWVmZjsKICAgIH0KICAgIGh0bWxbZGF0YS10aGVtZT0iZGFyayJdIHsKICAgICAgLS1iZzojMDUwNTBiOyAtLXRleHQ6I2YwZjFmZjsgLS1tdXRlZDojOWVhMGQ5OwogICAgICAtLWNhcmQtYmc6IzEwMTIyMzsgLS1jYXJkLXRleHQ6dmFyKC0tdGV4dCk7IC0tY2FyZC1ib3JkZXI6IzJiMmQ1MjsKICAgICAgLS1jYXJkLWdyYWRpZW50OmxpbmVhci1ncmFkaWVudCgxNjBkZWcsIHJnYmEoMTIyLDEyNCwyMDgsLjE0KSAwJSwgcmdiYSgxNiwxOCwzNSwuOSkgMTAwJSk7CiAgICAgIC0tY2FyZC1ib3JkZXItc3Ryb25nOnJnYmEoMTU2LDE1OCwyMjIsLjMyKTsKICAgICAgLS1jYXJkLWJvcmRlci1ob3ZlcjpyZ2JhKDE1NiwxNTgsMjIyLC41KTsKICAgICAgLS1jYXJkLXNoYWRvdzowIDEwcHggMjhweCByZ2JhKDUsNiwxOCwuNik7CiAgICAgIC0tY2FyZC1zaGFkb3ctaG92ZXI6MCAxNHB4IDM2cHggcmdiYSg1LDYsMTgsLjY4KTsKICAgICAgLS1pbnB1dC1iZzojMDUwNTBiOyAtLWlucHV0LXRleHQ6dmFyKC0tdGV4dCk7CiAgICAgIC0tYnRuLWJnOiM1YzVlYmY7IC0tYnRuLWJnLWhvdmVyOiM3YTdjZDA7IC0tYnRuLXRleHQ6I2ZmZmZmZjsKICAgICAgLS1lbGV2LXNoYWRvdzowIDEycHggMzZweCByZ2JhKDAsMCwwLC40NSk7CiAgICAgIC0tc2tlbGV0b246IzBkMGUxZDsKICAgIH0KICAgIC8qIEJhc2UgKi8NCiAgICBodG1sW2RhdGEtdGhlbWU9ImRhcmsiXSBib2R5eyBiYWNrZ3JvdW5kOnZhcigtLWJnKSAhaW1wb3J0YW50OyBjb2xvcjp2YXIoLS10ZXh0KSAhaW1wb3J0YW50OyB9DQogICAgLyogU2VhcmNoICovDQogICAgaHRtbFtkYXRhLXRoZW1lPSJkYXJrIl0gLnNlYXJjaC1jb250YWluZXIgaW5wdXRbdHlwZT0idGV4dCJdeyBiYWNrZ3JvdW5kOnZhcigtLWlucHV0LWJnKSAhaW1wb3J0YW50OyBjb2xvcjp2YXIoLS1pbnB1dC10ZXh0KSAhaW1wb3J0YW50OyBib3JkZXItY29sb3I6dmFyKC0tY2FyZC1ib3JkZXIpICFpbXBvcnRhbnQ7IH0NCiAgICBodG1sW2RhdGEtdGhlbWU9ImRhcmsiXSAuc2VhcmNoLWNvbnRhaW5lciBpbnB1dFt0eXBlPSJ0ZXh0Il06Zm9jdXN7IGJveC1zaGFkb3c6MCAwIDZweCByZ2JhKDU2LDE4OSwyNDgsLjM1KSAhaW1wb3J0YW50OyBib3JkZXItY29sb3I6I2I5YmJlZiAhaW1wb3J0YW50OyB9DQogICAgaHRtbFtkYXRhLXRoZW1lPSJkYXJrIl0gLnNlYXJjaC1jb250YWluZXIgYnV0dG9ueyBiYWNrZ3JvdW5kOnZhcigtLWJ0bi1iZykgIWltcG9ydGFudDsgY29sb3I6dmFyKC0tYnRuLXRleHQpICFpbXBvcnRhbnQ7IH0NCiAgICBodG1sW2RhdGEtdGhlbWU9ImRhcmsiXSAuc2VhcmNoLWNvbnRhaW5lciBidXR0b246aG92ZXJ7IGJhY2tncm91bmQ6dmFyKC0tYnRuLWJnLWhvdmVyKSAhaW1wb3J0YW50OyB9DQogICAgLyogQ2FyZHMgKi8NCiAgICBodG1sW2RhdGEtdGhlbWU9ImRhcmsiXSAuY2FyZHsgYmFja2dyb3VuZDoNCiAgICAgIGxpbmVhci1ncmFkaWVudCh2YXIoLS1jYXJkLWJnKSx2YXIoLS1jYXJkLWJnKSkgcGFkZGluZy1ib3gsDQogICAgICBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLHJnYmEoMTU2LDE1OCwyMjIsLjI4KSxyZ2JhKDM0LDE5Nyw5NCwuMTgpKSBib3JkZXItYm94Ow0KICAgIGNvbG9yOnZhcigtLWNhcmQtdGV4dCk7DQogICAgYm9yZGVyOjFweCBzb2xpZCB0cmFuc3BhcmVudDsNCiAgICBib3gtc2hhZG93OjAgNnB4IDIycHggcmdiYSgzLDQsMTIsLjU1KTsNCiAgfQ0KICAgIGh0bWxbZGF0YS10aGVtZT0iZGFyayJdIC5jYXJkIGltZ3sgYmFja2dyb3VuZC1jb2xvcjp2YXIoLS1za2VsZXRvbik7IH0NCiAgICAvKiBNaXNjICovDQogICAgaHRtbFtkYXRhLXRoZW1lPSJkYXJrIl0gLm5vLXJlc3VsdHN7IGNvbG9yOnZhcigtLW11dGVkKSAhaW1wb3J0YW50OyB9DQogICAgaHRtbFtkYXRhLXRoZW1lPSJkYXJrIl0gLndoZXJleyBjb2xvcjojOWM5ZWRlICFpbXBvcnRhbnQ7IH0NCiAgPC9zdHlsZT4NCg0KICA8c3R5bGU+DQovKiA9PT09PT09PT09IE1vZGFsID09PT09PT09PT0gKi8NCi5tb2RhbCB7DQogIHBvc2l0aW9uOiBmaXhlZDsNCiAgdG9wOiAwOyByaWdodDogMDsgYm90dG9tOiAwOyBsZWZ0OiAwOw0KICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNSk7DQogIGRpc3BsYXk6IG5vbmU7ICAgICAgICAgICAgICAgLyog4oaQINmF2K7ZgdmK2Kkg2KfZgdiq2LHYp9i22YrZi9inICovDQogIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICB6LWluZGV4OiA5OTk5Ow0KICBwYWRkaW5nOiAxNnB4Ow0KfQ0KLm1vZGFsLm9wZW4geyAgICAgICAgICAgICAgICAgIC8qIOKGkCDYo9i22ZDZgS/Yp9it2LDZgSAub3BlbiDZhdmGIEpTICovDQogIGRpc3BsYXk6IGZsZXg7DQp9DQoNCi5tb2RhbC1jb250ZW50IHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsNCiAgcGFkZGluZzogMzBweDsNCiAgYm9yZGVyLXJhZGl1czogMTBweDsNCiAgd2lkdGg6IDEwMCU7DQogIG1heC13aWR0aDogNDAwcHg7DQogIGJveC1zaGFkb3c6IDAgNXB4IDE1cHggcmdiYSgwLDAsMCwwLjMpOw0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQp9DQoNCi8qID09PT09PT09PT0gQmFzZSA9PT09PT09PT09ICovDQpodG1sIHsgc2Nyb2xsLWJlaGF2aW9yOiBzbW9vdGg7IH0NCmJvZHkgew0KICBmb250LWZhbWlseTogJ0NhaXJvJywgc2Fucy1zZXJpZjsNCiAgbWFyZ2luOiAwOw0KICBiYWNrZ3JvdW5kOiAjZjlmOWY5Ow0KICBjb2xvcjogIzMzMzsNCiAgZGlyZWN0aW9uOiBydGw7DQp9DQptYWluIHsNCiAgbWF4LXdpZHRoOiAxMjAwcHg7DQogIG1hcmdpbjogMjBweCBhdXRvOw0KICBwYWRkaW5nOiAwIDE1cHg7DQp9DQoNCi8qINi02LHZiti3INin2YTYo9iv2YjYp9iqINij2LnZhNmJINin2YTZgtin2KbZhdipICjZhdio2LPZkdi3INmI2YXYsdmD2LLZiikgKi8NCi50b29sYmFye2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6MTBweDttYXgtd2lkdGg6MTAwMHB4O21hcmdpbjowIGF1dG8gMTJweDtwYWRkaW5nOjB9DQoudG9vbGJhcjo6YWZ0ZXJ7Y29udGVudDpub25lfQ0KLyog2KXYrtmB2KfYoSDYstixINin2YTYsdis2YjYuSDZiNin2YTZhtmI2K8g2KfZhNmB2KfYsdi62Kkg2YTZhNmF2YjYp9iy2YbYqSAqLw0KLmJhY2stYnRue2Rpc3BsYXk6bm9uZSAhaW1wb3J0YW50fQ0KLnRvb2xiYXIgPiBkaXY6bGFzdC1jaGlsZHtkaXNwbGF5Om5vbmV9DQoudG9vbGJhciA+IGRpdltzdHlsZSo9IndpZHRoOjEyMHB4Il17ZGlzcGxheTpub25lfQ0KLyog2KfZhNi52YbZiNin2YYg2KjYtNmD2YQg2KjYs9mK2Lcg2YjZhdit2KfYsNin2Kkg2YjYs9i3ICovDQoud2hlcmV7Zm9udC13ZWlnaHQ6ODAwO2NvbG9yOiM1YzVlYmY7dGV4dC1hbGlnbjpjZW50ZXJ9DQoNCi8qID09PT09PT09PT0gU2VhcmNoID09PT09PT09PT0gKi8NCi5zZWFyY2gtY29udGFpbmVyIHsNCiAgbWFyZ2luOiAyMHB4IGF1dG87DQogIG1heC13aWR0aDogMTAwMHB4Ow0KICBkaXNwbGF5OiBmbGV4Ow0KICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgZ2FwOiAxMHB4Ow0KICBwYWRkaW5nOiAwOw0KfQ0KLnNlYXJjaC1jb250YWluZXIgaW5wdXRbdHlwZT0idGV4dCJdIHsNCiAgZmxleDogMTsNCiAgcGFkZGluZzogMTJweCAxNXB4Ow0KICBib3JkZXI6IDJweCBzb2xpZCAjNWM1ZWJmOw0KICBib3JkZXItcmFkaXVzOiAyNXB4Ow0KICBmb250LXNpemU6IDFyZW07DQogIG91dGxpbmU6IG5vbmU7DQogIHRyYW5zaXRpb246IDAuM3M7DQogIGJhY2tncm91bmQ6I2ZmZjsNCn0NCi5zZWFyY2gtY29udGFpbmVyIGlucHV0W3R5cGU9InRleHQiXTpmb2N1cyB7DQogIGJveC1zaGFkb3c6IDAgMCA1cHggcmdiYSgwLCAxMTksIDIwNCwgMC41KTsNCiAgYm9yZGVyLWNvbG9yOiAjNDE0MzkxOw0KfQ0KLnNlYXJjaC1jb250YWluZXIgYnV0dG9uIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzVjNWViZjsNCiAgYm9yZGVyOiBub25lOw0KICBwYWRkaW5nOiAxMnB4IDIwcHg7DQogIGJvcmRlci1yYWRpdXM6IDI1cHg7DQogIGNvbG9yOiB3aGl0ZTsNCiAgZm9udC1zaXplOiAxcmVtOw0KICBjdXJzb3I6IHBvaW50ZXI7DQogIHRyYW5zaXRpb246IDAuM3M7DQp9DQouc2VhcmNoLWNvbnRhaW5lciBidXR0b246aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiAjNDE0MzkxOyB9DQoNCi8qID09PT09PT09PT0gR3JpZCAoUmVzcG9uc2l2ZSBDYXJkcykgPT09PT09PT09PSAqLw0KLmNhdGVnb3JpZXMgew0KICBkaXNwbGF5OiBncmlkOw0KICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpbGwsIG1pbm1heCgxNjBweCwgbWF4LWNvbnRlbnQpKTsNCiAgZ2FwOiAyMHB4Ow0KICBqdXN0aWZ5LWNvbnRlbnQ6IHN0YXJ0Ow0KICBtYXgtd2lkdGg6IDEwMDBweDsNCiAgbWFyZ2luOiBhdXRvOw0KfQ0KDQovKiA9PT09PT09PT09IENhcmQgPT09PT09PT09PSAqLwouY2FyZHsKICBwb3NpdGlvbjpyZWxhdGl2ZTsKICBiYWNrZ3JvdW5kOnZhcigtLWNhcmQtZ3JhZGllbnQpOwogIGNvbG9yOnZhcigtLWNhcmQtdGV4dCk7CiAgYm9yZGVyOjFweCBzb2xpZCB2YXIoLS1jYXJkLWJvcmRlci1zdHJvbmcpOwogIGJvcmRlci1yYWRpdXM6MTRweDsKICBib3gtc2hhZG93OnZhcigtLWNhcmQtc2hhZG93KTsKICB0ZXh0LWFsaWduOmNlbnRlcjsKICBwYWRkaW5nOjE2cHg7CiAgdGV4dC1kZWNvcmF0aW9uOm5vbmU7CiAgdHJhbnNpdGlvbjp0cmFuc2Zvcm0gLjNzIGVhc2UsIGJveC1zaGFkb3cgLjNzIGVhc2UsIGJvcmRlci1jb2xvciAuM3MgZWFzZTsKICBkaXNwbGF5OmZsZXg7CiAgZmxleC1kaXJlY3Rpb246Y29sdW1uOwogIGdhcDoxMnB4OwogIG92ZXJmbG93OmhpZGRlbjsKfQouY2FyZDo6YWZ0ZXJ7CiAgY29udGVudDoiIjsKICBwb3NpdGlvbjphYnNvbHV0ZTsKICBpbnNldDowOwogIHBvaW50ZXItZXZlbnRzOm5vbmU7CiAgYmFja2dyb3VuZDpyYWRpYWwtZ3JhZGllbnQoY2lyY2xlIGF0IHRvcCByaWdodCwgcmdiYSgyNTUsMjU1LDI1NSwuMzIpLCByZ2JhKDI1NSwyNTUsMjU1LDApIDYwJSk7CiAgb3BhY2l0eTouNjsKfQouY2FyZDpob3ZlcnsKICB0cmFuc2Zvcm06dHJhbnNsYXRlWSgtNXB4KTsKICBib3gtc2hhZG93OnZhcigtLWNhcmQtc2hhZG93LWhvdmVyKTsKICBib3JkZXItY29sb3I6dmFyKC0tY2FyZC1ib3JkZXItaG92ZXIpOwp9Cmh0bWxbZGF0YS10aGVtZT0iZGFyayJdIC5jYXJkOjphZnRlcnsKICBiYWNrZ3JvdW5kOnJhZGlhbC1ncmFkaWVudChjaXJjbGUgYXQgdG9wIHJpZ2h0LCByZ2JhKDE1NiwxNTgsMjIyLC4xOCksIHJnYmEoMCwwLDAsMCkgNjUlKTsKICBvcGFjaXR5Oi40NTsKfQoKLyog2LXZiNix2Kkg2YXYsdio2LnYqSDYr9in2KbZhdmL2KcgKi8KLmNhcmQgaW1nIHsKICB3aWR0aDogMTAwJTsKICBhc3BlY3QtcmF0aW86IDEgLyAxOwogIGhlaWdodDogYXV0bzsNCiAgb2JqZWN0LWZpdDogY292ZXI7IG9iamVjdC1wb3NpdGlvbjogY2VudGVyOw0KICBib3JkZXItcmFkaXVzOiA4cHg7DQogIHVzZXItc2VsZWN0OiBub25lOw0KICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1za2VsZXRvbik7CiAgZGlzcGxheTogYmxvY2s7DQogIG1hcmdpbjogMCBhdXRvOw0KfQ0KLmNhcmQgaDIgew0KICBmb250LXdlaWdodDogNzAwOw0KICBmb250LXNpemU6IDFyZW07DQogIG1hcmdpbjogMDsNCiAgbGluZS1oZWlnaHQ6IDEuNDsNCiAgd29yZC1icmVhazogYnJlYWstd29yZDsNCn0NCg0KLm5vLXJlc3VsdHMgew0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogIGZvbnQtc2l6ZTogMS4ycmVtOw0KICBjb2xvcjogIzg4ODsNCiAgbWFyZ2luLXRvcDogMzBweDsNCn0NCg0KLyogPT09PT09PT09PSBNYWludGVuYW5jZSAvIExvYWRpbmcgPT09PT09PT09PSAqLwouY2FyZC5tYWludGVuYW5jZXsgYmFja2dyb3VuZDp2YXIoLS1jYXJkLWJnKSFpbXBvcnRhbnQ7IGNvbG9yOnZhcigtLW11dGVkKSFpbXBvcnRhbnQ7IGJvcmRlci1jb2xvcjp2YXIoLS1jYXJkLWJvcmRlcik7IGJveC1zaGFkb3c6bm9uZTsgcG9pbnRlci1ldmVudHM6bm9uZTsgb3BhY2l0eTouNzsgfQouY2FyZC5tYWludGVuYW5jZTo6YWZ0ZXJ7IGRpc3BsYXk6bm9uZTsgfQouY2FyZC5tYWludGVuYW5jZSBoMnsgY29sb3I6I2EwMDsgfQouY2FyZC5tYWludGVuYW5jZSBpbWd7IGZpbHRlcjpncmF5c2NhbGUoMTAwJSk7IH0NCgoKLmNhcmQubG9hZGluZyB7IHBvc2l0aW9uOiByZWxhdGl2ZTsgYmFja2dyb3VuZDogdmFyKC0tc2tlbGV0b24pOyBvdmVyZmxvdzogaGlkZGVuOyBwb2ludGVyLWV2ZW50czogbm9uZTsgfQouY2FyZC5sb2FkaW5nIGltZywuY2FyZC5sb2FkaW5nIGgyIHsgdmlzaWJpbGl0eTogaGlkZGVuOyB9DQouY2FyZC5sb2FkaW5nOjphZnRlciB7DQogIGNvbnRlbnQ6ICcnOw0KICBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMDsgcmlnaHQ6IC0xNTBweDsgd2lkdGg6IDEwMHB4OyBoZWlnaHQ6IDEwMCU7DQogIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgdHJhbnNwYXJlbnQsIHJnYmEoMjU1LDI1NSwyNTUsMC40KSwgdHJhbnNwYXJlbnQpOwogIGFuaW1hdGlvbjogc2hpbW1lciAxLjJzIGluZmluaXRlOw0KfQ0KQGtleWZyYW1lcyBzaGltbWVyIHsgMCV7IHJpZ2h0Oi0xNTBweCB9IDEwMCV7IHJpZ2h0OjEwMCUgfSB9DQoNCi8qID09PT09PT09PT0gR3JpZCBvdmVycmlkZXMgKNir2KfYqNiq2KkpID09PT09PT09PT0gKi8NCi5jYXRlZ29yaWVzIHsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoNSwgbWlubWF4KDAsIDFmcikpICFpbXBvcnRhbnQ7IGdhcDogMjBweDsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IH0NCkBtZWRpYSAobWF4LXdpZHRoOiA5OTJweCkgew0KICAuY2F0ZWdvcmllcyB7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KDQsIG1pbm1heCgwLCAxZnIpKSAhaW1wb3J0YW50OyB9DQp9DQpAbWVkaWEgKG1heC13aWR0aDogNzY4cHgpIHsNCiAgLmNhdGVnb3JpZXMgeyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgzLCBtaW5tYXgoMCwgMWZyKSkgIWltcG9ydGFudDsgZ2FwOiAxMnB4OyB9DQogIC5jYXJkIHsgcGFkZGluZzogMTJweCAhaW1wb3J0YW50OyB9DQogIC5jYXJkIGgyIHsgZm9udC1zaXplOiAuOXJlbSAhaW1wb3J0YW50OyB9DQp9DQpAbWVkaWEgKG1heC13aWR0aDogNDgwcHgpIHsNCiAgLmNhdGVnb3JpZXMgeyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgyLCBtaW5tYXgoMCwgMWZyKSkgIWltcG9ydGFudDsgZ2FwOiAxMnB4OyB9DQogIC5jYXJkIHsgcGFkZGluZzogMTBweCAhaW1wb3J0YW50OyB9DQogIC5jYXJkIGgyIHsgZm9udC1zaXplOiAuOXJlbSAhaW1wb3J0YW50OyB9DQogIC5zZWFyY2gtY29udGFpbmVyIHsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgfQ0KICAuc2VhcmNoLWNvbnRhaW5lciBpbnB1dCwgLnNlYXJjaC1jb250YWluZXIgYnV0dG9uIHsgd2lkdGg6IDEwMCU7IH0NCiAgLm1vZGFsLWNvbnRlbnQgeyBwYWRkaW5nOiAyMHB4OyBtYXgtd2lkdGg6IDM0MHB4OyB9DQp9DQoNCi8qID09PT09IERhcmsgTW9kZSA9PT09PSAqLw0KYm9keS5kYXJrLW1vZGUgeyBiYWNrZ3JvdW5kOiMwNTA1MGI7IGNvbG9yOiNmMGYxZmY7IH0NCmJvZHkuZGFyay1tb2RlIC5zZWFyY2gtY29udGFpbmVyIGlucHV0W3R5cGU9InRleHQiXXsgYmFja2dyb3VuZDojMDUwNTBiOyBjb2xvcjojZjBmMWZmOyBib3JkZXItY29sb3I6IzJiMmQ1MjsgfQ0KYm9keS5kYXJrLW1vZGUgLnNlYXJjaC1jb250YWluZXIgaW5wdXRbdHlwZT0idGV4dCJdOmZvY3VzeyBib3JkZXItY29sb3I6I2I5YmJlZjsgYm94LXNoYWRvdzowIDAgNnB4IHJnYmEoNTYsMTg5LDI0OCwuMzUpOyB9DQpib2R5LmRhcmstbW9kZSAuc2VhcmNoLWNvbnRhaW5lciBidXR0b257IGJhY2tncm91bmQ6IzNiM2U4YzsgfQ0KYm9keS5kYXJrLW1vZGUgLnNlYXJjaC1jb250YWluZXIgYnV0dG9uOmhvdmVyeyBiYWNrZ3JvdW5kOiM3YTdjZDA7IH0NCmJvZHkuZGFyay1tb2RlIC5jYXJkewogIGJhY2tncm91bmQ6CiAgICBsaW5lYXItZ3JhZGllbnQodmFyKC0tY2FyZC1iZyksdmFyKC0tY2FyZC1iZykpIHBhZGRpbmctYm94LAogICAgbGluZWFyLWdyYWRpZW50KDEzNWRlZyxyZ2JhKDE1NiwxNTgsMjIyLC4yOCkscmdiYSgzNCwxOTcsOTQsLjE4KSkgYm9yZGVyLWJveDsKICBjb2xvcjojZjBmMWZmOwogIGJvcmRlcjoxcHggc29saWQgdHJhbnNwYXJlbnQ7CiAgYm94LXNoYWRvdzowIDZweCAyMnB4IHJnYmEoMyw0LDEyLC41NSk7Cn0KYm9keS5kYXJrLW1vZGUgLmNhcmQgaDJ7IGNvbG9yOiNmMGYxZmY7IH0KYm9keS5kYXJrLW1vZGUgLmNhcmQubG9hZGluZ3sgYmFja2dyb3VuZDp2YXIoLS1za2VsZXRvbik7IH0KYm9keS5kYXJrLW1vZGUgLmNhcmQubG9hZGluZzo6YWZ0ZXJ7IGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCg5MGRlZyx0cmFuc3BhcmVudCxyZ2JhKDI1NSwyNTUsMjU1LC4xNSksdHJhbnNwYXJlbnQpOyB9CmJvZHkuZGFyay1tb2RlIC5uby1yZXN1bHRzeyBjb2xvcjojOWVhMGQ5OyB9DQpib2R5LmRhcmstbW9kZSAubW9kYWwtY29udGVudHsgYmFja2dyb3VuZDojMTExODI3OyBjb2xvcjojZjBmMWZmOyBib3gtc2hhZG93OjAgMTBweCAzMHB4IHJnYmEoMCwwLDAsLjUpOyB9DQoNCi8qID09PT0gTW9kYWwgKNmG2KfZgdiw2Kkg2KfZhNiq2YLYr9mK2YUpINmF2K3Ys9mR2YYgPT09PSAqLw0KLm1vZGFsIHsNCiAgcG9zaXRpb246IGZpeGVkOw0KICBpbnNldDogMDsNCiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLDAsMCwwLjUpOw0KICBkaXNwbGF5OiBub25lOw0KICBhbGlnbi1pdGVtczogY2VudGVyOw0KICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgei1pbmRleDogOTk5OTsNCiAgcGFkZGluZzogMTZweDsNCn0NCi5tb2RhbC5vcGVuIHsgZGlzcGxheTogZmxleDsgfQ0KDQoubW9kYWwtY29udGVudCB7DQogIGJhY2tncm91bmQ6ICNmZmY7DQogIHBhZGRpbmc6IDI0cHg7DQogIGJvcmRlci1yYWRpdXM6IDE0cHg7DQogIG1heC13aWR0aDogNTAwcHg7DQogIHdpZHRoOiAxMDAlOw0KICBib3gtc2hhZG93OiAwIDhweCAzMHB4IHJnYmEoMCwwLDAsMC4yNSk7DQogIGRpc3BsYXk6IGZsZXg7DQogIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQogIGdhcDogMTZweDsNCiAgcG9zaXRpb246IHJlbGF0aXZlOw0KfQ0KDQovKiDYp9mE2YfZitiv2LEgKi8NCi5tb2RhbC1oZWFkZXIgeyBkaXNwbGF5OmZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjsganVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47IH0NCi5tb2RhbC10aXRsZSB7IGZvbnQtc2l6ZToxLjJyZW07IGZvbnQtd2VpZ2h0OjgwMDsgY29sb3I6IzVjNWViZjsgfQ0KLm1vZGFsIC5jbG9zZSB7IGJhY2tncm91bmQ6dHJhbnNwYXJlbnQ7IGJvcmRlcjpub25lOyBmb250LXNpemU6MS41cmVtOyBjdXJzb3I6cG9pbnRlcjsgY29sb3I6IzQ0NDsgfQ0KLm1vZGFsIC5jbG9zZTpob3ZlciB7IGNvbG9yOiNjYzAwMDA7IH0NCg0KLyog2KfZhNio2KfYr9is2KfYqiAqLw0KLmJhZGdlIHsNCiAgZGlzcGxheTppbmxpbmUtZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6NnB4Ow0KICBiYWNrZ3JvdW5kOiNlZWYwZmY7IGNvbG9yOiM0MTQzOTE7IGJvcmRlcjoxcHggc29saWQgI2VjZWVmZjsNCiAgcGFkZGluZzo2cHggMTBweDsgYm9yZGVyLXJhZGl1czo5OTk5cHg7IGZvbnQtc2l6ZTouODVyZW07DQp9DQoNCi8qINin2YTYrdmC2YjZhCDZiNin2YTZhdi52YTZiNmF2KfYqiAqLw0KLmluZm8tbGlzdCB7IGRpc3BsYXk6Z3JpZDsgZ2FwOjEwcHg7IH0NCi5pbmZvLWl0ZW0geyBiYWNrZ3JvdW5kOiNmOGZhZmM7IGJvcmRlcjoxcHggc29saWQgI2U2ZWVmNzsgYm9yZGVyLXJhZGl1czoxMHB4OyBwYWRkaW5nOjEwcHg7IGZvbnQtc2l6ZTouOTVyZW07IH0NCi5oaW50IHsgY29sb3I6IzY2NzA4NTsgZm9udC1zaXplOi45cmVtOyB9DQoNCiAgICAgIC8qINin2YTYrdin2LPYqNipICovDQogICAgICAuY2FsYyB7IGRpc3BsYXk6Z3JpZDsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOjFmciAxZnI7IGdhcDoxMnB4OyB9DQouY2FsYyAuZmllbGQgeyBiYWNrZ3JvdW5kOiNmOWZhZmI7IGJvcmRlcjoxcHggc29saWQgI2U1ZTdlYjsgYm9yZGVyLXJhZGl1czoxMnB4OyBwYWRkaW5nOjEwcHg7IH0NCi5jYWxjIGxhYmVsIHsgZGlzcGxheTpibG9jazsgZm9udC1zaXplOi44NXJlbTsgZm9udC13ZWlnaHQ6NjAwOyBjb2xvcjojNDc1NDY3OyBtYXJnaW4tYm90dG9tOjRweDsgfQ0KLmNhbGMgaW5wdXQgeyB3aWR0aDoxMDAlOyBwYWRkaW5nOjEwcHg7IGJvcmRlcjoxcHggc29saWQgI2NiZDVlMTsgYm9yZGVyLXJhZGl1czo4cHg7IGZvbnQtc2l6ZToxcmVtOyBvdXRsaW5lOm5vbmU7IH0NCi5jYWxjIGlucHV0OmZvY3VzIHsgYm9yZGVyLWNvbG9yOiM1YzVlYmY7IGJveC1zaGFkb3c6MCAwIDAgNHB4IHJnYmEoNjUsNjcsMTQ1LC4yNSk7IH0NCg0KLyog2LPYudixINin2YTYtdix2YEgKi8NCi5yYXRlLWxpbmUgeyBkaXNwbGF5OmZsZXg7IGZsZXgtd3JhcDp3cmFwOyBhbGlnbi1pdGVtczpjZW50ZXI7IGdhcDoxMHB4OyBmb250LXNpemU6Ljk1cmVtOyB9DQoucmF0ZS1saW5lIC5jaGlwIHsgYmFja2dyb3VuZDojZWNlZWZmOyBib3JkZXI6MXB4IHNvbGlkICNlMmU4ZjA7IGJvcmRlci1yYWRpdXM6OTk5OXB4OyBwYWRkaW5nOjZweCAxMHB4OyB9DQoNCiAgICAgIC8qINij2LLYsdin2LEg2KfZhNil2KzYsdin2KEgKi8NCiAgICAgIC5hY3Rpb25zIHsgZGlzcGxheTpmbGV4OyBmbGV4LXdyYXA6d3JhcDsgZ2FwOjEwcHg7IG1hcmdpbi10b3A6OHB4OyB9DQogICAgICAuYnRuIHsgYm9yZGVyOm5vbmU7IGJvcmRlci1yYWRpdXM6MTBweDsgcGFkZGluZzoxMHB4IDE0cHg7IGN1cnNvcjpwb2ludGVyOyBmb250LXdlaWdodDo3MDA7IGZvbnQtc2l6ZTouOTVyZW07IH0NCiAgICAgIC5idG4tcHJpbWFyeSB7IGJhY2tncm91bmQ6IzVjNWViZjsgY29sb3I6I2ZmZjsgfQ0KICAgICAgLmJ0bi1wcmltYXJ5OmhvdmVyIHsgYmFja2dyb3VuZDojNDE0MzkxOyB9DQogICAgICAuYnRuLW91dGxpbmUgeyBiYWNrZ3JvdW5kOiNmZmY7IGJvcmRlcjoxcHggc29saWQgI2NiZDVlMTsgfQ0KICAgICAgLmJ0bi1vdXRsaW5lOmhvdmVyIHsgYmFja2dyb3VuZDojZjlmYWZiOyB9DQogICAgICAuYnRuW2Rpc2FibGVkXSB7IG9wYWNpdHk6LjY7IGN1cnNvcjpub3QtYWxsb3dlZDsgfQ0KDQogICAgICAvKiDYrdin2YTYqSDZhtis2KfYrSDZhNiy2LEg2KXYq9io2KfYqiDYp9mE2K/Zgdi5ICovDQogICAgICAjcHJvb2ZUcmlnZ2VyLnN1Y2Nlc3MgeyBiYWNrZ3JvdW5kOiMxNmEzNGE7IGNvbG9yOiNmZmY7IGJvcmRlci1jb2xvcjojMTU4MDNkOyB9DQogICAgICBib2R5LmRhcmstbW9kZSAjcHJvb2ZUcmlnZ2VyLnN1Y2Nlc3MgeyBiYWNrZ3JvdW5kOiMxNmEzNGE7IGNvbG9yOiNmZmY7IGJvcmRlci1jb2xvcjojMTY2NTM0OyB9DQoNCiAgICAgIC8qINin2YTYs9mF2KfYrSDYqNin2YTZhtiz2K4g2K/Yp9iu2YQg2YbYp9mB2LDYqSDYp9mE2KXZitiv2KfYuSDZhNmE2KzZiNin2YQg2LnZhtivINiq2K3Yr9mK2K8g2KfZhNmG2LUgKi8NCiAgICAgIC5tb2RhbCwgLm1vZGFsICogeyAtd2Via2l0LXVzZXItc2VsZWN0OiB0ZXh0OyB1c2VyLXNlbGVjdDogdGV4dDsgLXdlYmtpdC10b3VjaC1jYWxsb3V0OiBkZWZhdWx0OyB9DQoNCi8qINin2YTZhdi52KfZitmG2KkgKi8NCi5wcmV2aWV3IHsgZm9udC1zaXplOi45cmVtOyBjb2xvcjojNWM1ZWJmOyB3b3JkLWJyZWFrOmJyZWFrLWFsbDsgfQ0KDQovKiBSZXNwb25zaXZlICovDQpAbWVkaWEgKG1heC13aWR0aDogNDgwcHgpIHsNCiAgLm1vZGFsLWNvbnRlbnQgeyBwYWRkaW5nOjE4cHg7IG1heC13aWR0aDozNDBweDsgfQ0KICAuY2FsYyB7IGdyaWQtdGVtcGxhdGUtY29sdW1uczoxZnI7IH0NCiAgLmFjdGlvbnMgeyBmbGV4LWRpcmVjdGlvbjpjb2x1bW47IH0NCiAgLmJ0biwgLmJ0bi1wcmltYXJ5LCAuYnRuLW91dGxpbmUgeyB3aWR0aDoxMDAlOyB9DQp9DQoNCi8qIERhcmsgTW9kZSAqLw0KYm9keS5kYXJrLW1vZGUgLm1vZGFsLWNvbnRlbnQgeyBiYWNrZ3JvdW5kOiMxMTE4Mjc7IGNvbG9yOiNmMGYxZmY7IH0NCmJvZHkuZGFyay1tb2RlIC5tb2RhbC10aXRsZSB7IGNvbG9yOiM5YzllZGU7IH0NCmJvZHkuZGFyay1tb2RlIC5pbmZvLWl0ZW0geyBiYWNrZ3JvdW5kOiMwZjEwMjQ7IGJvcmRlci1jb2xvcjojMmIyZDUyOyB9DQpib2R5LmRhcmstbW9kZSAuY2FsYyAuZmllbGQgeyBiYWNrZ3JvdW5kOiMwZjEwMjQ7IGJvcmRlci1jb2xvcjojMmIyZDUyOyB9DQpib2R5LmRhcmstbW9kZSAuY2FsYyBsYWJlbCB7IGNvbG9yOiNjYmQ1ZTE7IH0NCmJvZHkuZGFyay1tb2RlIC5jYWxjIGlucHV0IHsgYmFja2dyb3VuZDojMDUwNTBiOyBjb2xvcjojZjBmMWZmOyBib3JkZXItY29sb3I6IzJiMmQ1MjsgfQ0KYm9keS5kYXJrLW1vZGUgLmNhbGMgaW5wdXQ6Zm9jdXMgeyBib3JkZXItY29sb3I6I2I5YmJlZjsgYm94LXNoYWRvdzowIDAgMCA0cHggcmdiYSg1NiwxODksMjQ4LC4zNSk7IH0NCmJvZHkuZGFyay1tb2RlIC5yYXRlLWxpbmUgLmNoaXAgeyBiYWNrZ3JvdW5kOiMwZjEwMjQ7IGJvcmRlci1jb2xvcjojMmIyZDUyOyBjb2xvcjojZjBmMWZmOyB9DQpib2R5LmRhcmstbW9kZSAuYnRuLW91dGxpbmUgeyBiYWNrZ3JvdW5kOiMwNTA1MGI7IGNvbG9yOiNmMGYxZmY7IGJvcmRlci1jb2xvcjojMmIyZDUyOyB9DQpib2R5LmRhcmstbW9kZSAuYnRuLXByaW1hcnkgeyBiYWNrZ3JvdW5kOmxpbmVhci1ncmFkaWVudCgxMzVkZWcsIzdhN2NkMCwjM2IzZThjKTsgfQ0KDQoNCi8qID09PT09INiq2LXYutmK2LEg2YbYp9mB2LDYqSDYp9mE2KrZgtiv2YrZhSDYudmE2Ykg2KfZhNmH2YjYp9iq2YEgPT09PT0gKi8NCkBtZWRpYSAobWF4LXdpZHRoOiA0ODBweCkgew0KICAubW9kYWwgeyANCiAgICBwYWRkaW5nOiA4cHg7DQogICAgLyog2K/YudmFINmG2YjYqti0IGlPUyAqLw0KICAgIHBhZGRpbmctdG9wOiBtYXgoOHB4LCBlbnYoc2FmZS1hcmVhLWluc2V0LXRvcCkpOw0KICAgIHBhZGRpbmctYm90dG9tOiBtYXgoOHB4LCBlbnYoc2FmZS1hcmVhLWluc2V0LWJvdHRvbSkpOw0KICB9DQoNCiAgLm1vZGFsLWNvbnRlbnQgew0KICAgIHdpZHRoOiAxMDAlOw0KICAgIG1heC13aWR0aDogOTJ2dzsgICAgICAgICAgIC8qINij2LXYutixINmF2YYg2LnYsdi2INin2YTYtNin2LTYqSDZgtmE2YrZhNin2YsgKi8NCiAgICBwYWRkaW5nOiAxMnB4IDE0cHg7ICAgICAgICAvKiDYqtmC2YTZitmEINin2YTYrdi02YggKi8NCiAgICBib3JkZXItcmFkaXVzOiAxMHB4Ow0KICAgIGJveC1zaGFkb3c6IDAgNnB4IDIwcHggcmdiYSgwLDAsMCwuMjUpOw0KDQogICAgbWF4LWhlaWdodDogY2FsYygxMDB2aCAtIDI0cHgpOyAvKiDZhNinINiq2KrYrNin2YjYsiDYp9ix2KrZgdin2Lkg2KfZhNi02KfYtNipICovDQogICAgb3ZlcmZsb3cteTogYXV0bzsgICAgICAgICAgICAgICAvKiDYqtmF2LHZitixINiv2KfYrtmE2Yog2LnZhtivINin2YTYt9mI2YQg2KfZhNmD2KjZitixICovDQogICAgLXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6IHRvdWNoOw0KICAgIGdhcDogMTBweDsgICAgICAgICAgICAgICAgICAgICAgLyog2YHYrNmI2KfYqiDYo9i12LrYsSDYqNmK2YYg2KfZhNi52YbYp9i12LEgKi8NCiAgfQ0KDQogIC8qINmH2YrYr9ixINin2YTZhdmI2K/Yp9mEINij2YPYq9ixINil2K3Zg9in2YXZi9inICovDQogIC5tb2RhbC1oZWFkZXIgew0KICAgIHBvc2l0aW9uOiBzdGlja3k7IHRvcDogMDsgei1pbmRleDogMTsNCiAgICBiYWNrZ3JvdW5kOiBpbmhlcml0OyAgICAgICAgICAgIC8qINmK2LfYp9io2YIg2K7ZhNmB2YrYqSDYp9mE2YXZiNiv2KfZhCAqLw0KICAgIG1hcmdpbjogLTEycHggLTE0cHggOHB4OyAgICAgICAgLyog2KrZhdiv2YrYryDYp9mE2K7ZhNmB2YrYqSDZhNmE2K3ZiNin2YEgKi8NCiAgICBwYWRkaW5nOiAxMHB4IDE0cHggOHB4Ow0KICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKDAsMCwwLC4wNik7DQogIH0NCiAgLm1vZGFsLXRpdGxlIHsgZm9udC1zaXplOiAxcmVtOyB9DQogIC5iYWRnZSB7IHBhZGRpbmc6IDRweCA4cHg7IGZvbnQtc2l6ZTogLjhyZW07IH0NCg0KICAvKiDYp9mE2K3Yp9iz2KjYqSDYudmF2YjYryDZiNin2K3YryDZiNij2K3YrNin2YUg2KPYtdi62LEgKi8NCiAgLmNhbGMgeyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmcjsgZ2FwOiA4cHg7IH0NCiAgLmNhbGMgLmZpZWxkIHsgcGFkZGluZzogOHB4OyBib3JkZXItcmFkaXVzOiAxMHB4OyB9DQogIC5jYWxjIGxhYmVsIHsgZm9udC1zaXplOiAuOHJlbTsgbWFyZ2luLWJvdHRvbTogM3B4OyB9DQogIC5jYWxjIGlucHV0IHsNCiAgICBwYWRkaW5nOiA4cHggMTBweDsNCiAgICBmb250LXNpemU6IDE2cHg7ICAgLyog2YrZhdmG2Lkg2KrZg9io2YrYsSBpT1Mg2KfZhNiq2YTZgtin2KbZiiAqLw0KICB9DQoNCiAgLyog2LPYt9ixINin2YTYs9i52LEgKi8NCiAgLnJhdGUtbGluZSB7IGdhcDogNnB4OyBmb250LXNpemU6IC44NXJlbTsgfQ0KICAucmF0ZS1saW5lIC5jaGlwIHsgcGFkZGluZzogNHB4IDhweDsgfQ0KDQogIC8qINi12YbYp9iv2YrZgiDYp9mE2YXYudmE2YjZhdin2KogKi8NCiAgLmluZm8taXRlbSB7IHBhZGRpbmc6IDhweDsgZm9udC1zaXplOiAuOXJlbTsgfQ0KDQogIC8qINin2YTYo9iy2LHYp9ixINio2LnYsdi2INmD2KfZhdmEICovDQogIC5hY3Rpb25zIHsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgZ2FwOiA4cHg7IG1hcmdpbi10b3A6IDZweDsgfQ0KICAuYnRuLCAuYnRuLXByaW1hcnksIC5idG4tb3V0bGluZSB7IHdpZHRoOiAxMDAlOyBwYWRkaW5nOiAxMHB4IDEycHg7IGZvbnQtc2l6ZTogLjk1cmVtOyB9DQoNCiAgLyog2LnYsdi2INin2LPZhSDYp9mE2YXZhNmBINin2YTYt9mI2YrZhCDYqNiv2YjZhiDZg9iz2LEg2KfZhNiq2LXZhdmK2YUgKi8NCiAgLnByZXZpZXcgeyBmb250LXNpemU6IC44NXJlbTsgb3ZlcmZsb3ctd3JhcDogYW55d2hlcmU7IH0NCn0NCg0KLyog2KrYqNin2YrZhiDZhdmG2KfYs9ioINmE2YTZiNi22Lkg2KfZhNiv2KfZg9mGINi52YbYryDYp9mE2KrYq9io2YrYqiAqLw0KQG1lZGlhIChtYXgtd2lkdGg6IDQ4MHB4KSB7DQogIGJvZHkuZGFyay1tb2RlIC5tb2RhbC1oZWFkZXIgew0KICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LC4wOCk7DQogIH0NCn0NCi8qID09PT09INiq2K3Ys9mK2YbYp9iqINmG2KfZgdiw2Kkg2KfZhNiq2YLYr9mK2YUg2LnZhNmJINin2YTZg9mF2KjZitmI2KrYsSA9PT09PSAqLw0KQG1lZGlhIChtaW4td2lkdGg6IDEwMjRweCkgew0KICAubW9kYWwgeyANCiAgICBwYWRkaW5nOiAyNHB4OyANCiAgfQ0KDQogIC5tb2RhbC1jb250ZW50IHsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBtYXgtd2lkdGg6IDYyMHB4OyAgICAgICAgICAgIC8qINi52LHYtiDZhdix2YrYrSDYudmE2Ykg2KfZhNiv2YrYs9mD2KrZiNioICovDQogICAgcGFkZGluZzogMjBweCAyMnB4Ow0KICAgIGJvcmRlci1yYWRpdXM6IDEycHg7DQogICAgYm94LXNoYWRvdzogMCAxMHB4IDM2cHggcmdiYSgwLDAsMCwuMjUpOw0KDQogICAgLyog2YTYpyDYqtiq2KzYp9mI2LIgODglINmF2YYg2KfYsdiq2YHYp9i5INin2YTYtNin2LTYqSDZhdi5INiq2YXYsdmK2LEg2K/Yp9iu2YTZiiAqLw0KICAgIG1heC1oZWlnaHQ6IG1pbig4OHZoLCA4NjBweCk7DQogICAgb3ZlcmZsb3cteTogYXV0bzsNCiAgICAtd2Via2l0LW92ZXJmbG93LXNjcm9sbGluZzogdG91Y2g7DQogICAgZ2FwOiAxMnB4Ow0KICB9DQoNCiAgLyog2YfZitiv2LEg2YXYq9io2Kog2K/Yp9iu2YQg2KfZhNmF2YjYr9in2YQgKi8NCiAgLm1vZGFsLWhlYWRlciB7DQogICAgcG9zaXRpb246IHN0aWNreTsgdG9wOiAwOyB6LWluZGV4OiAxOw0KICAgIGJhY2tncm91bmQ6IGluaGVyaXQ7DQogICAgbWFyZ2luOiAtMjBweCAtMjJweCAxMnB4OyAgIC8qINiq2YXYr9mK2K8g2KfZhNmH2YrYr9ixINmE2YTYrdmI2KfZgSAqLw0KICAgIHBhZGRpbmc6IDE0cHggMjJweCAxMnB4Ow0KICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKDAsMCwwLC4wNik7DQogIH0NCg0KICAubW9kYWwtdGl0bGUgeyBmb250LXNpemU6IDEuMjVyZW07IH0NCiAgLmJhZGdlIHsgcGFkZGluZzogNnB4IDEwcHg7IGZvbnQtc2l6ZTogLjg1cmVtOyB9DQoNCiAgLyog2KfZhNit2KfYs9io2Kkg2LXZgdmR2KfZhiDYudmE2Ykg2KfZhNiv2YrYs9mD2KrZiNioICovDQogIC5jYWxjIHsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyOyBnYXA6IDEycHg7IH0NCiAgLmNhbGMgLmZpZWxkIHsgcGFkZGluZzogMTBweDsgfQ0KICAuY2FsYyBsYWJlbCB7IGZvbnQtc2l6ZTogLjlyZW07IH0NCiAgLmNhbGMgaW5wdXQgeyBmb250LXNpemU6IDFyZW07IHBhZGRpbmc6IDEwcHggMTJweDsgfQ0KDQogIC8qINmF2LnZhNmI2YXYp9iqINij2YjYttitINmC2YTZitmE2KfZiyAqLw0KICAuaW5mby1pdGVtIHsgcGFkZGluZzogMTJweDsgZm9udC1zaXplOiAxcmVtOyB9DQogIC5yYXRlLWxpbmUgeyBmb250LXNpemU6IC45NXJlbTsgZ2FwOiAxMHB4OyB9DQogIC5yYXRlLWxpbmUgLmNoaXAgeyBwYWRkaW5nOiA2cHggMTBweDsgfQ0KDQogIC8qINij2LLYsdin2LEg2KPZgdmC2YrYqSAqLw0KICAuYWN0aW9ucyB7DQogICAgZmxleC1kaXJlY3Rpb246IHJvdzsNCiAgICBmbGV4LXdyYXA6IG5vd3JhcDsNCiAgICBnYXA6IDEwcHg7DQogICAgbWFyZ2luLXRvcDogMTBweDsNCiAgfQ0KICAuYnRuIHsgbWluLXdpZHRoOiAxODBweDsgfQ0KICAucHJldmlldyB7IGZvbnQtc2l6ZTogLjlyZW07IH0NCn0NCg0KLyog2LTYp9i02KfYqiDZg9io2YrYsdipINis2K/Yp9mLICovDQpAbWVkaWEgKG1pbi13aWR0aDogMTQ0MHB4KSB7DQogIC5tb2RhbC1jb250ZW50IHsgbWF4LXdpZHRoOiA3MDBweDsgfQ0KfQ0KDQovKiDYqtio2KfZitmGINmF2YbYp9iz2Kgg2YTZhNmI2LbYuSDYp9mE2K/Yp9mD2YYg2LnZhNmJINin2YTYr9mK2LPZg9iq2YjYqCAqLw0KQG1lZGlhIChtaW4td2lkdGg6IDEwMjRweCkgew0KICBib2R5LmRhcmstbW9kZSAubW9kYWwtaGVhZGVyIHsNCiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwuMDgpOw0KICB9DQp9DQoNCiAgLyogPT09IE9NLXN0eWxlIG1vZGFsIHR3ZWFrcyA9PT0gKi8NCi5tb2RhbC1jb250ZW50IHsgDQogIGJvcmRlci1yYWRpdXM6IDE4cHg7IA0KICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTgwZGVnLCByZ2JhKDIsNiwyMywuOTIpLCByZ2JhKDIsNiwyMywuODYpKTsNCiAgYm9yZGVyOiAxcHggc29saWQgIzJiMmQ1MjsNCiAgY29sb3I6ICNmMGYxZmY7DQogIGJhY2tkcm9wLWZpbHRlcjogYmx1cig2cHgpOw0KfQ0KLm1vZGFsLWhlYWRlciB7IGRpc3BsYXk6ZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjsgfQ0KLm1vZGFsLXRpdGxlIHsgZm9udC13ZWlnaHQ6ODAwOyBmb250LXNpemU6MS4zNXJlbTsgbGV0dGVyLXNwYWNpbmc6LjNweDsgdGV4dC1hbGlnbjpjZW50ZXI7IHdpZHRoOjEwMCU7IH0NCi5jYWxjIHsgZGlzcGxheTpmbGV4OyBmbGV4LWRpcmVjdGlvbjpjb2x1bW47IGdhcDoxMnB4OyBtYXJnaW4tdG9wOjEwcHg7IH0NCi5jYWxjIC5maWVsZCB7IGRpc3BsYXk6ZmxleDsgZmxleC1kaXJlY3Rpb246Y29sdW1uOyBnYXA6NnB4OyB9DQouY2FsYyAuZmllbGQgaW5wdXQgeyBib3JkZXI6MXB4IHNvbGlkICMyYjJkNTI7IGJhY2tncm91bmQ6IzA1MDUwYjsgY29sb3I6I2YwZjFmZjsgYm9yZGVyLXJhZGl1czoxNnB4OyBwYWRkaW5nOjE0cHggNTZweDsgZGlyZWN0aW9uOmx0cjsgdGV4dC1hbGlnbjplbmQ7IGZvbnQtdmFyaWFudC1udW1lcmljOnRhYnVsYXItbnVtczsgYm94LXNoYWRvdzowIDFweCAwIHJnYmEoMjU1LDI1NSwyNTUsLjAzKSBpbnNldDsgfQ0KLnJhdGUtbGluZSB7IG1hcmdpbi10b3A6NnB4OyBjb2xvcjojOWVhMGQ5OyBkaXNwbGF5OmZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjsgZ2FwOjhweDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgfQ0KLnJhdGUtbGluZSAubWluaXtvcGFjaXR5Oi45fQ0KLnJhdGUtbGluZSAuY2hpcHsgYmFja2dyb3VuZDpyZ2JhKDE0OCwxNjMsMTg0LC4xMik7IGNvbG9yOiNjYmQ1ZTE7IGJvcmRlcjoxcHggc29saWQgIzJiMmQ1MjsgYm9yZGVyLXJhZGl1czo5OTlweDsgcGFkZGluZzo2cHggMTBweDsgZm9udC13ZWlnaHQ6NzAwIH0NCiNtZXRob2RJbmZvIHsgbWFyZ2luOjE4cHggMDsgY29sb3I6aW5oZXJpdDsgYm9yZGVyOm5vbmU7IGJhY2tncm91bmQ6dHJhbnNwYXJlbnQ7IHBhZGRpbmc6MDsgdGV4dC1hbGlnbjpyaWdodCB9CiNtZXRob2RJbmZvIC5pbmZvLWl0ZW17IGJhY2tncm91bmQ6dHJhbnNwYXJlbnQ7IGJvcmRlcjpub25lOyBwYWRkaW5nOjA7IH0KLmFjdGlvbnMgeyBkaXNwbGF5OmZsZXg7IGZsZXgtZGlyZWN0aW9uOmNvbHVtbjsgZ2FwOjEwcHg7IG1hcmdpbi10b3A6OHB4OyB9DQouYnRuIHsgYm9yZGVyLXJhZGl1czoxNHB4OyBwYWRkaW5nOjEycHggMTZweDsgZm9udC13ZWlnaHQ6ODAwOyBjdXJzb3I6cG9pbnRlcjsgYm9yZGVyOjFweCBzb2xpZCB0cmFuc3BhcmVudCB9DQouYnRuLW91dGxpbmUgeyBiYWNrZ3JvdW5kOiMwNTA1MGI7IGNvbG9yOiNmMGYxZmY7IGJvcmRlci1jb2xvcjojMmIyZDUyOyBkaXNwbGF5OmlubGluZS1mbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7IGdhcDo4cHg7IGp1c3RpZnktY29udGVudDpjZW50ZXIgfQ0KLmJ0bi1vdXRsaW5lOmhvdmVyeyBib3JkZXItY29sb3I6IzQ3NTU2OSB9DQouYnRuLXByaW1hcnkgeyBiYWNrZ3JvdW5kOiM3YTdjZDA7IGNvbG9yOiNmZmY7IH0NCi5idG4tcHJpbWFyeTpob3ZlciB7IGZpbHRlcjpicmlnaHRuZXNzKC45NSk7IH0NCi5oaW50IHsgbWFyZ2luLXRvcDo4cHg7IGZvbnQtc2l6ZTouOXJlbTsgY29sb3I6IzIyYzU1ZTsgZm9udC13ZWlnaHQ6NzAwOyB9DQoucHJldmlldyB7IG1hcmdpbi10b3A6NnB4OyBmb250LXNpemU6LjlyZW07IH0NCg0KLyogTGlnaHQgbW9kZSBhZGp1c3RtZW50cyAqLw0KYm9keTpub3QoLmRhcmstbW9kZSkgLmNhbGMgLmZpZWxkIGlucHV0IHsgYmFja2dyb3VuZDojZjNmNGY2OyBjb2xvcjojMTExODI3OyBib3JkZXItY29sb3I6I2U1ZTdlYjsgfQ0KYm9keTpub3QoLmRhcmstbW9kZSkgI21ldGhvZEluZm8geyBiYWNrZ3JvdW5kOnRyYW5zcGFyZW50OyBjb2xvcjppbmhlcml0OyBib3JkZXItY29sb3I6dHJhbnNwYXJlbnQ7IH0KYm9keTpub3QoLmRhcmstbW9kZSkgLmJ0bi1vdXRsaW5lIHsgYmFja2dyb3VuZDojZjNmNGY2OyBjb2xvcjojMTExODI3OyBib3JkZXItY29sb3I6I2U1ZTdlYjsgfQ0KLyogdXRpbGl0eTogZ2VuZXJpYyBoaWRkZW4gY2xhc3MgdG8gc3VwcG9ydCBKUyB0b2dnbGluZyAqLw0KLmhpZGRlbiB7IGRpc3BsYXk6bm9uZSAhaW1wb3J0YW50OyB9DQovKiDYqtij2YPZitivINil2K7Zgdin2KEg2LTYp9ix2Kkg2KfZhNi52YXZhNipINin2YTZgtiv2YrZhdipICovDQojZnhCYWRnZXsgZGlzcGxheTpub25lICFpbXBvcnRhbnQ7IH0NCi8qIHJlbW92ZSBudW1iZXIgaW5wdXQgc3Bpbm5lcnMgaW5zaWRlIGRlcG9zaXQgbW9kYWwgKi8NCi5jYWxjIGlucHV0W3R5cGU9Im51bWJlciJdOjotd2Via2l0LW91dGVyLXNwaW4tYnV0dG9uLA0KLmNhbGMgaW5wdXRbdHlwZT0ibnVtYmVyIl06Oi13ZWJraXQtaW5uZXItc3Bpbi1idXR0b24geyAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7IG1hcmdpbjogMDsgfQ0KLmNhbGMgaW5wdXRbdHlwZT0ibnVtYmVyIl0geyAtbW96LWFwcGVhcmFuY2U6IHRleHRmaWVsZDsgYXBwZWFyYW5jZTogdGV4dGZpZWxkOyB9DQouY2FsYyAuZmllbGR7IHBvc2l0aW9uOnJlbGF0aXZlOyBtYXJnaW46MTBweCAwOyB9DQouY2FsYyAuZmllbGQgPiBsYWJlbHsgcG9zaXRpb246YWJzb2x1dGU7IGluc2V0LWlubGluZS1lbmQ6MThweDsgdG9wOjUwJTsgdHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTUwJSk7IHBvaW50ZXItZXZlbnRzOm5vbmU7IGZvbnQtd2VpZ2h0OjgwMDsgY29sb3I6I2NiZDVlMTsgfQ0KLmNhbGMgLmZpZWxkOjpiZWZvcmV7IGNvbnRlbnQ6IGF0dHIoZGF0YS1jdXIpOyBwb3NpdGlvbjphYnNvbHV0ZTsgaW5zZXQtaW5saW5lLXN0YXJ0OjE4cHg7IHRvcDo1MCU7IHRyYW5zZm9ybTp0cmFuc2xhdGVZKC01MCUpOyBmb250LXN0eWxlOml0YWxpYzsgY29sb3I6I2QxZDVkYjsgb3BhY2l0eTouOTU7IH0NCi5jYWxjIC5maWVsZC5ncmVlbiBpbnB1dHsgYmFja2dyb3VuZDojMDYzODFmOyBib3JkZXItY29sb3I6IzE0NTMyZDsgY29sb3I6I2U2ZmZmYjsgfQ0KLmNhbGMgLmZpZWxkLmdyZWVuID4gbGFiZWx7IGNvbG9yOiNiYmY3ZDA7IH0NCi5jYWxjIC5maWVsZC5ncmVlbjo6YmVmb3JleyBjb2xvcjojYTdmM2QwOyB9PC9zdHlsZT4NCiAgPHN0eWxlPg0KICAgIC8qINiq2K3Ys9mK2YbYp9iqINmG2KfZgdiw2Kkg2KfZhNil2YrYr9in2Lk6INiq2YXYsdmK2LHYjCDYq9mK2YUg2YHYp9iq2K0v2K/Yp9mD2YbYjCDYrdmC2YjZhCDYudi12LHZitipICovDQogICAgLm1vZGFsIHsgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDJweCk7IH0NCiAgICAubW9kYWwub3BlbiAubW9kYWwtY29udGVudCB7IGFuaW1hdGlvbjogbW9kYWxTbGlkZVVwIC4yMnMgZWFzZS1vdXQgYm90aDsgfQ0KICAgIEBrZXlmcmFtZXMgbW9kYWxTbGlkZVVwIHsgZnJvbSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgxNHB4KTsgb3BhY2l0eTouMDsgfSB0byB7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTsgb3BhY2l0eToxOyB9IH0NCg0KICAgIC8qINmF2K3YqtmI2Ykg2KfZhNmF2YjYr9in2YQ6INiq2YXYsdmK2LEg2K/Yp9iu2YTZiiDYudmE2Ykg2YPZhCDYp9mE2YXZgtin2LPYp9iqICovDQogICAgI21ldGhvZE1vZGFsIC5tb2RhbC1jb250ZW50IHsgcG9zaXRpb246IHJlbGF0aXZlOyBvdmVyZmxvdzogaGlkZGVuOyBtYXgtaGVpZ2h0OiBjYWxjKDEwMGR2aCAtIDI0cHgpOyBvdmVyZmxvdy15OiBhdXRvOyBvdmVyc2Nyb2xsLWJlaGF2aW9yOiBjb250YWluOyBzY3JvbGwtYmVoYXZpb3I6IHNtb290aDsgfQ0KICAgICNtZXRob2RNb2RhbCAubW9kYWwtY29udGVudDo6YmVmb3JlIHsgY29udGVudDoiIjsgcG9zaXRpb246YWJzb2x1dGU7IGluc2V0LWlubGluZTowOyBpbnNldC1ibG9jay1zdGFydDowOyBoZWlnaHQ6NHB4OyBiYWNrZ3JvdW5kOmxpbmVhci1ncmFkaWVudCg5MGRlZywjOWM5ZWRlLCM3YTdjZDAsIzIyYzU1ZSk7IG9wYWNpdHk6Ljk7IH0NCg0KICAgIC8qINiy2LEg2KXYutmE2KfZgiDYudin2KbZhSAqLw0KICAgIC5tb2RhbC14IHsgcG9zaXRpb246YWJzb2x1dGU7IGluc2V0LWlubGluZS1lbmQ6MTBweDsgaW5zZXQtYmxvY2stc3RhcnQ6MTBweDsgd2lkdGg6MzZweDsgaGVpZ2h0OjM2cHg7IGRpc3BsYXk6aW5saW5lLWZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgYm9yZGVyLXJhZGl1czoxMnB4OyBjdXJzb3I6cG9pbnRlcjsgYm9yZGVyOjFweCBzb2xpZCB0cmFuc3BhcmVudDsgYmFja2dyb3VuZDp0cmFuc3BhcmVudDsgfQ0KICAgIGh0bWxbZGF0YS10aGVtZT0iZGFyayJdIC5tb2RhbC14IHsgYm9yZGVyLWNvbG9yOiMyYjJkNTI7IGJhY2tncm91bmQ6cmdiYSgyLDYsMjMsLjQ1KTsgY29sb3I6I2NiZDVlMTsgfQ0KICAgIGh0bWxbZGF0YS10aGVtZT0iZGFyayJdIC5tb2RhbC14OmhvdmVyIHsgYmFja2dyb3VuZDpyZ2JhKDIsNiwyMywuNyk7IH0NCiAgICBodG1sW2RhdGEtdGhlbWU9ImxpZ2h0Il0gLm1vZGFsLXggeyBib3JkZXItY29sb3I6I2U1ZTdlYjsgYmFja2dyb3VuZDojZmZmZmZmOyBjb2xvcjojMmIyZDUyOyB9DQogICAgaHRtbFtkYXRhLXRoZW1lPSJsaWdodCJdIC5tb2RhbC14OmhvdmVyIHsgYmFja2dyb3VuZDojZjhmYWZjOyB9DQoNCiAgICAvKiDYq9mK2YUg2KfZhNmF2YjYr9in2YQgKi8NCiAgICBodG1sW2RhdGEtdGhlbWU9ImRhcmsiXSAjbWV0aG9kTW9kYWwgLm1vZGFsLWNvbnRlbnQgeyBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTgwZGVnLCByZ2JhKDIsNiwyMywuOTIpLCByZ2JhKDIsNiwyMywuODYpKTsgYm9yZGVyOiAxcHggc29saWQgIzJiMmQ1MjsgY29sb3I6ICNmMGYxZmY7IGJveC1zaGFkb3c6MCAxMnB4IDM2cHggcmdiYSgwLDAsMCwuNDUpOyB9DQogICAgaHRtbFtkYXRhLXRoZW1lPSJsaWdodCJdICNtZXRob2RNb2RhbCAubW9kYWwtY29udGVudCB7IGJhY2tncm91bmQ6I2ZmZmZmZjsgYm9yZGVyOjFweCBzb2xpZCAjZTVlN2ViOyBjb2xvcjojMTExODI3OyBib3gtc2hhZG93OjAgMThweCA0MHB4IHJnYmEoMCwwLDAsLjEyKTsgfQ0KDQogICAgLyog2LnZhtmI2KfZhiAqLw0KICAgIC5tb2RhbC10aXRsZSB7IHRleHQtYWxpZ246Y2VudGVyOyBtYXJnaW4tdG9wOjZweDsgZm9udC1zaXplOjEuMzVyZW07IGZvbnQtd2VpZ2h0OjgwMDsgbGV0dGVyLXNwYWNpbmc6LjJweDsgYmFja2dyb3VuZDpsaW5lYXItZ3JhZGllbnQoOTBkZWcsIzljOWVkZSwjYjliYmVmLCNhN2YzZDApOyAtd2Via2l0LWJhY2tncm91bmQtY2xpcDp0ZXh0OyBiYWNrZ3JvdW5kLWNsaXA6dGV4dDsgY29sb3I6dHJhbnNwYXJlbnQ7IH0NCg0KICAgIC8qINin2YTYs9i52LEg4oCUINmF2K7ZgdmKINio2YbYp9ih2Ysg2LnZhNmJINi32YTYqNmDICovDQogICAgLnJhdGUtbGluZSB7IGRpc3BsYXk6bm9uZSAhaW1wb3J0YW50OyB9DQoNCiAgICAvKiDYqtmB2KfYtdmK2YQg2KfZhNi32LHZitmC2KkgKi8NCiAgICAjbWV0aG9kSW5mby5pbmZvLWxpc3QgeyBtYXJnaW46MTZweCAwOyBwYWRkaW5nOjA7IGRpc3BsYXk6ZmxleDsgZmxleC1kaXJlY3Rpb246Y29sdW1uOyBnYXA6MTJweDsgfQogICAgI21ldGhvZEluZm8gLmluZm8taXRlbSB7IGRpc3BsYXk6ZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjsgZ2FwOjE0cHg7IHBhZGRpbmc6MTJweCAxNnB4OyBib3JkZXItcmFkaXVzOjE2cHg7IGJvcmRlcjoxcHggc29saWQgIzJiMmQ1MjsgYmFja2dyb3VuZDpyZ2JhKDIsNiwyMywuNDUpOyBib3gtc2hhZG93OjAgMXB4IDAgcmdiYSgyNTUsMjU1LDI1NSwuMDMpIGluc2V0OyB9CiAgICBodG1sW2RhdGEtdGhlbWU9ImRhcmsiXSAjbWV0aG9kSW5mbyAuaW5mby1pdGVtIHsgYm9yZGVyLWNvbG9yOiMyYjJkNTI7IGJhY2tncm91bmQ6cmdiYSgyLDYsMjMsLjQ1KTsgfQogICAgaHRtbFtkYXRhLXRoZW1lPSJsaWdodCJdICNtZXRob2RJbmZvIC5pbmZvLWl0ZW0geyBib3JkZXItY29sb3I6I2U1ZTdlYjsgYmFja2dyb3VuZDojZmZmZmZmOyBib3gtc2hhZG93OjAgMXB4IDAgcmdiYSgyNTUsMjU1LDI1NSwuNCkgaW5zZXQ7IH0KICAgICNtZXRob2RJbmZvIC5pbmZvLWl0ZW0gc3Ryb25nIHsgZm9udC1zaXplOi44NXJlbTsgZm9udC13ZWlnaHQ6ODAwOyBjb2xvcjojY2JkNWUxOyBsZXR0ZXItc3BhY2luZzouMnB4OyB9CiAgICBodG1sW2RhdGEtdGhlbWU9ImxpZ2h0Il0gI21ldGhvZEluZm8gLmluZm8taXRlbSBzdHJvbmcgeyBjb2xvcjojNDc1NTY5OyB9CiAgICAjbWV0aG9kSW5mbyAuaW5mby12YWx1ZSB7IGRpc3BsYXk6ZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6MTBweDsgZm9udC1zaXplOi45MnJlbTsgZm9udC13ZWlnaHQ6NzAwOyBkaXJlY3Rpb246bHRyOyBmbGV4LXdyYXA6d3JhcDsganVzdGlmeS1jb250ZW50OmZsZXgtc3RhcnQ7IH0KICAgIGh0bWxbZGlyPSJydGwiXSAjbWV0aG9kSW5mbyAuaW5mby12YWx1ZSB7IGRpcmVjdGlvbjpsdHI7IH0KICAgICNtZXRob2RJbmZvIC5pbmZvLXZhbHVlIHNwYW4udmFsdWUtdGV4dCB7IGZvbnQtdmFyaWFudC1udW1lcmljOnRhYnVsYXItbnVtczsgbGV0dGVyLXNwYWNpbmc6LjNweDsgfQogICAgI21ldGhvZEluZm8gLmNvcHktYnRuIHsgZGlzcGxheTppbmxpbmUtZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6N3B4OyBwYWRkaW5nOjZweCAxNHB4OyBib3JkZXItcmFkaXVzOjk5OXB4OyBmb250LXNpemU6Ljc1cmVtOyBmb250LXdlaWdodDo4MDA7IGN1cnNvcjpwb2ludGVyOyBib3JkZXI6MXB4IHNvbGlkIHRyYW5zcGFyZW50OyB0cmFuc2l0aW9uOnRyYW5zZm9ybSAuMThzIGVhc2UsIGJhY2tncm91bmQgLjE4cyBlYXNlLCBjb2xvciAuMThzIGVhc2UsIGJveC1zaGFkb3cgLjE4cyBlYXNlOyB9CiAgICBodG1sW2RhdGEtdGhlbWU9ImRhcmsiXSAjbWV0aG9kSW5mbyAuY29weS1idG4geyBiYWNrZ3JvdW5kOnJnYmEoMTUsMjMsNDIsLjcpOyBjb2xvcjojZTJlOGYwOyBib3JkZXItY29sb3I6IzFlM2E4YTsgYm94LXNoYWRvdzowIDZweCAxNHB4IHJnYmEoMTUsMjMsNDIsLjQ1KTsgfQogICAgaHRtbFtkYXRhLXRoZW1lPSJsaWdodCJdICNtZXRob2RJbmZvIC5jb3B5LWJ0biB7IGJhY2tncm91bmQ6I2U4ZWRmZjsgY29sb3I6IzFlM2E4YTsgYm9yZGVyLWNvbG9yOiNjN2QyZmU7IGJveC1zaGFkb3c6MCA2cHggMTJweCByZ2JhKDc5LDcwLDIyOSwuMTgpOyB9CiAgICAjbWV0aG9kSW5mbyAuY29weS1idG46aG92ZXIgeyB0cmFuc2Zvcm06dHJhbnNsYXRlWSgtMnB4KSBzY2FsZSgxLjAyKTsgfQogICAgI21ldGhvZEluZm8gLmNvcHktYnRuOmFjdGl2ZSB7IHRyYW5zZm9ybTp0cmFuc2xhdGVZKDApIHNjYWxlKC45OSk7IH0KICAgICNtZXRob2RJbmZvIC5jb3B5LWJ0bi5jb3BpZWQgeyBiYWNrZ3JvdW5kOiMyMmM1NWU7IGJvcmRlci1jb2xvcjojMTZhMzRhOyBjb2xvcjojZmZmZmZmOyBib3gtc2hhZG93OjAgMTJweCAyNHB4IHJnYmEoMzQsMTk3LDk0LC4yOCk7IH0KICAgICNtZXRob2RJbmZvIC5jb3B5LWJ0biBpIHsgZm9udC1zaXplOi44NXJlbTsgfQoNCiAgICAvKiDYp9mE2K3ZgtmI2YQg2KfZhNi52LXYsdmK2Kkg4oCUINi12YEg2YjYp9it2K8g2LXYutmK2LEgKi8NCiAgICAjbWV0aG9kTW9kYWwgLmNhbGMgeyBkaXNwbGF5OmdyaWQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczpyZXBlYXQoMiwgbWlubWF4KDAsMWZyKSk7IGdhcDoxMHB4OyBtYXJnaW4tdG9wOjhweDsgYWxpZ24taXRlbXM6ZmxleC1zdGFydDsgfQ0KICAgICNtZXRob2RNb2RhbCAuY2FsYyAuZmllbGQgeyBwb3NpdGlvbjpyZWxhdGl2ZTsgbWFyZ2luOjA7IGJvcmRlcjoxcHggc29saWQgdHJhbnNwYXJlbnQ7IGJvcmRlci1yYWRpdXM6MTRweDsgcGFkZGluZzo2cHg7IH0NCiAgICBodG1sW2RhdGEtdGhlbWU9ImRhcmsiXSAjbWV0aG9kTW9kYWwgLmNhbGMgLmZpZWxkIHsgYm9yZGVyLWNvbG9yOiMyYjJkNTI7IGJhY2tncm91bmQ6cmdiYSgyLDYsMjMsLjQ1KTsgYm94LXNoYWRvdzowIDFweCAwIHJnYmEoMjU1LDI1NSwyNTUsLjAzKSBpbnNldDsgfQ0KICAgIGh0bWxbZGF0YS10aGVtZT0ibGlnaHQiXSAjbWV0aG9kTW9kYWwgLmNhbGMgLmZpZWxkIHsgYm9yZGVyLWNvbG9yOiNlNWU3ZWI7IGJhY2tncm91bmQ6I2ZmZmZmZjsgfQ0KICAgICNtZXRob2RNb2RhbCAuY2FsYyAuZmllbGQ6Zm9jdXMtd2l0aGluIHsgYm94LXNoYWRvdzowIDAgMCA0cHggcmdiYSg1NiwxODksMjQ4LC4yMik7IGJvcmRlci1jb2xvcjojYjliYmVmOyB9DQoNCiAgICAjbWV0aG9kTW9kYWwgLmNhbGMgLmZpZWxkIGlucHV0IHsgd2lkdGg6MTAwJTsgaGVpZ2h0OjMycHg7IGJvcmRlci1yYWRpdXM6MTBweDsgcGFkZGluZzowIDY0cHg7IGZvbnQtd2VpZ2h0OjgwMDsgZm9udC1zaXplOi45NXJlbTsgZGlyZWN0aW9uOmx0cjsgdGV4dC1hbGlnbjplbmQ7IGZvbnQtdmFyaWFudC1udW1lcmljOnRhYnVsYXItbnVtczsgb3V0bGluZTpub25lOyBib3JkZXI6MDsgYmFja2dyb3VuZDp0cmFuc3BhcmVudDsgY29sb3I6aW5oZXJpdDsgfQ0KICAgICNtZXRob2RNb2RhbCAuY2FsYyAuZmllbGQgaW5wdXQ6OnBsYWNlaG9sZGVyIHsgb3BhY2l0eTouNTsgfQ0KDQogICAgLyog2LTYp9ix2Kkg2KfZhNi52YXZhNipINiv2KfYrtmEINin2YTYrdmC2YQg2YPZg9io2LPZiNmE2Kkg2LnZhNmJINin2YTZitmF2YrZhiAqLw0KICAgICNtZXRob2RNb2RhbCAuY2FsYyAuZmllbGQ6OmJlZm9yZSB7IGNvbnRlbnQ6IGF0dHIoZGF0YS1jdXIpOyBwb3NpdGlvbjphYnNvbHV0ZTsgaW5zZXQtaW5saW5lLXN0YXJ0OjhweDsgdG9wOjUwJTsgdHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTUwJSk7IHBhZGRpbmc6MnB4IDEwcHg7IGJvcmRlci1yYWRpdXM6OTk5cHg7IGZvbnQtc2l6ZTouNzVyZW07IGZvbnQtd2VpZ2h0OjgwMDsgbGV0dGVyLXNwYWNpbmc6LjNweDsgfQ0KICAgIGh0bWxbZGF0YS10aGVtZT0iZGFyayJdICNtZXRob2RNb2RhbCAuY2FsYyAuZmllbGQ6OmJlZm9yZSB7IGJhY2tncm91bmQ6cmdiYSgxNDgsMTYzLDE4NCwuMTIpOyBib3JkZXI6MXB4IHNvbGlkICMyYjJkNTI7IGNvbG9yOiNjYmQ1ZTE7IH0NCiAgICBodG1sW2RhdGEtdGhlbWU9ImxpZ2h0Il0gI21ldGhvZE1vZGFsIC5jYWxjIC5maWVsZDo6YmVmb3JlIHsgYmFja2dyb3VuZDojZWVmMmY3OyBib3JkZXI6MXB4IHNvbGlkICNlNWU3ZWI7IGNvbG9yOiM0NzU1Njk7IH0NCg0KICAgIC8qINmE2KfYtdmCINin2YTYqtiz2YXZitipINij2LnZhNmJINin2YTYrdmC2YQgKi8NCiAgICAjbWV0aG9kTW9kYWwgLmNhbGMgLmZpZWxkID4gbGFiZWwgeyBwb3NpdGlvbjphYnNvbHV0ZTsgaW5zZXQtaW5saW5lLWVuZDoxMnB4OyB0b3A6LTEwcHg7IHBhZGRpbmc6MCA4cHg7IGJvcmRlci1yYWRpdXM6OTk5cHg7IGZvbnQtc2l6ZTouNzVyZW07IGZvbnQtd2VpZ2h0OjgwMDsgbGluZS1oZWlnaHQ6MS42OyB9DQogICAgaHRtbFtkYXRhLXRoZW1lPSJkYXJrIl0gI21ldGhvZE1vZGFsIC5jYWxjIC5maWVsZCA+IGxhYmVsIHsgYmFja2dyb3VuZDojMDUwNTBiOyBjb2xvcjojY2JkNWUxOyB9DQogICAgaHRtbFtkYXRhLXRoZW1lPSJsaWdodCJdICNtZXRob2RNb2RhbCAuY2FsYyAuZmllbGQgPiBsYWJlbCB7IGJhY2tncm91bmQ6I2ZmZmZmZjsgY29sb3I6IzQ3NTU2OTsgfQ0KDQogICAgLyog2KPYstix2KfYsSAqLw0KICAgIC5idG4tcHJpbWFyeSB7IGJhY2tncm91bmQ6bGluZWFyLWdyYWRpZW50KDEzNWRlZywjN2E3Y2QwLCMzYjNlOGMpOyBib3JkZXI6MDsgfQ0KICAgIC5idG4tcHJpbWFyeTpob3ZlciB7IGZpbHRlcjpicmlnaHRuZXNzKC45OCk7IH0NCiAgICAuYnRuLW91dGxpbmUgeyBib3JkZXItcmFkaXVzOjE0cHg7IH0NCg0KICAgIEBtZWRpYSAobWF4LXdpZHRoOjQ4MHB4KXsNCiAgICAgICNtZXRob2RNb2RhbCAuY2FsYyAuZmllbGQgaW5wdXQgeyBwYWRkaW5nOiAwIDQwcHg7IGhlaWdodDogNDJweDsgZm9udC1zaXplOi45NXJlbTsgfQ0KICAgICAgLm1vZGFsLXggeyB3aWR0aDo0MHB4OyBoZWlnaHQ6NDBweDsgaW5zZXQtaW5saW5lLWVuZDo4cHg7IGluc2V0LWJsb2NrLXN0YXJ0OjhweDsgfQ0KICAgICAgLm1vZGFsLXRpdGxlIHsgZm9udC1zaXplOjEuMnJlbTsgbWFyZ2luLXRvcDoycHg7IH0NCiAgICB9DQogICAgLyog2LnZhtmI2KfZhiDYo9i52YTZiSDYp9mE2LXZgdit2Kkg4oCUINix2KzZiNi5INmE2YTYqti12YXZitmFINin2YTYqNiz2YrYtyDZiNmF2LHZg9iyICovDQogICAgLnRvb2xiYXIgLndoZXJleyBiYWNrZ3JvdW5kOm5vbmUgIWltcG9ydGFudDsgLXdlYmtpdC1iYWNrZ3JvdW5kLWNsaXA6aW5pdGlhbDsgYmFja2dyb3VuZC1jbGlwOmluaXRpYWw7IGZvbnQtc2l6ZToxLjA1cmVtOyBwYWRkaW5nOjA7IGJvcmRlci1yYWRpdXM6MDsgdGV4dC1hbGlnbjpjZW50ZXI7IH0NCiAgICBodG1sW2RhdGEtdGhlbWU9ImxpZ2h0Il0gLnRvb2xiYXIgLndoZXJleyBjb2xvcjojNWM1ZWJmICFpbXBvcnRhbnQ7IH0NCiAgICBodG1sW2RhdGEtdGhlbWU9ImRhcmsiXSAgLnRvb2xiYXIgLndoZXJleyBjb2xvcjojOWM5ZWRlICFpbXBvcnRhbnQ7IH0NCiAgICBAbWVkaWEgKG1heC13aWR0aDo0ODBweCl7IC50b29sYmFyIC53aGVyZXsgZm9udC1zaXplOjFyZW07IH0gfQ0KICA8L3N0eWxlPg0KPC9oZWFkPg0KPGJvZHk+DQogIDwhLS0gUGFnZSBwcmVsb2FkZXIgb3ZlcmxheSAtLT4NCiAgPGRpdiBpZD0icHJlbG9hZGVyIj48ZGl2IGNsYXNzPSJsb2FkZXIiPjwvZGl2PjwvZGl2Pg0KDQogIDxkaXYgaWQ9ImhlYWRlckNvbnRhaW5lciI+PC9kaXY+DQogIDxkaXYgaWQ9InNpZGViYXJDb250YWluZXIiPjwvZGl2Pg0KDQogIDxtYWluPg0KICAgIDxkaXYgY2xhc3M9InRvb2xiYXIiPg0KICAgICAgPGJ1dHRvbiBpZD0iYmFja0J0biIgY2xhc3M9ImJhY2stYnRuIj48aSBjbGFzcz0iZmEgZmEtYXJyb3ctcmlnaHQiPjwvaT4g2LHYrNmI2Lk8L2J1dHRvbj4NCiAgICAgIDxkaXYgY2xhc3M9IndoZXJlIiBpZD0id2hlcmVUZXh0Ij7Yp9mE2K/ZiNmEINin2YTZhdiq2KfYrdipINmE2YTYpdmK2K/Yp9i5PC9kaXY+DQogICAgICA8ZGl2IHN0eWxlPSJ3aWR0aDoxMjBweCI+PC9kaXY+DQogICAgPC9kaXY+DQoNCiAgICA8ZGl2IGNsYXNzPSJzZWFyY2gtY29udGFpbmVyIj4NCiAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0ic2VhcmNoSW5wdXQiIHBsYWNlaG9sZGVyPSLYp9io2K3YqyDYr9in2K7ZhCDYp9mE2YLYp9im2YXYqSDYp9mE2K3Yp9mE2YrYqS4iIGFyaWEtbGFiZWw9Itio2K3YqyIvPg0KICAgIDwvZGl2Pg0KDQogICAgPHNlY3Rpb24gY2xhc3M9ImNhdGVnb3JpZXMiIGlkPSJncmlkIj48L3NlY3Rpb24+DQogICAgPHAgY2xhc3M9Im5vLXJlc3VsdHMiIGlkPSJub1Jlc3VsdHMiIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij7ZhNinINiq2YjYrNivINmG2KrYp9im2Kwg2YXYt9in2KjZgtipLjwvcD4NCiAgPC9tYWluPg0KDQogIDwhLS0g2YXZiNiv2KfZhCDYqtmB2KfYtdmK2YQg2LfYsdmK2YLYqSDYp9mE2K/Zgdi5IC0tPg0KICA8ZGl2IGNsYXNzPSJtb2RhbCIgaWQ9Im1ldGhvZE1vZGFsIiByb2xlPSJkaWFsb2ciIGFyaWEtbW9kYWw9InRydWUiPg0KICAgIDxkaXYgY2xhc3M9Im1vZGFsLWNvbnRlbnQiIHJvbGU9ImRvY3VtZW50Ij4NCiAgICAgIDwhLS0g2LLYsSDYpdi62YTYp9mCINi52KfYptmFINio2K/ZiNmGINiq2LHZiNmK2LPYqSAtLT4NCiAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0ibW9kYWwteCIgYXJpYS1sYWJlbD0i2KXYutmE2KfZgiIgb25jbGljaz0idHJ5eyBjbG9zZU1vZGFsRm4oKTsgfWNhdGNoKF8pe30iPg0KICAgICAgICA8aSBjbGFzcz0iZmEtc29saWQgZmEteG1hcmsiPjwvaT4NCiAgICAgIDwvYnV0dG9uPg0KICAgICAgPGRpdiBjbGFzcz0ibW9kYWwtdGl0bGUiIGlkPSJtb2RhbFRpdGxlIj7YqtmB2KfYtdmK2YQg2KfZhNiq2K3ZiNmK2YQ8L2Rpdj4NCiAgICAgIDxkaXYgY2xhc3M9InJhdGUtbGluZSI+DQogICAgICAgIDxkaXYgY2xhc3M9Im1pbmkiPjxpIGNsYXNzPSJmYS1yZWd1bGFyIGZhLWNpcmNsZS1xdWVzdGlvbiI+PC9pPiDYp9mE2LPYudixINin2YTYrdin2YTZijo8L2Rpdj4NCiAgICAgICAgPGRpdiBjbGFzcz0iY2hpcCIgaWQ9InJhdGVMaW5lIj7igJQ8L2Rpdj4NCiAgICAgIDwvZGl2Pg0KICAgICAgPGRpdiBpZD0iZnhCYWRnZSIgY2xhc3M9ImJhZGdlIGhpZGRlbiI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWNvaW5zIj48L2k+PHNwYW4gaWQ9ImZ4VGV4dCI+PC9zcGFuPjwvZGl2Pg0KDQogICAgICA8IS0tINin2YTYrdin2LPYqNipINij2LnZhNmJINin2YTZhdmI2K/Yp9mEIC0tPg0KICAgICAgPGRpdiBjbGFzcz0iY2FsYyI+DQogICAgICAgIDxkaXYgY2xhc3M9ImZpZWxkIiBpZD0iZmllbGRQYXkiPg0KICAgICAgICAgIDxsYWJlbCBmb3I9InNlbmRKT0QiPtiz2YrYr9mB2LkgKOKAlCk8L2xhYmVsPiA8IS0tINiz2YbYttio2Lcg2KfZhNi52YXZhNipINmE2KfYrdmC2YvYpyAtLT4NCiAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0ic2VuZEpPRCIgbWluPSIwIiBzdGVwPSIwLjAxIiBwbGFjZWhvbGRlcj0iMC4wMCIvPg0KICAgICAgICA8L2Rpdj4NCiAgICAgICAgPGRpdiBjbGFzcz0iZmllbGQiIGlkPSJmaWVsZFJlY3YiPg0KICAgICAgICAgIDxsYWJlbCBmb3I9InJlY3ZDVVIiPtiz2YrZj9i22KfZgSAo2K/ZiNmE2KfYsSDYo9mF2LHZitmD2YogVVNEKTwvbGFiZWw+DQogICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9InJlY3ZDVVIiIG1pbj0iMCIgc3RlcD0iMC4wMSIgcGxhY2Vob2xkZXI9IjAuMDAiIC8+DQogICAgICAgIDwvZGl2Pg0KICAgICAgPC9kaXY+DQoNCiAgICAgIDxkaXYgaWQ9Im1ldGhvZEluZm8iIGNsYXNzPSJpbmZvLWxpc3QiPjwvZGl2Pg0KDQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJhY3Rpb25zIj4NCiAgICAgICAgPGlucHV0IHR5cGU9ImZpbGUiIGlkPSJwcm9vZkZpbGUiIGFjY2VwdD0iaW1hZ2UvKiIgc3R5bGU9ImRpc3BsYXk6bm9uZSIgLz4NCiAgICAgICAgPGxhYmVsIGZvcj0icHJvb2ZGaWxlIiBjbGFzcz0iYnRuIGJ0bi1vdXRsaW5lIiBpZD0icHJvb2ZUcmlnZ2VyIj7Yp9ir2KjYp9iqINin2YTYr9mB2LkgPGkgY2xhc3M9ImZhLXNvbGlkIGZhLXBhcGVyY2xpcCI+PC9pPjwvbGFiZWw+DQogICAgICAgIDxidXR0b24gaWQ9InN1Ym1pdERlcG9zaXRCdG4iIGNsYXNzPSJidG4gYnRuLXByaW1hcnkiIGRpc2FibGVkPti32YTYqDwvYnV0dG9uPg0KICAgICAgICA8YnV0dG9uIGlkPSJjbG9zZU1vZGFsIiBjbGFzcz0iYnRuIGJ0bi1vdXRsaW5lIj7Yp9i62YTYp9mCPC9idXR0b24+DQogICAgICA8L2Rpdj4NCg0KICAgICAgPCEtLSBUdXJuc3RpbGU6INix2YbYr9ixINi22YXZhtmKIChJbXBsaWNpdCkgLS0+DQogICAgICA8ZGl2IGNsYXNzPSJ0dXJuc3RpbGUtd3JhcCI+DQogICAgICAgIDxkaXYgY2xhc3M9ImNmLXR1cm5zdGlsZSINCiAgICAgICAgICAgICBkYXRhLXNpdGVrZXk9IjB4NEFBQUFBQUI2U1NMLThXMGhzQU9NbiINCiAgICAgICAgICAgICBkYXRhLWNhbGxiYWNrPSJvblR1cm5zdGlsZVN1Y2Nlc3MiDQogICAgICAgICAgICAgZGF0YS1leHBpcmVkLWNhbGxiYWNrPSJvblR1cm5zdGlsZUV4cGlyZWQiPg0KICAgICAgICA8L2Rpdj4NCiAgICAgIDwvZGl2Pg0KDQogICAgICA8ZGl2IGNsYXNzPSJoaW50Ij7Zhdix2KfYrNi52Kkg2KfZhNi32YTYqNin2Kog2YrYr9mI2YrYqSDZiNmC2K8g2KrYs9iq2LrYsdmCINmF2YYg2K/ZgtmK2YLYqSDYpdmE2Ykg2LPYp9i52KrZitmGINmB2Yog2KPZiNmC2KfYqiDYp9mE2LnZhdmELjwvZGl2Pg0KICAgICAgPGRpdiBpZD0icHJvb2ZQcmV2aWV3IiBjbGFzcz0icHJldmlldyI+PC9kaXY+DQogICAgPC9kaXY+DQogIDwvZGl2Pg0KDQogIDxzY3JpcHQ+DQogICAgLy8gPT09PT0gU2ltcGxlIHByZWxvYWRlciBjb250cm9scyBmb3IgdGhpcyBwYWdlID09PT09DQogICAgZnVuY3Rpb24gc2hvd1ByZWxvYWRlcigpew0KICAgICAgY29uc3QgcHJlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByZWxvYWRlcicpOw0KICAgICAgaWYoIXByZSkgcmV0dXJuOyBwcmUuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7IHByZS5zdHlsZS5kaXNwbGF5PSdmbGV4JzsgcHJlLnN0eWxlLm9wYWNpdHk9JzEnOw0KICAgIH0NCiAgICBmdW5jdGlvbiBoaWRlUHJlbG9hZGVyKCl7CiAgICAgIGNvbnN0IHByZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmVsb2FkZXInKTsKICAgICAgaWYoIXByZSkgcmV0dXJuOyBwcmUuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7IHNldFRpbWVvdXQoKCk9PnsgcHJlLnN0eWxlLmRpc3BsYXk9J25vbmUnOyB9LCA0NTApOwogICAgfQoKICAgIGFzeW5jIGZ1bmN0aW9uIGNvcHlUb0NsaXBib2FyZCh0ZXh0KXsKICAgICAgY29uc3QgdmFsdWUgPSAodGV4dD09bnVsbCkgPyAnJyA6IFN0cmluZyh0ZXh0KTsKICAgICAgaWYgKCF2YWx1ZS50cmltKCkpIHJldHVybiBmYWxzZTsKICAgICAgdHJ5ewogICAgICAgIGlmIChuYXZpZ2F0b3IuY2xpcGJvYXJkICYmIG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KXsKICAgICAgICAgIGF3YWl0IG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KHZhbHVlKTsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgfWNhdGNoKF8pe30KICAgICAgbGV0IHRleHRhcmVhID0gbnVsbDsKICAgICAgdHJ5ewogICAgICAgIHRleHRhcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTsKICAgICAgICB0ZXh0YXJlYS52YWx1ZSA9IHZhbHVlOwogICAgICAgIHRleHRhcmVhLnNldEF0dHJpYnV0ZSgncmVhZG9ubHknLCcnKTsKICAgICAgICB0ZXh0YXJlYS5zdHlsZS5wb3NpdGlvbj0nZml4ZWQnOwogICAgICAgIHRleHRhcmVhLnN0eWxlLm9wYWNpdHk9JzAnOwogICAgICAgIHRleHRhcmVhLnN0eWxlLnBvaW50ZXJFdmVudHM9J25vbmUnOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGV4dGFyZWEpOwogICAgICAgIHRleHRhcmVhLmZvY3VzKCk7CiAgICAgICAgdGV4dGFyZWEuc2VsZWN0KCk7CiAgICAgICAgY29uc3Qgb2sgPSBkb2N1bWVudC5leGVjQ29tbWFuZCAmJiBkb2N1bWVudC5leGVjQ29tbWFuZCgnY29weScpOwogICAgICAgIHJldHVybiAhIW9rOwogICAgICB9Y2F0Y2goXyl7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9ZmluYWxseXsKICAgICAgICBpZiAodGV4dGFyZWEgJiYgdGV4dGFyZWEucGFyZW50Tm9kZSl7CiAgICAgICAgICB0ZXh0YXJlYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRleHRhcmVhKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qID09PT09PT09PT09PT09PT09PT09PT09PT0g2KXYudiv2KfYryDYudin2YUgPT09PT09PT09PT09PT09PT09PT09PT09PSAqLw0KICBjb25zdCBXT1JLRVJfQkFTRSA9ICJodHRwczovL2VkYWFhbmRzYWhiLmxhaXRocWFycWF6NjYud29ya2Vycy5kZXYvIjsNCiAgY29uc3QgV09SS0VSID0gKFdPUktFUl9CQVNFIHx8ICcnKS5yZXBsYWNlKC9cLyskLywgJycpOw0KICBjb25zdCBJTUdCQl9BUElfS0VZID0gIjQ5MWYwMTUxMGY3NjYxNDc4MTllMDc3Yzk1YzQ5N2E1IjsNCg0KICAgIC8vIEZpcmViYXNlICjZg9mF2Kcg2YfZiCkNCiAgICBjb25zdCBmaXJlYmFzZUNvbmZpZyA9IHsNCiAgICAgICAgICBhcGlLZXk6IkFJemFTeUJSVkVWaXVLbkNVWnFCb0QwbGl1QS1QMERWTjdtVGVQQSIsDQogICAgICAgICAgYXV0aERvbWFpbjoiejNlbS1kOWIxMS5maXJlYmFzZWFwcC5jb20iLA0KICAgICAgICAgIHByb2plY3RJZDoiejNlbS1kOWIxMSIsDQogICAgICAgICAgc3RvcmFnZUJ1Y2tldDoiejNlbS1kOWIxMS5maXJlYmFzZXN0b3JhZ2UuYXBwIiwNCiAgICAgICAgICBtZXNzYWdpbmdTZW5kZXJJZDoiMjM2NzE2NTIwOTQ1IiwNCiAgICAgICAgICBhcHBJZDoiMToyMzY3MTY1MjA5NDU6d2ViOmEwYzMzNmRiN2RjNzA3OWMxOTAwNTAiLA0KICAgICAgICAgIG1lYXN1cmVtZW50SWQ6IkctMUdHNkRFMTJLNiINCiAgICAgICAgfTsNCiAgICBmaXJlYmFzZS5pbml0aWFsaXplQXBwKGZpcmViYXNlQ29uZmlnKTsNCiAgICBjb25zdCBhdXRoID0gZmlyZWJhc2UuYXV0aCgpOw0KICAgIGNvbnN0IGRiID0gZmlyZWJhc2UuZmlyZXN0b3JlKCk7DQoNCiAgICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09IFR1cm5zdGlsZSA9PT09PT09PT09PT09PT09PT09PT09PT09ICovDQogICAgd2luZG93LnR1cm5zdGlsZVRva2VuID0gbnVsbDsNCiAgICB3aW5kb3cub25UdXJuc3RpbGVTdWNjZXNzID0gZnVuY3Rpb24odG9rZW4pew0KICAgICAgd2luZG93LnR1cm5zdGlsZVRva2VuID0gdG9rZW47DQogICAgICBpZiAoY3VycmVudFByb29mRmlsZSAmJiAhdXBsb2FkZWRQcm9vZlVybCkgYXV0b1VwbG9hZFByb29mKCkuY2F0Y2goY29uc29sZS5lcnJvcik7DQogICAgICB1cGRhdGVTdWJtaXRTdGF0ZSgpOw0KICAgIH07DQogICAgd2luZG93Lm9uVHVybnN0aWxlRXhwaXJlZCA9IGZ1bmN0aW9uKCl7DQogICAgICB3aW5kb3cudHVybnN0aWxlVG9rZW4gPSBudWxsOw0KICAgICAgdXBsb2FkZWRQcm9vZlVybCA9IG51bGw7DQogICAgICB1cGRhdGVTdWJtaXRTdGF0ZSgpOw0KICAgICAgdHJ5IHsgdXBkYXRlUHJvb2ZVSSgpOyB9IGNhdGNoKF8peyB9DQogICAgfTsNCg0KICAgIC8qID09PT09PT09PT09PT09PT09PT09PT09PT0g2LnZhtin2LXYsSBET00gPT09PT09PT09PT09PT09PT09PT09PT09PSAqLw0KICAgIGNvbnN0IGdyaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3JpZCcpOw0KICAgIGNvbnN0IHNlYXJjaElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaElucHV0Jyk7DQogICAgY29uc3Qgbm9SZXN1bHRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25vUmVzdWx0cycpOw0KICAgIGNvbnN0IGJhY2tCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmFja0J0bicpOw0KICAgIGNvbnN0IHdoZXJlVGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3aGVyZVRleHQnKTsNCg0KICAgIGNvbnN0IG1ldGhvZE1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21ldGhvZE1vZGFsJyk7DQogICAgY29uc3QgY2xvc2VNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbG9zZU1vZGFsJyk7DQogICAgY29uc3QgbW9kYWxUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbFRpdGxlJyk7DQogICAgY29uc3QgbWV0aG9kSW5mbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZXRob2RJbmZvJyk7CgogICAgY29uc3QgcHJvb2ZGaWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb29mRmlsZScpOwogICAgY29uc3QgcHJvb2ZUcmlnZ2VyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb29mVHJpZ2dlcicpOwogICAgY29uc3Qgc3VibWl0RGVwb3NpdEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWJtaXREZXBvc2l0QnRuJyk7CiAgICBjb25zdCBwcm9vZlByZXZpZXcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvb2ZQcmV2aWV3Jyk7CgogICAgZnVuY3Rpb24gc2V0dXBJbmZvQ29weUJ1dHRvbnMoKXsKICAgICAgdHJ5ewogICAgICAgIGlmICghbWV0aG9kSW5mbykgcmV0dXJuOwogICAgICAgIGNvbnN0IGl0ZW1zID0gbWV0aG9kSW5mby5xdWVyeVNlbGVjdG9yQWxsKCcuaW5mby1pdGVtJyk7CiAgICAgICAgaXRlbXMuZm9yRWFjaChpdGVtPT57CiAgICAgICAgICBjb25zdCBsYWJlbEVsID0gaXRlbS5xdWVyeVNlbGVjdG9yKCdzdHJvbmcnKTsKICAgICAgICAgIGNvbnN0IHZhbHVlRWwgPSBsYWJlbEVsID8gbGFiZWxFbC5uZXh0RWxlbWVudFNpYmxpbmcgOiBudWxsOwogICAgICAgICAgaWYgKCFsYWJlbEVsIHx8ICF2YWx1ZUVsKSByZXR1cm47CiAgICAgICAgICBpZiAodmFsdWVFbC5kYXRhc2V0LmNvcHlSZWFkeSA9PT0gJzEnKSByZXR1cm47CiAgICAgICAgICBjb25zdCBsYWJlbFRleHQgPSAobGFiZWxFbC50ZXh0Q29udGVudCB8fCAnJykudHJpbSgpOwogICAgICAgICAgY29uc3QgcmF3VmFsdWUgPSAodmFsdWVFbC50ZXh0Q29udGVudCB8fCAnJykudHJpbSgpOwogICAgICAgICAgaWYgKCFsYWJlbFRleHQpIHJldHVybjsKICAgICAgICAgIGlmICghcmF3VmFsdWUpIHJldHVybjsKICAgICAgICAgIGNvbnN0IGxvd2VyTGFiZWwgPSBsYWJlbFRleHQudG9Mb3dlckNhc2UoKTsKICAgICAgICAgIGNvbnN0IHNob3VsZENvcHkgPQogICAgICAgICAgICBsYWJlbFRleHQuaW5jbHVkZXMoJ9ix2YLZhScpIHx8CiAgICAgICAgICAgIGxhYmVsVGV4dC5pbmNsdWRlcygn2YXYudixJykgfHwKICAgICAgICAgICAgbG93ZXJMYWJlbC5pbmNsdWRlcygnaWJhbicpIHx8CiAgICAgICAgICAgIGxvd2VyTGFiZWwuaW5jbHVkZXMoJ2FjY291bnQnKSB8fAogICAgICAgICAgICBsb3dlckxhYmVsLmluY2x1ZGVzKCd3YWxsZXQnKSB8fAogICAgICAgICAgICAvWzAtOV17NCx9Ly50ZXN0KHJhd1ZhbHVlKTsKICAgICAgICAgIGlmICghc2hvdWxkQ29weSkgcmV0dXJuOwogICAgICAgICAgdmFsdWVFbC5kYXRhc2V0LmNvcHlSZWFkeSA9ICcxJzsKICAgICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwogICAgICAgICAgYnRuLnR5cGUgPSAnYnV0dG9uJzsKICAgICAgICAgIGJ0bi5jbGFzc05hbWUgPSAnY29weS1idG4nOwogICAgICAgICAgYnRuLmlubmVySFRNTCA9ICc8aSBjbGFzcz0iZmEtcmVndWxhciBmYS1jb3B5Ij48L2k+PHNwYW4+2YbYs9iuPC9zcGFuPic7CiAgICAgICAgICBidG4uZGF0YXNldC5jb3B5VmFsdWUgPSByYXdWYWx1ZTsKICAgICAgICAgIGxldCB0aW1lciA9IG51bGw7CiAgICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKT0+ewogICAgICAgICAgICBjb25zdCB0ZXh0ID0gYnRuLmRhdGFzZXQuY29weVZhbHVlIHx8ICcnOwogICAgICAgICAgICBjb25zdCBvayA9IGF3YWl0IGNvcHlUb0NsaXBib2FyZCh0ZXh0KTsKICAgICAgICAgICAgaWYgKG9rKXsKICAgICAgICAgICAgICBidG4uYmx1cigpOwogICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCdjb3BpZWQnKTsKICAgICAgICAgICAgICBjb25zdCBzcGFuID0gYnRuLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKTsKICAgICAgICAgICAgICBpZiAoc3Bhbil7IHNwYW4udGV4dENvbnRlbnQgPSAn2KrZhSDYp9mE2YbYs9iuJzsgfQogICAgICAgICAgICAgIGlmICh0aW1lcil7IGNsZWFyVGltZW91dCh0aW1lcik7IH0KICAgICAgICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoKCk9PnsKICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdjb3BpZWQnKTsKICAgICAgICAgICAgICAgIGlmIChzcGFuKXsgc3Bhbi50ZXh0Q29udGVudCA9ICfZhtiz2K4nOyB9CiAgICAgICAgICAgICAgfSwgMjAwMCk7CiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgIGFsZXJ0KCfYqti52LDYsSDZhtiz2K4g2KfZhNmC2YrZhdipINiq2YTZgtin2KbZitmL2KcuINin2YbYs9iu2YfYpyDZitiv2YjZitmL2KcuJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgdmFsdWVFbC5hcHBlbmRDaGlsZChidG4pOwogICAgICAgIH0pOwogICAgICB9Y2F0Y2goZXJyKXsKICAgICAgICBjb25zb2xlLmVycm9yKCdjb3B5IGJ1dHRvbiBlcnJvcjonLCBlcnIpOwogICAgICB9CiAgICB9Cg0KICAgIGNvbnN0IGZ4QmFkZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZnhCYWRnZScpOw0KICAgIGNvbnN0IGZ4VGV4dCAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZnhUZXh0Jyk7DQogICAgY29uc3QgcmF0ZUxpbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmF0ZUxpbmUnKTsNCiAgICBjb25zdCBzZW5kSk9EID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlbmRKT0QnKTsgLy8g2YXYqNmE2Log2KfZhNiv2YHYuSDYqNi52YXZhNipINin2YTYt9ix2YrZgtipDQogICAgY29uc3QgcmVjdkNVUiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWN2Q1VSJyk7IC8vINmF2Kcg2LPZitmP2LbYp9mBINio2KfZhNiv2YjZhNin2LENCg0KICAgIC8qID09PT09PT09PT09PT09PT09PT09PT09PT0g2K3Yp9mE2Kkg2YjYqtmG2YLZkdmEID09PT09PT09PT09PT09PT09PT09PT09PT0gKi8NCiAgICBsZXQgY3VycmVudENvdW50cnkgPSBudWxsOyAvLyB7IGlkLCBkYXRhIH0NCiAgICBsZXQgY291bnRyaWVzID0gW107DQogICAgbGV0IG1ldGhvZHMgPSBbXTsNCiAgICBsZXQgY3VycmVudE1ldGhvZCA9IG51bGw7DQogICAgbGV0IGN1cnJlbnRQcm9vZkZpbGUgPSBudWxsOw0KICAgIGxldCB1cGxvYWRlZFByb29mVXJsID0gbnVsbDsNCg0KICAgIC8vINmC2YrZhSBGWCDYp9mE2YLYp9iv2YXYqSDZhdmGINin2YTYrtin2K/ZhQogICAgbGV0IGZ4Q3VycmVuY3kgPSBudWxsOyAgICAgIC8vINi52YXZhNipINin2YTYt9ix2YrZgtipICjZhdir2YTYp9mLIFVTRCkKICAgIGxldCBmeFJhdGVQZXJKT0QgPSBudWxsOyAgICAvLyAxIEpPRCAtPiDZg9mFINmF2YYg2LnZhdmE2Kkg2KfZhNi32LHZitmC2KkgKENVUikKICAgIGxldCBmeFJhdGVQZXJVU0QgPSBudWxsOyAgICAvLyAxIFVTRCAtPiDZg9mFINmF2YYg2LnZhdmE2Kkg2KfZhNi32LHZitmC2KkgKENVUikKICAgIGxldCB1c2RQZXJKT0QgPSBudWxsOyAgICAgICAvLyAxIEpPRCAtPiDZg9mFIFVTRCAo2YTYp9it2KrYs9in2Kgg2KfZhNil2LbYp9mB2Kkg2KjYp9mE2K/ZiNmE2KfYsSkKICAgIC8vINiq2KrYqNmR2Y/YuSDYrdin2YTYqSDYp9mE2KrZgdix2ZHYuSDYudio2LEg2KfZhNi52YbZiNin2YYNCiAgICBsZXQgcGVuZGluZ1JvdXRlID0gbnVsbDsgICAgIC8vINmK2Y/Ys9iq2K7Yr9mFINmE2YjYtti5INin2YTZhdiz2KfYsSDYp9mE2YXYt9mE2YjYqCDYrdiq2Ykg2KrZg9iq2YXZhCDZgtin2KbZhdipINin2YTYr9mI2YQNCg0KICAgIC8vINis2YTYqCDZgtmK2YXYqSAxIEpPRCDYqNin2YTYr9mI2YTYp9ixINmF2YYg2KXYudiv2KfYryDYudin2YUgKGNvbmZpZy9jdXJyZW5jeSkNCiAgICBhc3luYyBmdW5jdGlvbiBmZXRjaFVzZFBlckpPREZyb21Db25maWcoKXsNCiAgICAgIHRyeXsNCiAgICAgICAgY29uc3Qgc25hcCA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oJ2NvbmZpZycpLmRvYygnY3VycmVuY3knKS5nZXQoKTsNCiAgICAgICAgaWYoIXNuYXAgfHwgIXNuYXAuZXhpc3RzKSByZXR1cm4gbnVsbDsNCiAgICAgICAgY29uc3QgZCA9IHNuYXAuZGF0YSgpIHx8IHt9Ow0KICAgICAgICBsZXQgcmF0ZXMgPSB7fTsNCiAgICAgICAgdHJ5IHsgcmF0ZXMgPSBKU09OLnBhcnNlKGQucmF0ZXNKc29uIHx8ICd7fScpIHx8IHt9OyB9IGNhdGNoKF8peyByYXRlcyA9IHt9OyB9DQogICAgICAgIGNvbnN0IGdldFZhbCA9IChvYmopPT57DQogICAgICAgICAgaWYgKG9iaiAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0Jyl7DQogICAgICAgICAgICBpZiAob2JqLnJhdGUhPW51bGwpIHJldHVybiBOdW1iZXIob2JqLnJhdGUpOw0KICAgICAgICAgICAgaWYgKG9iai5SQVRFIT1udWxsKSByZXR1cm4gTnVtYmVyKG9iai5SQVRFKTsNCiAgICAgICAgICAgIGlmIChvYmoudmFsdWUhPW51bGwpIHJldHVybiBOdW1iZXIob2JqLnZhbHVlKTsNCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKHR5cGVvZiBvYmogPT09ICdudW1iZXInKSByZXR1cm4gTnVtYmVyKG9iaik7DQogICAgICAgICAgcmV0dXJuIE5hTjsNCiAgICAgICAgfTsNCiAgICAgICAgLy8g2YbZgdiq2LHYtiDYo9mGIHJhdGVzSnNvbiDYr9in2KbZhdmL2Kcg2YrZhdir2YQ6INmD2YUg2KrYs9in2YjZiiAxIFVTRCDZhdmGINmD2YQg2LnZhdmE2KkNCiAgICAgICAgLy8g2KPZiiDYpdmGINmD2KfZhiBKT0Q6IDEuNDA4NSDihpIg2YHZh9iw2Kcg2YrYudmG2YogMSBVU0QgPSAxLjQwODUgSk9EIOKHkiAxIEpPRCA9IDEvMS40MDg1IFVTRA0KICAgICAgICBjb25zdCBqb2RQZXJVU0QgPSBnZXRWYWwocmF0ZXMuSk9EKTsNCiAgICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoam9kUGVyVVNEKSB8fCBqb2RQZXJVU0Q8PTApIHJldHVybiBudWxsOw0KICAgICAgICByZXR1cm4gMSAvIGpvZFBlclVTRDsNCiAgICAgIH1jYXRjaChfKXsgcmV0dXJuIG51bGw7IH0NCiAgICB9DQoNCiAgICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09INij2K/ZiNin2KogVUkgPT09PT09PT09PT09PT09PT09PT09PT09PSAqLw0KICAgIGZ1bmN0aW9uIGNhcmRTa2VsZXRvbihjb3VudD0xKXsNCiAgICAgIGdyaWQuaW5uZXJIVE1MPScnOw0KICAgICAgZm9yKGxldCBpPTA7aTxjb3VudDtpKyspew0KICAgICAgICBjb25zdCBkaXY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQogICAgICAgIGRpdi5jbGFzc05hbWU9J2NhcmQgbG9hZGluZyc7DQogICAgICAgIGRpdi5pbm5lckhUTUw9JzxpbWcgYWx0PSIiLz48aDI+4oCUPC9oMj4nOw0KICAgICAgICBncmlkLmFwcGVuZENoaWxkKGRpdik7DQogICAgICB9DQogICAgfQ0KICAgIGZ1bmN0aW9uIGNsZWFyR3JpZCgpeyBncmlkLmlubmVySFRNTD0nJzsgfQ0KICAgIGZ1bmN0aW9uIHNob3dOb1Jlc3VsdHMoc2hvdyl7IG5vUmVzdWx0cy5zdHlsZS5kaXNwbGF5ID0gc2hvdyA/ICdibG9jaycgOiAnbm9uZSc7IH0NCiAgICBmdW5jdGlvbiBvcGVuTW9kYWwoKXsgbWV0aG9kTW9kYWwuY2xhc3NMaXN0LmFkZCgnb3BlbicpOyB9DQogICAgZnVuY3Rpb24gY2xvc2VNb2RhbEZuKCl7DQogICAgICBtZXRob2RNb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuJyk7DQogICAgICBjdXJyZW50TWV0aG9kID0gbnVsbDsKICAgICAgc2VuZEpPRC52YWx1ZSA9ICcnOwogICAgICByZWN2Q1VSLnZhbHVlID0gJyc7CiAgICAgIGZ4Q3VycmVuY3kgPSBudWxsOwogICAgICBmeFJhdGVQZXJKT0QgPSBudWxsOwogICAgICBmeFJhdGVQZXJVU0QgPSBudWxsOwogICAgICB1c2RQZXJKT0QgPSBudWxsOwogICAgICBmeEJhZGdlLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpOwogICAgICBmeFRleHQudGV4dENvbnRlbnQgPSAnJzsKICAgICAgcmF0ZUxpbmUudGV4dENvbnRlbnQgPSAn4oCUJzsKICAgICAgY3VycmVudFByb29mRmlsZSA9IG51bGw7DQogICAgICB1cGxvYWRlZFByb29mVXJsID0gbnVsbDsNCiAgICAgIGlmIChwcm9vZkZpbGVFbCkgcHJvb2ZGaWxlRWwudmFsdWUgPSAnJzsNCiAgICAgIHByb29mUHJldmlldy50ZXh0Q29udGVudCA9ICcnOw0KICAgICAgdXBkYXRlU3VibWl0U3RhdGUoKTsNCiAgICAgIHRyeSB7IGlmICh3aW5kb3cudHVybnN0aWxlKSB0dXJuc3RpbGUucmVzZXQoKTsgfSBjYXRjaChfKXt9DQogICAgICB0cnkgeyB1cGRhdGVQcm9vZlVJKCk7IH0gY2F0Y2goXyl7IH0NCiAgICB9DQoNCiAgICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09INix2LPZhSDYp9mE2YLZiNin2KbZhSA9PT09PT09PT09PT09PT09PT09PT09PT09ICovDQogICAgZnVuY3Rpb24gcmVuZGVyQ291bnRyaWVzKGxpc3Qpew0KICAgICAgY2xlYXJHcmlkKCk7DQogICAgICBsaXN0LmZvckVhY2goYz0+ew0KICAgICAgICBjb25zdCBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsNCiAgICAgICAgYS5ocmVmPSdqYXZhc2NyaXB0OnZvaWQoMCknOw0KICAgICAgICBhLmNsYXNzTmFtZT0nY2FyZCc7DQogICAgICAgIGEuZGF0YXNldC50aXRsZT1jLmRhdGEubmFtZXx8Jyc7DQogICAgICAgIGEuaW5uZXJIVE1MPWANCiAgICAgICAgICA8aW1nIHNyYz0iJHtjLmRhdGEuaW1hZ2VVcmx8fCcnfSIgYWx0PSIke2MuZGF0YS5uYW1lfHwnJ30iPg0KICAgICAgICAgIDxoMj4ke2MuZGF0YS5uYW1lfHwnJ308L2gyPmA7DQogICAgICAgIGEuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCgpPT5uYXZpZ2F0ZVRvQ291bnRyeShjKSk7DQogICAgICAgIGdyaWQuYXBwZW5kQ2hpbGQoYSk7DQogICAgICB9KTsNCiAgICAgIHNob3dOb1Jlc3VsdHMobGlzdC5sZW5ndGg9PT0wKTsNCiAgICB9DQoNCiAgICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09INio2K3YqyA9PT09PT09PT09PT09PT09PT09PT09PT09ICovDQogICAgZnVuY3Rpb24gYXBwbHlTZWFyY2goKXsNCiAgICAgIGNvbnN0IHE9KHNlYXJjaElucHV0LnZhbHVlfHwnJykudHJpbSgpLnRvTG93ZXJDYXNlKCk7DQogICAgICBjb25zdCBsaXN0PWN1cnJlbnRDb3VudHJ5P21ldGhvZHM6Y291bnRyaWVzOw0KICAgICAgY29uc3QgZmlsdGVyZWQ9bGlzdC5maWx0ZXIoeD0+KHguZGF0YS5uYW1lfHwnJykudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxKSk7DQogICAgICBjdXJyZW50Q291bnRyeT9yZW5kZXJNZXRob2RzKGZpbHRlcmVkKTpyZW5kZXJDb3VudHJpZXMoZmlsdGVyZWQpOw0KICAgIH0NCiAgICBzZWFyY2hJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGFwcGx5U2VhcmNoKTsNCg0KICAgIC8qID09PT09PT09PT09PT09PT09PT09PT09PT0g2KzZhNioINin2YTYr9mI2YQgJiDYp9mE2LfYsdmCID09PT09PT09PT09PT09PT09PT09PT09PT0gKi8NCiAgICBmdW5jdGlvbiB3YXRjaENvdW50cmllcygpew0KICAgICAgY2FyZFNrZWxldG9uKCk7DQogICAgICByZXR1cm4gZGIuY29sbGVjdGlvbignZGVwb3NpdENvdW50cmllcycpDQogICAgICAgIC53aGVyZSgnYWN0aXZlJywnPT0nLCB0cnVlKQ0KICAgICAgICAub3JkZXJCeSgnb3JkZXInLCdhc2MnKQ0KICAgICAgICAub25TbmFwc2hvdChzbmFwPT57DQogICAgICAgICAgY291bnRyaWVzPXNuYXAuZG9jcy5tYXAoZD0+KHtpZDpkLmlkLGRhdGE6ZC5kYXRhKCl9KSk7DQogICAgICAgICAgaWYoIWN1cnJlbnRDb3VudHJ5KXsgcmVuZGVyQ291bnRyaWVzKGNvdW50cmllcyk7IGFwcGx5U2VhcmNoKCk7IH0NCiAgICAgICAgICAvLyDYpdmGINmI2Y/YrNivINmF2LPYp9ixINmF2LfZhNmI2Kgg2YLYqNmEINin2YPYqtmF2KfZhCDYp9mE2KrYrdmF2YrZhNiMINi32KjZkdmC2Ycg2KfZhNii2YYNCiAgICAgICAgICBpZiAocGVuZGluZ1JvdXRlKXsgdHJ5IHsgYXBwbHlSb3V0ZSh0cnVlKTsgfSBjYXRjaChfKXt9IHBlbmRpbmdSb3V0ZT1udWxsOyB9DQogICAgICAgIH0sIGVycj0+eyBjb25zb2xlLmVycm9yKCdjb3VudHJpZXMgb25TbmFwc2hvdCBlcnJvcjonLCBlcnIpOyB9KTsNCiAgICB9DQoNCiAgICAvLyDYo9iv2YjYp9iqINin2YTYqtmI2KzZitmHINin2YTYqNiz2YrYt9ipIChoYXNoKQ0KICAgIGZ1bmN0aW9uIGJ1aWxkQ291bnRyeUhhc2goaWQpeyByZXR1cm4gJyMvJyArIGVuY29kZVVSSUNvbXBvbmVudChpZHx8JycpOyB9DQogICAgZnVuY3Rpb24gcGFyc2VIYXNoKCl7DQogICAgICB0cnl7DQogICAgICAgIGNvbnN0IGggPSBsb2NhdGlvbi5oYXNoIHx8ICcnOw0KICAgICAgICBjb25zdCBtID0gaC5tYXRjaCgvXiNcLyhbXlwvPyNdKykvKTsNCiAgICAgICAgaWYgKG0gJiYgbVsxXSkgcmV0dXJuIHsgdHlwZTonY291bnRyeScsIGlkOiBkZWNvZGVVUklDb21wb25lbnQobVsxXSkgfTsNCiAgICAgICAgcmV0dXJuIHsgdHlwZToncm9vdCcgfTsNCiAgICAgIH1jYXRjaChfKXsgcmV0dXJuIHsgdHlwZToncm9vdCcgfTsgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBzZXRIYXNoRm9yQ291bnRyeShpZCwgcmVwbGFjZSl7DQogICAgICBjb25zdCB1cmwgPSBidWlsZENvdW50cnlIYXNoKGlkKTsNCiAgICAvLyA9PT09PT0g2KrYo9mD2YrYryDYp9mE2KXZitiv2KfYuTog2KrYrdmF2YrZhCBDU1Mg2YXZhiDYp9mE2KjYp9mDLdil2YbYryArINi52LHYtiDZhtin2YHYsNipID09PT09PQogICAgbGV0IF9fQ09ORklSTV9DU1NfQURERUQgPSBmYWxzZTsKICAgIGFzeW5jIGZ1bmN0aW9uIGVuc3VyZUNvbmZpcm1Dc3MoaWRUb2tlbil7CiAgICAgIGlmIChfX0NPTkZJUk1fQ1NTX0FEREVEKSByZXR1cm4gdHJ1ZTsKICAgICAgdHJ5ewogICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke1dPUktFUn0vdWkvY29uZmlybS5jc3NgLCB7IGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogJ0JlYXJlciAnK2lkVG9rZW4gfX0pOwogICAgICAgIGlmKCFyZXMub2speyBfX0NPTkZJUk1fQ1NTX0FEREVEPWZhbHNlOyByZXR1cm4gZmFsc2U7IH0KICAgICAgICBjb25zdCBjc3MgPSBhd2FpdCByZXMudGV4dCgpOwogICAgICAgIGNvbnN0IHN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTsgc3QuaWQ9J3pjb25maXJtLXN0eWxlJzsgc3QudGV4dENvbnRlbnQgPSBjc3M7CiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdCk7IF9fQ09ORklSTV9DU1NfQURERUQgPSB0cnVlOyByZXR1cm4gdHJ1ZTsKICAgICAgfWNhdGNoKGUpeyBfX0NPTkZJUk1fQ1NTX0FEREVEPWZhbHNlOyByZXR1cm4gZmFsc2U7IH0KICAgIH0KCiAgICBmdW5jdGlvbiB6RXNjSHRtbChzKXsKICAgICAgdHJ5eyByZXR1cm4gU3RyaW5nKHMpLnJlcGxhY2UoLyYvZywnJmFtcDsnKS5yZXBsYWNlKC88L2csJyZsdDsnKS5yZXBsYWNlKC8+L2csJyZndDsnKS5yZXBsYWNlKC8iL2csJyZxdW90OycpOyB9Y2F0Y2goXyl7IHJldHVybiBTdHJpbmcoc3x8JycpOyB9CiAgICB9CgogICAgZnVuY3Rpb24gc2hvd0RlcG9zaXRDb25maXJtKHsgY29kZSwgcGFpZCwgYWRkZWRVU0QsIGZ4LCBleHRyYSB9KXsKICAgICAgdHJ5eyBjb25zdCBvbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnemNvbmZpcm0nKTsgaWYgKG9sZCkgb2xkLnJlbW92ZSgpOyB9Y2F0Y2goXyl7IH0KICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOyBvdmVybGF5LmNsYXNzTmFtZT0nemNvbmZpcm0tb3ZlcmxheSc7IG92ZXJsYXkuaWQ9J3pjb25maXJtJzsKICAgICAgY29uc3QgY29weWFibGUgPSAoY29kZSAhPT0gdW5kZWZpbmVkICYmIGNvZGUgIT09IG51bGwgJiYgU3RyaW5nKGNvZGUpLnRyaW0oKSAhPT0gJycpOwogICAgICBvdmVybGF5LmlubmVySFRNTCA9IGAKICAgICAgICA8ZGl2IGNsYXNzPSJ6Y29uZmlybS1tb2RhbCIgcm9sZT0iZGlhbG9nIiBhcmlhLWxhYmVsPSLYqtij2YPZitivINin2YTYt9mE2KgiPgogICAgICAgICAgPGRpdiBjbGFzcz0iemNvbmZpcm0taGVhZGVyIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InpiYWRnZSI+4pyTPC9zcGFuPgogICAgICAgICAgICA8aDMgY2xhc3M9Inpjb25maXJtLXRpdGxlIj7YqtmFINiq2YLYr9mK2YUg2LfZhNioINin2YTYpdmK2K/Yp9i5INio2YbYrNin2K08L2gzPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJ6Y29uZmlybS1ib2R5Ij4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ienJvdyI+PGRpdiBjbGFzcz0iemxhYmVsIj7Yp9mE2YPZiNivPC9kaXY+PGRpdiBjbGFzcz0ienZhbHVlIHptb25vIj4ke3pFc2NIdG1sKGNvZGV8fCfigJQnKX08L2Rpdj48L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ienJvdyI+PGRpdiBjbGFzcz0iemxhYmVsIj7Ys9mK2K/Zgdi5PC9kaXY+PGRpdiBjbGFzcz0ienZhbHVlIj4ke3pFc2NIdG1sKHBhaWR8fCfigJQnKX08L2Rpdj48L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ienJvdyI+PGRpdiBjbGFzcz0iemxhYmVsIj7Ys9mK2Y/Yttin2YEgKFVTRCk8L2Rpdj48ZGl2IGNsYXNzPSJ6dmFsdWUiPiR7ekVzY0h0bWwoYWRkZWRVU0R8fCfigJQnKX08L2Rpdj48L2Rpdj4KICAgICAgICAgICAgJHtmeD8gYDxkaXYgY2xhc3M9InpmeCI+2KfZhNiz2LnYsSDZhdmGINin2YTYrtin2K/ZhTogJHt6RXNjSHRtbChmeCl9PC9kaXY+YDonJ30KICAgICAgICAgICAgJHtleHRyYT8gYDxkaXYgY2xhc3M9InpmeCI+JHt6RXNjSHRtbChleHRyYSl9PC9kaXY+YDonJ30KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0iemNvbmZpcm0tZm9vdGVyIj4KICAgICAgICAgICAgJHtjb3B5YWJsZT8gYDxidXR0b24gY2xhc3M9InpidG4gemJ0bi1zZWNvbmRhcnkiIGlkPSJ6Y29uZmlybS1jb3B5IiB0eXBlPSJidXR0b24iPtmG2LPYriDYp9mE2YPZiNivPC9idXR0b24+YDonJ30KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iemJ0biB6YnRuLXByaW1hcnkiIGlkPSJ6Y29uZmlybS1vayIgdHlwZT0iYnV0dG9uIj7Yrdiz2YbZi9inPC9idXR0b24+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj5gOwogICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG92ZXJsYXkpOwogICAgICBmdW5jdGlvbiBjbG9zZSgpeyB0cnl7IG92ZXJsYXkucmVtb3ZlKCk7IH1jYXRjaChfKXsgfSB9CiAgICAgIG92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSk9PnsgaWYoZS50YXJnZXQ9PT1vdmVybGF5KSBjbG9zZSgpOyB9KTsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3pjb25maXJtLW9rJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZSk7CiAgICAgIGNvbnN0IGNvcHlCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnemNvbmZpcm0tY29weScpOwogICAgICBpZiAoY29weUJ0biAmJiBjb3B5YWJsZSl7CiAgICAgICAgY29uc3Qgb3JpZ2luYWxUZXh0ID0gY29weUJ0bi50ZXh0Q29udGVudDsKICAgICAgICBsZXQgcmVzZXRUaW1lciA9IG51bGw7CiAgICAgICAgZnVuY3Rpb24gbWFya0NvcGllZCgpewogICAgICAgICAgY29weUJ0bi5jbGFzc0xpc3QuYWRkKCdjb3BpZWQnKTsKICAgICAgICAgIGNvcHlCdG4udGV4dENvbnRlbnQgPSAn2KrZhSDYp9mE2YbYs9iuJzsKICAgICAgICAgIGlmIChyZXNldFRpbWVyKXsgY2xlYXJUaW1lb3V0KHJlc2V0VGltZXIpOyB9CiAgICAgICAgICByZXNldFRpbWVyID0gc2V0VGltZW91dCgoKT0+ewogICAgICAgICAgICBjb3B5QnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2NvcGllZCcpOwogICAgICAgICAgICBjb3B5QnRuLnRleHRDb250ZW50ID0gb3JpZ2luYWxUZXh0OwogICAgICAgICAgfSwgMjAwMCk7CiAgICAgICAgfQogICAgICAgIGNvcHlCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKT0+ewogICAgICAgICAgY29uc3Qgc3VjY2VzcyA9IGF3YWl0IGNvcHlUb0NsaXBib2FyZChjb2RlKTsKICAgICAgICAgIGlmKHN1Y2Nlc3MpewogICAgICAgICAgICBjb3B5QnRuLmJsdXIoKTsKICAgICAgICAgICAgbWFya0NvcGllZCgpOwogICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIGFsZXJ0KCfYqti52LDYsSDZhtiz2K4g2KfZhNmD2YjYryDYqtmE2YLYp9im2YrZi9inLiDYp9mG2LPYrtmHINmK2K/ZiNmK2YvYpy4nKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfQogICAgICB0cnl7IHJlcGxhY2UgPyBoaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCcnLHVybCkgOiBoaXN0b3J5LnB1c2hTdGF0ZShudWxsLCcnLHVybCk7IH0KICAgICAgY2F0Y2goXyl7IHRyeXsgbG9jYXRpb24uaGFzaCA9IHVybDsgfWNhdGNoKF9fKXt9IH0KICAgIH0KCiAgICAvLyA9PT09PT0g2KrYo9mD2YrYryDYp9mE2KXZitiv2KfYuTog2KrYrdmF2YrZhCBDU1Mg2YXZhiDYp9mE2KjYp9mDLdil2YbYryArINi52LHYtiDZhtin2YHYsNipICjZhti32KfZgiDYudin2YUpID09PT09PQogICAgbGV0IF9fQ09ORklSTV9DU1NfQURERUQgPSBmYWxzZTsKICAgIGFzeW5jIGZ1bmN0aW9uIGVuc3VyZUNvbmZpcm1Dc3MoaWRUb2tlbil7CiAgICAgIGlmIChfX0NPTkZJUk1fQ1NTX0FEREVEKSByZXR1cm4gdHJ1ZTsKICAgICAgdHJ5ewogICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke1dPUktFUn0vdWkvY29uZmlybS5jc3NgLCB7IGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogJ0JlYXJlciAnK2lkVG9rZW4gfX0pOwogICAgICAgIGlmKCFyZXMub2speyBfX0NPTkZJUk1fQ1NTX0FEREVEPWZhbHNlOyByZXR1cm4gZmFsc2U7IH0KICAgICAgICBjb25zdCBjc3MgPSBhd2FpdCByZXMudGV4dCgpOwogICAgICAgIGNvbnN0IHN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTsgc3QuaWQ9J3pjb25maXJtLXN0eWxlJzsgc3QudGV4dENvbnRlbnQgPSBjc3M7CiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdCk7IF9fQ09ORklSTV9DU1NfQURERUQgPSB0cnVlOyByZXR1cm4gdHJ1ZTsKICAgICAgfWNhdGNoKGUpeyBfX0NPTkZJUk1fQ1NTX0FEREVEPWZhbHNlOyByZXR1cm4gZmFsc2U7IH0KICAgIH0KCiAgICBmdW5jdGlvbiB6RXNjSHRtbChzKXsKICAgICAgdHJ5eyByZXR1cm4gU3RyaW5nKHMpLnJlcGxhY2UoLyYvZywnJmFtcDsnKS5yZXBsYWNlKC88L2csJyZsdDsnKS5yZXBsYWNlKC8+L2csJyZndDsnKS5yZXBsYWNlKC8iL2csJyZxdW90OycpOyB9Y2F0Y2goXyl7IHJldHVybiBTdHJpbmcoc3x8JycpOyB9CiAgICB9CgogICAgZnVuY3Rpb24gc2hvd0RlcG9zaXRDb25maXJtKHsgY29kZSwgcGFpZCwgYWRkZWRVU0QsIGZ4LCBleHRyYSB9KXsKICAgICAgdHJ5eyBjb25zdCBvbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnemNvbmZpcm0nKTsgaWYgKG9sZCkgb2xkLnJlbW92ZSgpOyB9Y2F0Y2goXyl7IH0KICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOyBvdmVybGF5LmNsYXNzTmFtZT0nemNvbmZpcm0tb3ZlcmxheSc7IG92ZXJsYXkuaWQ9J3pjb25maXJtJzsKICAgICAgY29uc3QgY29weWFibGUgPSAoY29kZSAhPT0gdW5kZWZpbmVkICYmIGNvZGUgIT09IG51bGwgJiYgU3RyaW5nKGNvZGUpLnRyaW0oKSAhPT0gJycpOwogICAgICBvdmVybGF5LmlubmVySFRNTCA9IGAKICAgICAgICA8ZGl2IGNsYXNzPSJ6Y29uZmlybS1tb2RhbCIgcm9sZT0iZGlhbG9nIiBhcmlhLWxhYmVsPSLYqtij2YPZitivINin2YTYt9mE2KgiPgogICAgICAgICAgPGRpdiBjbGFzcz0iemNvbmZpcm0taGVhZGVyIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InpiYWRnZSI+4pyTPC9zcGFuPgogICAgICAgICAgICA8aDMgY2xhc3M9Inpjb25maXJtLXRpdGxlIj7YqtmFINiq2YLYr9mK2YUg2LfZhNioINin2YTYpdmK2K/Yp9i5INio2YbYrNin2K08L2gzPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJ6Y29uZmlybS1ib2R5Ij4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ienJvdyI+PGRpdiBjbGFzcz0iemxhYmVsIj7Yp9mE2YPZiNivPC9kaXY+PGRpdiBjbGFzcz0ienZhbHVlIHptb25vIj4ke3pFc2NIdG1sKGNvZGV8fCfigJQnKX08L2Rpdj48L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ienJvdyI+PGRpdiBjbGFzcz0iemxhYmVsIj7Ys9mK2K/Zgdi5PC9kaXY+PGRpdiBjbGFzcz0ienZhbHVlIj4ke3pFc2NIdG1sKHBhaWR8fCfigJQnKX08L2Rpdj48L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ienJvdyI+PGRpdiBjbGFzcz0iemxhYmVsIj7Ys9mK2Y/Yttin2YEgKFVTRCk8L2Rpdj48ZGl2IGNsYXNzPSJ6dmFsdWUiPiR7ekVzY0h0bWwoYWRkZWRVU0R8fCfigJQnKX08L2Rpdj48L2Rpdj4KICAgICAgICAgICAgJHtmeD8gYDxkaXYgY2xhc3M9InpmeCI+2KfZhNiz2LnYsSDZhdmGINin2YTYrtin2K/ZhTogJHt6RXNjSHRtbChmeCl9PC9kaXY+YDonJ30KICAgICAgICAgICAgJHtleHRyYT8gYDxkaXYgY2xhc3M9InpmeCI+JHt6RXNjSHRtbChleHRyYSl9PC9kaXY+YDonJ30KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0iemNvbmZpcm0tZm9vdGVyIj4KICAgICAgICAgICAgJHtjb3B5YWJsZT8gYDxidXR0b24gY2xhc3M9InpidG4gemJ0bi1zZWNvbmRhcnkiIGlkPSJ6Y29uZmlybS1jb3B5IiB0eXBlPSJidXR0b24iPtmG2LPYriDYp9mE2YPZiNivPC9idXR0b24+YDonJ30KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iemJ0biB6YnRuLXByaW1hcnkiIGlkPSJ6Y29uZmlybS1vayIgdHlwZT0iYnV0dG9uIj7Yrdiz2YbZi9inPC9idXR0b24+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj5gOwogICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG92ZXJsYXkpOwogICAgICBmdW5jdGlvbiBjbG9zZSgpeyB0cnl7IG92ZXJsYXkucmVtb3ZlKCk7IH1jYXRjaChfKXsgfSB9CiAgICAgIG92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSk9PnsgaWYoZS50YXJnZXQ9PT1vdmVybGF5KSBjbG9zZSgpOyB9KTsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3pjb25maXJtLW9rJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZSk7CiAgICAgIGNvbnN0IGNvcHlCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnemNvbmZpcm0tY29weScpOwogICAgICBpZiAoY29weUJ0biAmJiBjb3B5YWJsZSl7CiAgICAgICAgY29uc3Qgb3JpZ2luYWxUZXh0ID0gY29weUJ0bi50ZXh0Q29udGVudDsKICAgICAgICBsZXQgcmVzZXRUaW1lciA9IG51bGw7CiAgICAgICAgZnVuY3Rpb24gbWFya0NvcGllZCgpewogICAgICAgICAgY29weUJ0bi5jbGFzc0xpc3QuYWRkKCdjb3BpZWQnKTsKICAgICAgICAgIGNvcHlCdG4udGV4dENvbnRlbnQgPSAn2KrZhSDYp9mE2YbYs9iuJzsKICAgICAgICAgIGlmIChyZXNldFRpbWVyKXsgY2xlYXJUaW1lb3V0KHJlc2V0VGltZXIpOyB9CiAgICAgICAgICByZXNldFRpbWVyID0gc2V0VGltZW91dCgoKT0+ewogICAgICAgICAgICBjb3B5QnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2NvcGllZCcpOwogICAgICAgICAgICBjb3B5QnRuLnRleHRDb250ZW50ID0gb3JpZ2luYWxUZXh0OwogICAgICAgICAgfSwgMjAwMCk7CiAgICAgICAgfQogICAgICAgIGNvcHlCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKT0+ewogICAgICAgICAgY29uc3Qgc3VjY2VzcyA9IGF3YWl0IGNvcHlUb0NsaXBib2FyZChjb2RlKTsKICAgICAgICAgIGlmKHN1Y2Nlc3MpewogICAgICAgICAgICBjb3B5QnRuLmJsdXIoKTsKICAgICAgICAgICAgbWFya0NvcGllZCgpOwogICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIGFsZXJ0KCfYqti52LDYsSDZhtiz2K4g2KfZhNmD2YjYryDYqtmE2YLYp9im2YrZi9inLiDYp9mG2LPYrtmHINmK2K/ZiNmK2YvYpy4nKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfQoNCiAgICBhc3luYyBmdW5jdGlvbiBlbnRlckNvdW50cnkoYywgZnJvbUhpc3Rvcnkpew0KICAgICAgY3VycmVudENvdW50cnk9YzsNCiAgICAgIHdoZXJlVGV4dC50ZXh0Q29udGVudD1g2LfYsdmCINin2YTYr9mB2Lkg4oCUICR7Yy5kYXRhLm5hbWV9YDsNCiAgICAgIGJhY2tCdG4uc3R5bGUuZGlzcGxheT0naW5saW5lLWJsb2NrJzsNCiAgICAgIGlmICghZnJvbUhpc3RvcnkpeyBzZXRIYXNoRm9yQ291bnRyeShjLmlkLCBmYWxzZSk7IH0NCiAgICAgIGNhcmRTa2VsZXRvbigpOw0KDQogICAgICBjb25zdCBzbmFwPWF3YWl0IGRiLmNvbGxlY3Rpb24oJ2RlcG9zaXRDb3VudHJpZXMnKS5kb2MoYy5pZCkNCiAgICAgICAgICAgICAgICAgICAgLmNvbGxlY3Rpb24oJ21ldGhvZHMnKQ0KICAgICAgICAgICAgICAgICAgICAud2hlcmUoJ2FjdGl2ZScsJz09JywgdHJ1ZSkNCiAgICAgICAgICAgICAgICAgICAgLm9yZGVyQnkoJ25hbWUnLCdhc2MnKQ0KICAgICAgICAgICAgICAgICAgICAuZ2V0KCk7DQoNCiAgICAgIG1ldGhvZHM9c25hcC5kb2NzLm1hcChkPT4oe2lkOmQuaWQsZGF0YTpkLmRhdGEoKX0pKTsNCiAgICAgIHJlbmRlck1ldGhvZHMobWV0aG9kcyk7DQogICAgfQ0KDQogICAgLy8g2KXYuNmH2KfYsSDYp9mE2KzYsNixICjZgtin2KbZhdipINin2YTYr9mI2YQpDQogICAgZnVuY3Rpb24gc2hvd1Jvb3QoKXsNCiAgICAgIGN1cnJlbnRDb3VudHJ5PW51bGw7DQogICAgICB3aGVyZVRleHQudGV4dENvbnRlbnQ9J9in2YTYr9mI2YQg2KfZhNmF2KrYp9it2Kkg2YTZhNil2YrYr9in2LknOw0KICAgICAgYmFja0J0bi5zdHlsZS5kaXNwbGF5PSdub25lJzsNCiAgICAgIHJlbmRlckNvdW50cmllcyhjb3VudHJpZXMpOw0KICAgIH0NCiAgICAvLyDYstixINin2YTYsdis2YjYuSAo2KXZhiDZgdmP2LnZkdmQ2YQpINmK2YbYs9mR2YIg2YXYuSDYs9is2YTZkSDYp9mE2YXYqti12YHYrQ0KICAgIGZ1bmN0aW9uIGdvQmFjaygpeyB0cnl7IGhpc3RvcnkuYmFjaygpOyB9Y2F0Y2goXyl7IHNob3dSb290KCk7IH0gfQ0KICAgIGJhY2tCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBnb0JhY2spOw0KDQogICAgLy8g2KfZhNin2YbYqtmC2KfZhCDYudmG2K8g2KfZhNi22LrYtyDYudmE2Ykg2KjYt9in2YLYqSDYp9mE2K/ZiNmE2KkNCiAgICBmdW5jdGlvbiBuYXZpZ2F0ZVRvQ291bnRyeShjKXsgZW50ZXJDb3VudHJ5KGMsIGZhbHNlKTsgfQ0KDQogICAgLy8g2KrYt9io2YrZgiDYp9mE2YXYs9in2LEg2KfZhNit2KfZhNmKINi52YbYryDYp9mE2LHYrNmI2Lkv2KfZhNiq2YLYr9mR2YUg2KPZiCDYudmG2K8g2KfZhNiq2K3ZhdmK2YQNCiAgICBmdW5jdGlvbiBhcHBseVJvdXRlKGZyb21Qb3Apew0KICAgICAgY29uc3QgciA9IHBhcnNlSGFzaCgpOw0KICAgICAgaWYgKHIudHlwZSA9PT0gJ2NvdW50cnknKXsNCiAgICAgICAgY29uc3QgYyA9IChjb3VudHJpZXN8fFtdKS5maW5kKHggPT4gKHguaWR8fCcnKS50b0xvd2VyQ2FzZSgpID09PSAoci5pZHx8JycpLnRvTG93ZXJDYXNlKCkpOw0KICAgICAgICBpZiAoYyl7IGVudGVyQ291bnRyeShjLCB0cnVlKTsgfQ0KICAgICAgICBlbHNlIHsgcGVuZGluZ1JvdXRlID0gcjsgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgc2hvd1Jvb3QoKTsNCiAgICAgIH0NCiAgICB9DQogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgZnVuY3Rpb24oKXsgdHJ5eyBhcHBseVJvdXRlKHRydWUpOyB9Y2F0Y2goXyl7IH0gfSk7DQogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCBmdW5jdGlvbigpeyB0cnl7IGFwcGx5Um91dGUodHJ1ZSk7IH1jYXRjaChfKXsgfSB9KTsNCg0KICAgIC8qID09PT09PT09PT09PT09PT09PT09PT09PT0g2YHYqtitINin2YTZhdmI2K/Yp9mEICsgRlggKNmF2YYg2KfZhNiu2KfYr9mFKSA9PT09PT09PT09PT09PT09PT09PT09PT09ICovDQogICAgYXN5bmMgZnVuY3Rpb24gZmV0Y2hGeChjb3VudHJ5SWQsIG1ldGhvZElkKXsNCiAgICAgIGNvbnN0IHVybCA9IGAke1dPUktFUn0vZGVwb3NpdC9meD9jb3VudHJ5SWQ9JHtlbmNvZGVVUklDb21wb25lbnQoY291bnRyeUlkKX0mbWV0aG9kSWQ9JHtlbmNvZGVVUklDb21wb25lbnQobWV0aG9kSWQpfWA7DQogICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwsIHsgbWV0aG9kOidHRVQnIH0pOw0KICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7DQogICAgICBpZiAoIXJlcy5vayB8fCBkYXRhLnN1Y2Nlc3MgIT09IHRydWUpIHRocm93IG5ldyBFcnJvcihkYXRhLmVycm9yIHx8ICfYqti52LDYsSDYrNmE2Kgg2LPYudixINin2YTYtdix2YEnKTsNCiAgICAgIHJldHVybiB7CiAgICAgICAgY3VycmVuY3lDb2RlOiBkYXRhLmN1cnJlbmN5Q29kZSwKICAgICAgICByYXRlUGVySk9EOiBOdW1iZXIoZGF0YS5yYXRlUGVySk9EKSwKICAgICAgICByYXRlUGVyVVNEOiBOdW1iZXIoZGF0YS5yYXRlUGVyVVNEKSwKICAgICAgICB1c2RQZXJKT0Q6IE51bWJlcihkYXRhLnVzZFBlckpPRCkKICAgICAgfTsKICAgIH0KCiAgICBmdW5jdGlvbiBmb3JtYXQ0KG4pewogICAgICBjb25zdCBzPShNYXRoLnJvdW5kKG4qMTAwMDApLzEwMDAwKS50b0ZpeGVkKDQpOwogICAgICByZXR1cm4gcy5yZXBsYWNlKC9cLj8wKyQvLCcnKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0b1Bvc2l0aXZlT3JOdWxsKHZhbHVlKXsKICAgICAgY29uc3QgbiA9IE51bWJlcih2YWx1ZSk7CiAgICAgIHJldHVybiBOdW1iZXIuaXNGaW5pdGUobikgJiYgbiA+IDAgPyBuIDogbnVsbDsKICAgIH0KCiAgICBmdW5jdGlvbiBpc1Bvc2l0aXZlTnVtYmVyKHZhbHVlKXsKICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgTnVtYmVyLmlzRmluaXRlKHZhbHVlKSAmJiB2YWx1ZSA+IDA7CiAgICB9CgogICAgZnVuY3Rpb24gcmVjb25jaWxlRnhOdW1iZXJzKCl7CiAgICAgIGNvbnN0IGN1ckNvZGUgPSAoZnhDdXJyZW5jeSB8fCAnJykudG9VcHBlckNhc2UoKTsKICAgICAgaWYgKGN1ckNvZGUgPT09ICdVU0QnICYmICFpc1Bvc2l0aXZlTnVtYmVyKGZ4UmF0ZVBlclVTRCkpIHsKICAgICAgICBmeFJhdGVQZXJVU0QgPSAxOwogICAgICB9CiAgICAgIGlmIChjdXJDb2RlID09PSAnSk9EJyAmJiAhaXNQb3NpdGl2ZU51bWJlcihmeFJhdGVQZXJKT0QpKSB7CiAgICAgICAgZnhSYXRlUGVySk9EID0gMTsKICAgICAgfQogICAgICBpZiAoIWlzUG9zaXRpdmVOdW1iZXIodXNkUGVySk9EKSAmJiBpc1Bvc2l0aXZlTnVtYmVyKGZ4UmF0ZVBlckpPRCkgJiYgaXNQb3NpdGl2ZU51bWJlcihmeFJhdGVQZXJVU0QpKSB7CiAgICAgICAgdXNkUGVySk9EID0gZnhSYXRlUGVySk9EIC8gZnhSYXRlUGVyVVNEOwogICAgICB9CiAgICAgIGlmICghaXNQb3NpdGl2ZU51bWJlcihmeFJhdGVQZXJVU0QpICYmIGlzUG9zaXRpdmVOdW1iZXIoZnhSYXRlUGVySk9EKSAmJiBpc1Bvc2l0aXZlTnVtYmVyKHVzZFBlckpPRCkpIHsKICAgICAgICBmeFJhdGVQZXJVU0QgPSBmeFJhdGVQZXJKT0QgLyB1c2RQZXJKT0Q7CiAgICAgIH0KICAgICAgaWYgKCFpc1Bvc2l0aXZlTnVtYmVyKGZ4UmF0ZVBlckpPRCkgJiYgaXNQb3NpdGl2ZU51bWJlcihmeFJhdGVQZXJVU0QpICYmIGlzUG9zaXRpdmVOdW1iZXIodXNkUGVySk9EKSkgewogICAgICAgIGZ4UmF0ZVBlckpPRCA9IGZ4UmF0ZVBlclVTRCAqIHVzZFBlckpPRDsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGNvbXB1dGVVc2RGcm9tQ3VyKGFtb3VudCl7CiAgICAgIGNvbnN0IHYgPSBOdW1iZXIoYW1vdW50KTsKICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUodikgfHwgdiA8PSAwKSByZXR1cm4gbnVsbDsKICAgICAgY29uc3QgY3VyQ29kZSA9IChmeEN1cnJlbmN5IHx8ICcnKS50b1VwcGVyQ2FzZSgpOwogICAgICBpZiAoIWN1ckNvZGUpIHJldHVybiBudWxsOwogICAgICBpZiAoY3VyQ29kZSA9PT0gJ1VTRCcpIHJldHVybiB2OwogICAgICBpZiAoY3VyQ29kZSA9PT0gJ0pPRCcgJiYgaXNQb3NpdGl2ZU51bWJlcih1c2RQZXJKT0QpKSByZXR1cm4gdiAqIHVzZFBlckpPRDsKICAgICAgaWYgKGlzUG9zaXRpdmVOdW1iZXIoZnhSYXRlUGVyVVNEKSkgcmV0dXJuIHYgLyBmeFJhdGVQZXJVU0Q7CiAgICAgIGlmIChpc1Bvc2l0aXZlTnVtYmVyKGZ4UmF0ZVBlckpPRCkgJiYgaXNQb3NpdGl2ZU51bWJlcih1c2RQZXJKT0QpKSB7CiAgICAgICAgY29uc3Qgam9kID0gdiAvIGZ4UmF0ZVBlckpPRDsKICAgICAgICByZXR1cm4gam9kICogdXNkUGVySk9EOwogICAgICB9CiAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIGZ1bmN0aW9uIGNvbXB1dGVDdXJGcm9tVXNkKGFtb3VudCl7CiAgICAgIGNvbnN0IHYgPSBOdW1iZXIoYW1vdW50KTsKICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUodikgfHwgdiA8PSAwKSByZXR1cm4gbnVsbDsKICAgICAgY29uc3QgY3VyQ29kZSA9IChmeEN1cnJlbmN5IHx8ICcnKS50b1VwcGVyQ2FzZSgpOwogICAgICBpZiAoIWN1ckNvZGUpIHJldHVybiBudWxsOwogICAgICBpZiAoY3VyQ29kZSA9PT0gJ1VTRCcpIHJldHVybiB2OwogICAgICBpZiAoY3VyQ29kZSA9PT0gJ0pPRCcgJiYgaXNQb3NpdGl2ZU51bWJlcih1c2RQZXJKT0QpKSByZXR1cm4gdiAvIHVzZFBlckpPRDsKICAgICAgaWYgKGlzUG9zaXRpdmVOdW1iZXIoZnhSYXRlUGVyVVNEKSkgcmV0dXJuIHYgKiBmeFJhdGVQZXJVU0Q7CiAgICAgIGlmIChpc1Bvc2l0aXZlTnVtYmVyKGZ4UmF0ZVBlckpPRCkgJiYgaXNQb3NpdGl2ZU51bWJlcih1c2RQZXJKT0QpKSB7CiAgICAgICAgY29uc3Qgam9kID0gdiAvIHVzZFBlckpPRDsKICAgICAgICByZXR1cm4gam9kICogZnhSYXRlUGVySk9EOwogICAgICB9CiAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIGFzeW5jIGZ1bmN0aW9uIG9wZW5NZXRob2QobSl7DQogICAgICBzaG93UHJlbG9hZGVyKCk7DQogICAgICBjdXJyZW50TWV0aG9kID0gbTsNCiAgICAgIG1vZGFsVGl0bGUudGV4dENvbnRlbnQgPSAobS5kYXRhLm5hbWV8fCIiICkudG9VcHBlckNhc2UoKTsNCiAgICAgIG1ldGhvZEluZm8uaW5uZXJIVE1MPScnOw0KDQogICAgICAvLyDYrNmE2Kgg2KfZhNiz2LnYsSDZhdmGINin2YTYrtin2K/ZhSDZgdmC2LcKICAgICAgbGV0IGZldGNoZWRVc2RQZXJKT0QgPSBudWxsOwogICAgICB0cnl7CiAgICAgICAgY29uc3QgZnggPSBhd2FpdCBmZXRjaEZ4KGN1cnJlbnRDb3VudHJ5LmlkLCBtLmlkKTsKICAgICAgICBmeEN1cnJlbmN5ICAgPSBmeC5jdXJyZW5jeUNvZGU7CiAgICAgICAgZnhSYXRlUGVySk9EID0gdG9Qb3NpdGl2ZU9yTnVsbChmeC5yYXRlUGVySk9EKTsgICAvLyAxIEpPRCAtPiBDVVIKICAgICAgICBmeFJhdGVQZXJVU0QgPSB0b1Bvc2l0aXZlT3JOdWxsKGZ4LnJhdGVQZXJVU0QpOyAgIC8vIDEgVVNEIC0+IENVUgogICAgICAgIGZldGNoZWRVc2RQZXJKT0QgPSB0b1Bvc2l0aXZlT3JOdWxsKGZ4LnVzZFBlckpPRCk7CiAgICAgICAgY29uc3QgY3VyQ29kZSA9IChmeEN1cnJlbmN5IHx8ICcnKS50b1VwcGVyQ2FzZSgpOwogICAgICAgIGlmIChjdXJDb2RlID09PSAnSk9EJykgewogICAgICAgICAgZnhSYXRlUGVySk9EID0gMTsKICAgICAgICB9CiAgICAgICAgaWYgKGN1ckNvZGUgPT09ICdVU0QnKSB7CiAgICAgICAgICBmeFJhdGVQZXJVU0QgPSAxOwogICAgICAgIH0KICAgICAgfWNhdGNoKGUpewogICAgICAgIGZ4Q3VycmVuY3kgPSBudWxsOyBmeFJhdGVQZXJKT0QgPSBudWxsOyBmeFJhdGVQZXJVU0QgPSBudWxsOyB1c2RQZXJKT0QgPSBudWxsOwogICAgICAgIHJhdGVMaW5lLnRleHRDb250ZW50ID0gJ9mB2LTZhCDYrNmE2Kgg2KfZhNiz2LnYsSDZhdmGINin2YTYrtin2K/ZhSc7DQogICAgICAgIGZ4QmFkZ2UuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7DQogICAgICAgIHNlbmRKT0QudmFsdWUgPSAnJzsgcmVjdkNVUi52YWx1ZT0nJzsNCiAgICAgICAgdXBkYXRlU3VibWl0U3RhdGUoKTsNCiAgICAgICAgb3Blbk1vZGFsKCk7DQogICAgICAgIGhpZGVQcmVsb2FkZXIoKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KDQogICAgICAvLyDYudmG2KfZiNmK2YYg2KfZhNit2YLZiNmEINmI2KfYqtis2KfZhyDYp9mE2LnZhdmE2YrYqTog2YrYr9mB2Lkg2KjYudmF2YTYqSDYp9mE2LfYsdmK2YLYqSDihpIg2YrZj9i22KfZgSDYqNin2YTYr9mI2YTYp9ixDQogICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdsYWJlbFtmb3I9InNlbmRKT0QiXScpLnRleHRDb250ZW50ID0gYNiz2YrYr9mB2LkgKCR7ZnhDdXJyZW5jeX0pYDsKICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbGFiZWxbZm9yPSJyZWN2Q1VSIl0nKS50ZXh0Q29udGVudCA9ICfYs9mK2Y/Yttin2YEgKFVTRCknOwogICAgICAvLyDYo9mI2LPZhdipINin2YTYudmF2YTYqSDYudmE2Ykg2KfZhNit2YLZiNmEINmE2LnYsdi22YfYpyDYudio2LEgQ1NTICg6OmJlZm9yZSkKICAgICAgdHJ5IHsKICAgICAgICB2YXIgZmllbGRQYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRQYXknKTsKICAgICAgICB2YXIgZmllbGRSZWN2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpZWxkUmVjdicpOw0KICAgICAgICBpZiAoZmllbGRQYXkpIGZpZWxkUGF5LnNldEF0dHJpYnV0ZSgnZGF0YS1jdXInLCBmeEN1cnJlbmN5IHx8ICdVU0QnKTsNCiAgICAgICAgaWYgKGZpZWxkUmVjdikgZmllbGRSZWN2LnNldEF0dHJpYnV0ZSgnZGF0YS1jdXInLCAnVVNEJyk7DQogICAgICB9IGNhdGNoKF8peyB9DQoNCiAgICAgIC8vINiq2K3Yr9mK2K8g2YLZitmF2KkgVVNEINmE2YPZhCAxIEpPRDog2KXZhiDZg9in2YbYqiDYp9mE2LfYsdmK2YLYqSBVU0Qg2YbYs9iq2K7Yr9mFINmG2YHYsyDYp9mE2LPYudix2IwKICAgICAgLy8g2YjYpdmE2Kcg2YbYrdin2YjZhCDYp9mE2KjYrdirINi52YYg2LfYsdmK2YLYqSDYo9iu2LHZiSDZgdmKINmG2YHYsyDYp9mE2K/ZiNmE2Kkg2LnZhdmE2KrZh9inIFVTRCDZhNin2LPYqtiu2LHYp9isINin2YTYs9i52LEg2YXZhtmH2KcuCiAgICAgIHRyeSB7CiAgICAgICAgdXNkUGVySk9EID0gaXNQb3NpdGl2ZU51bWJlcihmZXRjaGVkVXNkUGVySk9EKSA/IGZldGNoZWRVc2RQZXJKT0QgOiBudWxsOwogICAgICAgIGNvbnN0IGN1ckNvZGUgPSAoZnhDdXJyZW5jeSB8fCAnJykudG9VcHBlckNhc2UoKTsKICAgICAgICBpZiAoIWlzUG9zaXRpdmVOdW1iZXIodXNkUGVySk9EKSAmJiBjdXJDb2RlID09PSAnVVNEJyAmJiBpc1Bvc2l0aXZlTnVtYmVyKGZ4UmF0ZVBlckpPRCkpIHsKICAgICAgICAgIHVzZFBlckpPRCA9IGZ4UmF0ZVBlckpPRDsKICAgICAgICB9CiAgICAgICAgaWYgKCFpc1Bvc2l0aXZlTnVtYmVyKHVzZFBlckpPRCkgJiYgY3VyQ29kZSA9PT0gJ0pPRCcgJiYgaXNQb3NpdGl2ZU51bWJlcihmeFJhdGVQZXJVU0QpKSB7CiAgICAgICAgICB1c2RQZXJKT0QgPSAxIC8gZnhSYXRlUGVyVVNEOwogICAgICAgIH0KICAgICAgICBpZiAoIWlzUG9zaXRpdmVOdW1iZXIodXNkUGVySk9EKSkgewogICAgICAgICAgY29uc3QgdXNkTWV0aG9kID0gKG1ldGhvZHMgfHwgW10pLmZpbmQoeCA9PiB7CiAgICAgICAgICAgIGNvbnN0IGMgPSAoeCAmJiB4LmRhdGEgJiYgKHguZGF0YS5jdXJyZW5jeUNvZGUgfHwgeC5kYXRhLmN1cnJlbmN5IHx8ICcnKSkudG9VcHBlckNhc2UoKTsKICAgICAgICAgICAgcmV0dXJuIGMgPT09ICdVU0QnOwogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAodXNkTWV0aG9kICYmIHVzZE1ldGhvZC5kYXRhKSB7CiAgICAgICAgICAgIGxldCByID0gdG9Qb3NpdGl2ZU9yTnVsbCh1c2RNZXRob2QuZGF0YS51c2RQZXJKT0QpOwogICAgICAgICAgICBpZiAoIWlzUG9zaXRpdmVOdW1iZXIocikpIHsKICAgICAgICAgICAgICByID0gdG9Qb3NpdGl2ZU9yTnVsbCh1c2RNZXRob2QuZGF0YS5yYXRlUGVySk9EKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIWlzUG9zaXRpdmVOdW1iZXIocikpIHsKICAgICAgICAgICAgICBjb25zdCB0b0pPRCA9IHRvUG9zaXRpdmVPck51bGwodXNkTWV0aG9kLmRhdGEucmF0ZVRvSk9EKTsKICAgICAgICAgICAgICBpZiAoaXNQb3NpdGl2ZU51bWJlcih0b0pPRCkpIHIgPSAxIC8gdG9KT0Q7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGlzUG9zaXRpdmVOdW1iZXIocikpIHVzZFBlckpPRCA9IHI7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8vINmF2YTYp9iwINij2K7ZitixOiDZhdmGINmI2KvZitmC2KkgY29uZmlnL2N1cnJlbmN5INin2YTYudin2YXYqQogICAgICAgIGlmICghaXNQb3NpdGl2ZU51bWJlcih1c2RQZXJKT0QpKXsKICAgICAgICAgIGNvbnN0IGZyb21DZmcgPSBhd2FpdCBmZXRjaFVzZFBlckpPREZyb21Db25maWcoKTsKICAgICAgICAgIGlmIChOdW1iZXIuaXNGaW5pdGUoZnJvbUNmZykgJiYgZnJvbUNmZz4wKSB1c2RQZXJKT0QgPSBmcm9tQ2ZnOwogICAgICAgIH0KICAgICAgfSBjYXRjaChfKXsgfQogICAgICByZWNvbmNpbGVGeE51bWJlcnMoKTsKICAgICAgLy8g2KXZhiDZg9in2YYg2KfZhNmF2LPYqtiu2K/ZhSDZg9iq2Kgg2YLZitmF2Kkg2YLYqNmEINin2YPYqtmF2KfZhCDYrNmE2KggdXNkUGVySk9EINit2K/YqyDYp9mE2K3ZgtmI2YQg2KfZhNii2YYKICAgICAgdHJ5eyBpZiAoc2VuZEpPRC52YWx1ZSkgc2VuZEpPRC5vbmlucHV0KCk7IH1jYXRjaChfKXsgfQogICAgICAvLyDYqtmH2YrYptipINmF2KjYr9im2YrYqTog2KrYsdmD2YrYsiDYudmE2Ykg2K7Yp9mG2Kkg2KfZhNiv2YHYuSDYqNin2YTYudmF2YTYqSDYp9mE2KPYs9in2LPZitipICjYr9mI2YTYp9ixKQogICAgICB0cnkgeyBzZW5kSk9ELmZvY3VzKCk7IH0gY2F0Y2goXyl7IH0KICAgICAgbGV0IHByaWNlVGV4dCA9ICfYs9i52LEg2KfZhNi12LHZgSDYutmK2LEg2YXYqtmI2YHYsSc7CiAgICAgIHRyeXsKICAgICAgICBjb25zdCBDVVIgPSAoZnhDdXJyZW5jeXx8JycpLnRvVXBwZXJDYXNlKCk7CiAgICAgICAgaWYgKCFDVVIpIHsKICAgICAgICAgIHByaWNlVGV4dCA9ICfYs9i52LEg2KfZhNi12LHZgSDYutmK2LEg2YXYqtmI2YHYsSc7CiAgICAgICAgfSBlbHNlIGlmIChDVVIgPT09ICdVU0QnKSB7CiAgICAgICAgICBwcmljZVRleHQgPSBgMSBVU0QgPSAke2Zvcm1hdDQoMSl9IFVTRGA7CiAgICAgICAgfSBlbHNlIGlmIChDVVIgPT09ICdKT0QnICYmIGlzUG9zaXRpdmVOdW1iZXIodXNkUGVySk9EKSkgewogICAgICAgICAgcHJpY2VUZXh0ID0gYDEgSk9EID0gJHtmb3JtYXQ0KHVzZFBlckpPRCl9IFVTRGA7CiAgICAgICAgfSBlbHNlIGlmIChpc1Bvc2l0aXZlTnVtYmVyKGZ4UmF0ZVBlclVTRCkpIHsKICAgICAgICAgIHByaWNlVGV4dCA9IGAxICR7Q1VSfSA9ICR7Zm9ybWF0NCgxIC8gZnhSYXRlUGVyVVNEKX0gVVNEYDsKICAgICAgICB9IGVsc2UgaWYgKGlzUG9zaXRpdmVOdW1iZXIoZnhSYXRlUGVySk9EKSAmJiBpc1Bvc2l0aXZlTnVtYmVyKHVzZFBlckpPRCkpIHsKICAgICAgICAgIGNvbnN0IHVzZFBlckN1ciA9IHVzZFBlckpPRCAvIGZ4UmF0ZVBlckpPRDsKICAgICAgICAgIHByaWNlVGV4dCA9IGAxICR7Q1VSfSA9ICR7Zm9ybWF0NCh1c2RQZXJDdXIpfSBVU0RgOwogICAgICAgIH0gZWxzZSBpZiAoaXNQb3NpdGl2ZU51bWJlcihmeFJhdGVQZXJKT0QpKSB7CiAgICAgICAgICBwcmljZVRleHQgPSBgMSAke0NVUn0gPSAke2Zvcm1hdDQoMSAvIGZ4UmF0ZVBlckpPRCl9IEpPRGA7CiAgICAgICAgfSBlbHNlIGlmIChpc1Bvc2l0aXZlTnVtYmVyKHVzZFBlckpPRCkpIHsKICAgICAgICAgIHByaWNlVGV4dCA9IGAxIEpPRCA9ICR7Zm9ybWF0NCh1c2RQZXJKT0QpfSBVU0RgOwogICAgICAgIH0KICAgICAgfWNhdGNoKF8peyB9CiAgICAgIGZ4VGV4dC50ZXh0Q29udGVudCAgPSBwcmljZVRleHQ7DQogICAgICByYXRlTGluZS50ZXh0Q29udGVudD0gcHJpY2VUZXh0Ow0KICAgICAgZnhCYWRnZS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTsNCiAgICAgIC8vINin2YTYqtmB2KfYtdmK2YQNCiAgICAgIGNvbnN0IGluZm89bS5kYXRhLmluZm98fHt9Ow0KICAgICAgY29uc3QgZmllbGRzPVsNCiAgICAgICAgWyLYp9mE2KjZhtmDIiwgaW5mby5iYW5rXSwNCiAgICAgICAgWyLYp9iz2YUg2KfZhNmF2LPYqtmB2YrYryIsIGluZm8uYWNjb3VudE5hbWVdLA0KICAgICAgICBbItix2YLZhSDYp9mE2K3Ys9in2KgiLCBpbmZvLmFjY291bnROdW1iZXJdLA0KICAgICAgICBbIklCQU4iLCBpbmZvLmliYW5dLA0KICAgICAgICBbItin2YTYsdmC2YUv2KfZhNmF2LnYsdmR2YEiLCBpbmZvLndhbGxldF0sDQogICAgICAgIFsiIiwgaW5mby5ub3RlXQ0KICAgICAgXS5maWx0ZXIoKFtfLHZdKT0+dik7DQogICAgICBtZXRob2RJbmZvLmlubmVySFRNTCA9IGZpZWxkcy5sZW5ndGgKICAgICAgICA/IGZpZWxkcy5tYXAoKFtrLHZdKT0+ewogICAgICAgICAgICBjb25zdCBsYWJlbCA9IGsgfHwgJyc7CiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gKHY9PW51bGwpID8gJycgOiB2OwogICAgICAgICAgICByZXR1cm4gYDxkaXYgY2xhc3M9ImluZm8taXRlbSIgZGF0YS1sYWJlbD0iJHt6RXNjSHRtbChsYWJlbCl9Ij48c3Ryb25nPiR7bGFiZWx9PC9zdHJvbmc+PGRpdiBjbGFzcz0iaW5mby12YWx1ZSI+PHNwYW4gY2xhc3M9InZhbHVlLXRleHQiPiR7dmFsdWV9PC9zcGFuPjwvZGl2PjwvZGl2PmA7CiAgICAgICAgICB9KS5qb2luKCcnKQogICAgICAgIDogJzxkaXYgY2xhc3M9ImluZm8taXRlbSI+2YTYpyDYqtmI2KzYryDYqtmB2KfYtdmK2YQg2YXYqtin2K3YqS48L2Rpdj4nOwogICAgICBzZXR1cEluZm9Db3B5QnV0dG9ucygpOwoNCiAgICAgIC8vINin2YTYrdin2LPYqNipICjYudix2LYg2YHZgti3KSDigJQg2YbYudix2LYg2KfZhNmF2KjZhNi6INin2YTYsNmKINiz2YrZj9i22KfZgSDYqNin2YTYr9mI2YTYp9ixIFVTRA0KICAgICAgc2VuZEpPRC5vbmlucHV0ID0gKCk9PnsKICAgICAgICBjb25zdCB2ID0gTnVtYmVyKHNlbmRKT0QudmFsdWUpOwogICAgICAgIGNvbnN0IHVzZEFtb3VudCA9IGNvbXB1dGVVc2RGcm9tQ3VyKHYpOwogICAgICAgIGlmICghaXNQb3NpdGl2ZU51bWJlcih1c2RBbW91bnQpKSB7CiAgICAgICAgICByZWN2Q1VSLnZhbHVlID0gJyc7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlY3ZDVVIudmFsdWUgPSB1c2RBbW91bnQudG9GaXhlZCgyKTsKICAgICAgICB9CiAgICAgICAgdXBkYXRlU3VibWl0U3RhdGUoKTsKICAgICAgICB0cnl7CiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRQYXknKS5jbGFzc0xpc3QudG9nZ2xlKCdmaWxsZWQnLCBpc0Zpbml0ZSh2KSAmJiB2PjApOwogICAgICAgICAgY29uc3QgcnYgPSBOdW1iZXIocmVjdkNVUi52YWx1ZSk7CiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRSZWN2JykuY2xhc3NMaXN0LnRvZ2dsZSgnZmlsbGVkJywgaXNGaW5pdGUocnYpICYmIHJ2PjApOw0KICAgICAgICB9Y2F0Y2goXyl7IH0NCiAgICAgIH07DQogICAgICByZWN2Q1VSLm9uaW5wdXQgPSAoKT0+ewogICAgICAgIGNvbnN0IHYgPSBOdW1iZXIocmVjdkNVUi52YWx1ZSk7CiAgICAgICAgY29uc3QgY3VyQW1vdW50ID0gY29tcHV0ZUN1ckZyb21Vc2Qodik7CiAgICAgICAgaWYgKCFpc1Bvc2l0aXZlTnVtYmVyKGN1ckFtb3VudCkpIHsKICAgICAgICAgIHNlbmRKT0QudmFsdWUgPSAnJzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc2VuZEpPRC52YWx1ZSA9IGN1ckFtb3VudC50b0ZpeGVkKDIpOwogICAgICAgIH0KICAgICAgICB1cGRhdGVTdWJtaXRTdGF0ZSgpOwogICAgICAgIHRyeXsKICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWVsZFJlY3YnKS5jbGFzc0xpc3QudG9nZ2xlKCdmaWxsZWQnLCBpc0Zpbml0ZSh2KSAmJiB2PjApOwogICAgICAgICAgY29uc3QgcHYgPSBOdW1iZXIoc2VuZEpPRC52YWx1ZSk7CiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmllbGRQYXknKS5jbGFzc0xpc3QudG9nZ2xlKCdmaWxsZWQnLCBpc0Zpbml0ZShwdikgJiYgcHY+MCk7DQogICAgICAgIH1jYXRjaChfKXsgfQ0KICAgICAgfTsNCg0KICAgICAgdXBkYXRlU3VibWl0U3RhdGUoKTsNCiAgICAgIG9wZW5Nb2RhbCgpOw0KICAgICAgaGlkZVByZWxvYWRlcigpOw0KICAgIH0KCiAgICBmdW5jdGlvbiBhbW91bnRzVmFsaWQoKXsKICAgICAgY29uc3QgcGF5ID0gTnVtYmVyKHNlbmRKT0QudmFsdWUpOwogICAgICBjb25zdCB1c2QgPSBjb21wdXRlVXNkRnJvbUN1cihwYXkpOwogICAgICByZXR1cm4gTnVtYmVyLmlzRmluaXRlKHBheSkgJiYgcGF5ID4gMCAmJiBpc1Bvc2l0aXZlTnVtYmVyKHVzZCk7CiAgICB9Cg0KICAgIC8qID09PT09PT09PT09PT09PT09PT09PT09PT0g2KfYrtiq2YrYp9ixINmF2YTZgSArINix2YHYuSDYqtmE2YLYp9im2YogKNio2K/ZiNmGINiq2LPYrNmK2YQpID09PT09PT09PT09PT09PT09PT09PT09PT0gKi8NCiAgICBjb25zdCBwcm9vZkZpbGVFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9vZkZpbGUnKTsNCg0KICAgIGZ1bmN0aW9uIHVwZGF0ZVByb29mVUkoKXsNCiAgICAgIHRyeXsNCiAgICAgICAgaWYgKCFwcm9vZlRyaWdnZXIpIHJldHVybjsNCiAgICAgICAgaWYgKHVwbG9hZGVkUHJvb2ZVcmwpew0KICAgICAgICAgIHByb29mVHJpZ2dlci5jbGFzc0xpc3QuYWRkKCdzdWNjZXNzJyk7DQogICAgICAgICAgcHJvb2ZUcmlnZ2VyLmlubmVySFRNTCA9ICc8aSBjbGFzcz0iZmEtc29saWQgZmEtY2hlY2siPjwvaT4nOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHByb29mVHJpZ2dlci5jbGFzc0xpc3QucmVtb3ZlKCdzdWNjZXNzJyk7DQogICAgICAgICAgcHJvb2ZUcmlnZ2VyLmlubmVySFRNTCA9ICfYp9ir2KjYp9iqINin2YTYr9mB2LkgPGkgY2xhc3M9ImZhLXNvbGlkIGZhLXBhcGVyY2xpcCI+PC9pPic7DQogICAgICAgIH0NCiAgICAgIH1jYXRjaChfKXsgfQ0KICAgIH0NCg0KICAgIHByb29mRmlsZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGFzeW5jICgpPT57DQogICAgICBjdXJyZW50UHJvb2ZGaWxlID0gcHJvb2ZGaWxlRWwuZmlsZXMgJiYgcHJvb2ZGaWxlRWwuZmlsZXNbMF0gPyBwcm9vZkZpbGVFbC5maWxlc1swXSA6IG51bGw7DQogICAgICB1cGxvYWRlZFByb29mVXJsID0gbnVsbDsNCiAgICAgIHByb29mUHJldmlldy50ZXh0Q29udGVudCA9IGN1cnJlbnRQcm9vZkZpbGUgPyBg2KzYp9ix2Yog2LHZgdi5OiAke2N1cnJlbnRQcm9vZkZpbGUubmFtZX1gIDogJyc7DQogICAgICB1cGRhdGVQcm9vZlVJKCk7DQogICAgICBpZiAoY3VycmVudFByb29mRmlsZSkgew0KICAgICAgICBpZiAod2luZG93LnR1cm5zdGlsZVRva2VuKSB7DQogICAgICAgICAgdHJ5IHsgYXdhaXQgYXV0b1VwbG9hZFByb29mKCk7IH0gY2F0Y2goZSl7IGNvbnNvbGUuZXJyb3IoZSk7IH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgdXBkYXRlU3VibWl0U3RhdGUoKTsNCiAgICB9KTsNCg0KICAgIGFzeW5jIGZ1bmN0aW9uIGF1dG9VcGxvYWRQcm9vZigpew0KICAgICAgaWYoIWN1cnJlbnRQcm9vZkZpbGUpIHRocm93IG5ldyBFcnJvcign2KfYrtiq2LEg2LXZiNix2Kkg2KPZiNmE2KfZiy4nKTsNCiAgICAgIGlmKCF3aW5kb3cudHVybnN0aWxlVG9rZW4pIHRocm93IG5ldyBFcnJvcign2KrYrdmC2YIg2KfZhNij2YXYp9mGINmF2LfZhNmI2Kgg4oCUINij2YPZhdmEIFR1cm5zdGlsZS4nKTsNCg0KICAgICAgY29uc3QgZmQgPSBuZXcgRm9ybURhdGEoKTsNCiAgICAgIGZkLmFwcGVuZCgnaW1hZ2UnLCBjdXJyZW50UHJvb2ZGaWxlKTsNCg0KICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vYXBpLmltZ2JiLmNvbS8xL3VwbG9hZD9rZXk9JHtlbmNvZGVVUklDb21wb25lbnQoSU1HQkJfQVBJX0tFWSl9YCwgew0KICAgICAgICBtZXRob2Q6ICdQT1NUJywgYm9keTogZmQNCiAgICAgIH0pOw0KICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7DQogICAgICBpZighcmVzLm9rIHx8ICFkYXRhPy5zdWNjZXNzKSB0aHJvdyBuZXcgRXJyb3IoZGF0YT8uZXJyb3I/Lm1lc3NhZ2UgfHwgJ9mB2LTZhCDYsdmB2Lkg2KfZhNil2KvYqNin2KonKTsNCg0KICAgICAgdXBsb2FkZWRQcm9vZlVybCA9IGRhdGEuZGF0YT8udXJsIHx8IGRhdGEuZGF0YT8uZGlzcGxheV91cmw7DQogICAgICBpZighdXBsb2FkZWRQcm9vZlVybCkgdGhyb3cgbmV3IEVycm9yKCdJbWdCQiDZhNmFINmK2Y/Ysdis2Lkg2LHYp9io2LfZi9inINi12KfZhNit2YvYpy4nKTsNCg0KICAgICAgcHJvb2ZQcmV2aWV3LmlubmVySFRNTCA9IGDYqtmFINin2YTYsdmB2Lk6IDxhIGhyZWY9IiR7dXBsb2FkZWRQcm9vZlVybH0iIHRhcmdldD0iX2JsYW5rIiByZWw9Im5vb3BlbmVyIj7Zgdiq2K0g2KfZhNix2KfYqNi3PC9hPmA7DQogICAgICB1cGRhdGVQcm9vZlVJKCk7DQogICAgICB1cGRhdGVTdWJtaXRTdGF0ZSgpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHVwZGF0ZVN1Ym1pdFN0YXRlKCl7DQogICAgICBjb25zdCBva1BheSAgID0gYW1vdW50c1ZhbGlkKCk7DQogICAgICBjb25zdCBva1Byb29mID0gISF1cGxvYWRlZFByb29mVXJsOw0KICAgICAgY29uc3Qgb2tUb2tlbiA9ICEhd2luZG93LnR1cm5zdGlsZVRva2VuOw0KICAgICAgY29uc3Qgb2tNZXRhICA9ICEhY3VycmVudE1ldGhvZCAmJiAhIWN1cnJlbnRDb3VudHJ5Ow0KICAgICAgc3VibWl0RGVwb3NpdEJ0bi5kaXNhYmxlZCA9ICEob2tQYXkgJiYgb2tQcm9vZiAmJiBva1Rva2VuICYmIG9rTWV0YSk7DQogICAgfQ0KDQogICAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PSDYqtmC2K/ZitmFINi32YTYqCDYp9mE2KXZitiv2KfYuSDigJQg2YrYqti32YTYqCDYqtiz2KzZitmEINiv2K7ZiNmEID09PT09PT09PT09PT09PT09PT09PT09PT0gKi8NCiAgICBhc3luYyBmdW5jdGlvbiBnZXRJZFRva2VuT3JUaHJvdygpew0KICAgICAgY29uc3QgdXNlciA9IGF1dGguY3VycmVudFVzZXI7DQogICAgICBpZighdXNlcikgdGhyb3cgbmV3IEVycm9yKCfZitis2Kgg2KrYs9is2YrZhCDYp9mE2K/YrtmI2YQg2KPZiNmE2KfZiy4nKTsNCiAgICAgIHJldHVybiBhd2FpdCB1c2VyLmdldElkVG9rZW4odHJ1ZSk7DQogICAgfQ0KDQogICAgYXN5bmMgZnVuY3Rpb24gaGFuZGxlU3VibWl0RGVwb3NpdChjb3VudHJ5LCBtZXRob2Qpew0KICAgICAgaWYoIWFtb3VudHNWYWxpZCgpKSByZXR1cm4gYWxlcnQoJ9ij2K/YrtmEINin2YTZhdio2YTYuiDYo9mI2YTYp9mLLicpOw0KICAgICAgaWYoIXVwbG9hZGVkUHJvb2ZVcmwpIHJldHVybiBhbGVydCgn2YXZhiDZgdi22YTZgyDYp9ix2YHYuSDYp9mE2KXYq9io2KfYqiDYo9mI2YTYp9mLLicpOw0KICAgICAgaWYoIXdpbmRvdy50dXJuc3RpbGVUb2tlbikgcmV0dXJuIGFsZXJ0KCfYqtit2YLZgiDYp9mE2KPZhdin2YYg2YXYt9mE2YjYqCDigJQg2KPZg9mF2YQgVHVybnN0aWxlLicpOw0KDQogICAgICB0cnl7DQogICAgICAgIGNvbnN0IGlkVG9rZW4gPSBhd2FpdCBnZXRJZFRva2VuT3JUaHJvdygpOyAvLyDYp9mE2KXYsdiz2KfZhCDZhdinINiy2KfZhCDZitiq2LfZhNioINiq2LPYrNmK2YQg2KfZhNiv2K7ZiNmEDQoNCiAgICAgICAgY29uc3QgcGF5QW1vdW50ID0gTnVtYmVyKHNlbmRKT0QudmFsdWUpOyAvLyDZhdinINiz2YrYr9mB2LnZhyDYp9mE2LnZhdmK2YQg2KjYudmF2YTYqSDYp9mE2LfYsdmK2YLYqQ0KICAgICAgICBjb25zdCBib2R5ID0gew0KICAgICAgICAgIGNvdW50cnlJZDogY291bnRyeT8uaWQgfHwgIiIsDQogICAgICAgICAgY291bnRyeU5hbWU6IGNvdW50cnk/LmRhdGE/Lm5hbWUgfHwgY291bnRyeT8ubmFtZSB8fCAiIiwNCiAgICAgICAgICBtZXRob2RJZDogbWV0aG9kPy5pZCB8fCAiIiwNCiAgICAgICAgICBtZXRob2ROYW1lOiBtZXRob2Q/LmRhdGE/Lm5hbWUgfHwgbWV0aG9kPy5uYW1lIHx8ICIiLA0KICAgICAgICAgIHBheUFtb3VudCwgICAgICAgICAgICAgICAgICAgICAgIC8vINin2YTYs9mK2LHZgdixINmK2K3Ys9ioINin2YTYqNin2YLZig0KICAgICAgICAgIHByb29mVXJsOiB1cGxvYWRlZFByb29mVXJsLA0KICAgICAgICAgIHR1cm5zdGlsZVRva2VuOiB3aW5kb3cudHVybnN0aWxlVG9rZW4NCiAgICAgICAgfTsNCg0KICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHtXT1JLRVJ9L2RlcG9zaXQvc3VibWl0YCwgew0KICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgaWRUb2tlbiwNCiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicNCiAgICAgICAgICB9LA0KICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpDQogICAgICAgIH0pOw0KICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTsNCiAgICAgICAgaWYoIXJlcy5vayB8fCAhZGF0YS5zdWNjZXNzKSB0aHJvdyBuZXcgRXJyb3IoZGF0YS5lcnJvciB8fCAn2YHYtNmEINiq2YLYr9mK2YUg2KfZhNi32YTYqCcpOw0KDQogICAgICAgIC8vINin2K3Ys9ioINmF2Kcg2LPZitmP2LbYp9mBINio2KfZhNiv2YjZhNin2LENCiAgICAgICAgbGV0IHVzZEFkZGVkID0gbnVsbDsNCiAgICAgICAgaWYgKGRhdGEgJiYgdHlwZW9mIGRhdGEuYW1vdW50VVNEID09PSAnbnVtYmVyJykgew0KICAgICAgICAgIHVzZEFkZGVkID0gTnVtYmVyKGRhdGEuYW1vdW50VVNEKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0cnl7DQogICAgICAgICAgICBpZiAodXNkUGVySk9EICYmIE51bWJlci5pc0Zpbml0ZShOdW1iZXIodXNkUGVySk9EKSkpIHsNCiAgICAgICAgICAgICAgY29uc3QgY2FsYyA9IE51bWJlcihkYXRhLmFtb3VudEpPRCkgKiBOdW1iZXIodXNkUGVySk9EKTsNCiAgICAgICAgICAgICAgaWYgKE51bWJlci5pc0Zpbml0ZShjYWxjKSkgdXNkQWRkZWQgPSBjYWxjOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH1jYXRjaChfKXsgdXNkQWRkZWQgPSBudWxsOyB9DQogICAgICAgIH0NCg0KICAgICAgICBjb25zdCB1c2RMaW5lID0gKHVzZEFkZGVkIT1udWxsICYmIE51bWJlci5pc0Zpbml0ZSh1c2RBZGRlZCkpID8gYNiz2YrZj9i22KfZgSAo2K/ZiNmE2KfYsSk6ICR7dXNkQWRkZWQudG9GaXhlZCgyKX0gVVNEYCA6ICcnOw0KICAgICAgICBjb25zdCB1c2RSYXRlTGluZSA9ICh0eXBlb2YgZGF0YS51c2RQZXJKT0QgPT09ICdudW1iZXInICYmIGRhdGEudXNkUGVySk9EPjApDQogICAgICAgICAgPyBgXG4oMSBKT0QgPSAke051bWJlcihkYXRhLnVzZFBlckpPRCkudG9GaXhlZCg0KX0gVVNEKWANCiAgICAgICAgICA6ICcnOw0KICAgICAgICBjb25zdCBmeExpbmUgPSAodHlwZW9mIGRhdGEucmF0ZVBlclVTRCA9PT0gJ251bWJlcicgJiYgZGF0YS5yYXRlUGVyVVNEPjApDQogICAgICAgICAgPyBgKNin2YTYs9i52LEg2YXZhiDYp9mE2K7Yp9iv2YU6IDEgVVNEID0gJHtOdW1iZXIoZGF0YS5yYXRlUGVyVVNEKS50b0ZpeGVkKDQpfSAke2RhdGEuY3VycmVuY3l9KWANCiAgICAgICAgICA6ICgodHlwZW9mIGRhdGEucmF0ZVBlckpPRCA9PT0gJ251bWJlcicgJiYgZGF0YS5yYXRlUGVySk9EPjApDQogICAgICAgICAgICAgID8gYCjYp9mE2LPYudixINmF2YYg2KfZhNiu2KfYr9mFOiAxIEpPRCA9ICR7TnVtYmVyKGRhdGEucmF0ZVBlckpPRCkudG9GaXhlZCg0KX0gJHtkYXRhLmN1cnJlbmN5fSlgDQogICAgICAgICAgICAgIDogJycpOw0KDQogICAgICAgIC8vINi52LHYtiDZhtin2YHYsNipINiq2KPZg9mK2K8g2LnYtdix2YrYqSDigJQgQ1NTINmK2Y/YrNmE2Kgg2YXZhiDYp9mE2KjYp9mDLdil2YbYryDYp9mE2YXYrdmF2YoNCiAgICAgICAgdHJ5IHsgYXdhaXQgZW5zdXJlQ29uZmlybUNzcyhpZFRva2VuKTsgfSBjYXRjaChfKXsgfQ0KICAgICAgICBzaG93RGVwb3NpdENvbmZpcm0oew0KICAgICAgICAgIGNvZGU6IGRhdGEuZGVwb3NpdENvZGUsDQogICAgICAgICAgcGFpZDogYCR7ZGF0YS5hbW91bnRDdXJyZW5jeX0gJHtkYXRhLmN1cnJlbmN5fWAsDQogICAgICAgICAgYWRkZWRVU0Q6ICh1c2RBZGRlZCE9bnVsbCAmJiBOdW1iZXIuaXNGaW5pdGUodXNkQWRkZWQpKSA/IHVzZEFkZGVkLnRvRml4ZWQoMikrICcgVVNEJyA6ICfigJQnLA0KICAgICAgICAgIGZ4OiAoZnVuY3Rpb24oKXsNCiAgICAgICAgICAgIGlmICh0eXBlb2YgZGF0YS5yYXRlUGVyVVNEID09PSAnbnVtYmVyJyAmJiBkYXRhLnJhdGVQZXJVU0Q+MCkgcmV0dXJuIGAxIFVTRCA9ICR7TnVtYmVyKGRhdGEucmF0ZVBlclVTRCkudG9GaXhlZCg0KX0gJHtkYXRhLmN1cnJlbmN5fWA7DQogICAgICAgICAgICBpZiAodHlwZW9mIGRhdGEucmF0ZVBlckpPRCA9PT0gJ251bWJlcicgJiYgZGF0YS5yYXRlUGVySk9EPjApIHJldHVybiBgMSBKT0QgPSAke051bWJlcihkYXRhLnJhdGVQZXJKT0QpLnRvRml4ZWQoNCl9ICR7ZGF0YS5jdXJyZW5jeX1gOw0KICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgIH0pKCksDQogICAgICAgICAgZXh0cmE6ICh0eXBlb2YgZGF0YS51c2RQZXJKT0QgPT09ICdudW1iZXInICYmIGRhdGEudXNkUGVySk9EPjApID8gYDEgSk9EID0gJHtOdW1iZXIoZGF0YS51c2RQZXJKT0QpLnRvRml4ZWQoNCl9IFVTRGAgOiAnJw0KICAgICAgICB9KTsNCiAgICAgICAgdHJ5IHsgY2xvc2VNb2RhbEZuKCk7IH0gY2F0Y2goXyl7IH0NCiAgICAgIH1jYXRjaChlcnIpew0KICAgICAgICBjb25zb2xlLmVycm9yKGVycik7DQogICAgICAgIGFsZXJ0KGVyci5tZXNzYWdlIHx8ICfZgdi02YQg2KrZgtiv2YrZhSDYp9mE2LfZhNioJyk7DQogICAgICB9DQogICAgfQ0KDQogICAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PSDYqti02LrZitmEID09PT09PT09PT09PT09PT09PT09PT09PT0gKi8NCiAgICBmdW5jdGlvbiBvcGVuTWV0aG9kQm91bmQobSl7DQogICAgICBzdWJtaXREZXBvc2l0QnRuLm9uY2xpY2sgPSAoKT0+aGFuZGxlU3VibWl0RGVwb3NpdChjdXJyZW50Q291bnRyeSwgbSk7DQogICAgICBvcGVuTWV0aG9kKG0pOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHJlbmRlck1ldGhvZHMobGlzdCl7DQogICAgICBjbGVhckdyaWQoKTsNCiAgICAgIGxpc3QuZm9yRWFjaChtPT57DQogICAgICAgIGNvbnN0IGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOw0KICAgICAgICBhLmhyZWY9J2phdmFzY3JpcHQ6dm9pZCgwKSc7DQogICAgICAgIGEuY2xhc3NOYW1lPSdjYXJkJzsNCiAgICAgICAgYS5kYXRhc2V0LnRpdGxlPW0uZGF0YS5uYW1lfHwnJzsNCiAgICAgICAgYS5pbm5lckhUTUw9YA0KICAgICAgICAgIDxpbWcgc3JjPSIke20uZGF0YS5sb2dvVXJsfHwnJ30iIGFsdD0iJHttLmRhdGEubmFtZXx8Jyd9Ij4NCiAgICAgICAgICA8aDI+JHttLmRhdGEubmFtZXx8Jyd9PC9oMj5gOw0KICAgICAgICBhLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoKT0+b3Blbk1ldGhvZEJvdW5kKG0pKTsNCiAgICAgICAgZ3JpZC5hcHBlbmRDaGlsZChhKTsNCiAgICAgIH0pOw0KICAgICAgc2hvd05vUmVzdWx0cyhsaXN0Lmxlbmd0aD09PTApOw0KICAgIH0NCg0KICAgIGNsb3NlTW9kYWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZU1vZGFsRm4pOw0KICAgIG1ldGhvZE1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpPT57IGlmKGUudGFyZ2V0PT09bWV0aG9kTW9kYWwpIGNsb3NlTW9kYWxGbigpOyB9KTsNCg0KICAgIC8vINi32KjZkdmCINin2YTZhdiz2KfYsSDYp9mE2K3Yp9mE2YogKNil2YYg2YjZj9is2K8pINir2YUg2KfYqNiv2KMg2YXYsdin2YLYqNipINin2YTYr9mI2YQNCiAgICB0cnkgeyBhcHBseVJvdXRlKHRydWUpOyB9IGNhdGNoKF8pe30NCiAgICB3YXRjaENvdW50cmllcygpOw0KDQogICAgKGZ1bmN0aW9uKCl7DQogICAgICB0cnkgew0KICAgICAgICBpZihsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGhlbWUnKSA9PT0gJ2RhcmsnKXsNCiAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2RhcmstbW9kZScpOw0KICAgICAgICB9DQogICAgICB9Y2F0Y2goZSl7fQ0KICAgIH0pKCk7DQogIDwvc2NyaXB0Pg0KICANCjwvYm9keT4NCjwvaHRtbD4NCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0K`;;

  function scopeCss(css) {
    const prefix = 'body.deposit-inline-active ';
    return css.replace(/(^|})\s*([^{}@]+)\{/g, function (match, open, selector) {
      const trimmed = (selector || '').trim();
      if (!trimmed || trimmed.startsWith('@')) return match;
      const scoped = trimmed
        .split(',')
        .map(function (sel) {
          sel = sel.trim();
          if (!sel) return sel;
          if (sel.startsWith(prefix.trim()) || sel.startsWith('@')) return sel;
          if (sel.startsWith('body.deposit-inline-active')) return sel;
          if (sel.startsWith('body')) return sel.replace(/^body/, 'body.deposit-inline-active');
          if (sel.startsWith(':root')) return prefix + sel;
          return prefix + sel;
        })
        .join(', ');
      return open + ' ' + scoped + ' {';
    });
  }

  function createScopedDocument(root) {
    const realDoc = document;
    const hasEscape = typeof CSS !== 'undefined' && typeof CSS.escape === 'function';
    const query = function (selector) {
      return root.querySelector(selector);
    };
    const queryAll = function (selector) {
      return root.querySelectorAll(selector);
    };
    const getById = function (id) {
      if (!id) return null;
      try {
        const targetId = hasEscape ? CSS.escape(id) : id;
        return root.querySelector('#' + targetId);
      } catch (_) {
        return root.querySelector('#' + id);
      }
    };
    return new Proxy(realDoc, {
      get(target, prop, receiver) {
        if (prop === 'getElementById') return getById;
        if (prop === 'querySelector') return query;
        if (prop === 'querySelectorAll') return queryAll;
        const value = Reflect.get(target, prop, receiver);
        if (typeof value === 'function') {
          try {
            return value.bind(target);
          } catch (_) {
            return value;
          }
        }
        return value;
      },
    });
  }

  function ensureStyle(css) {
    if (state.styleEl) return;
    const style = document.createElement('style');
    style.id = 'deposit-inline-style';
    style.textContent = scopeCss(css);
    document.head.appendChild(style);
    state.styleEl = style;
  }

  function decodeBase64Utf8(b64) {
    const binary = atob(b64);
    if (typeof TextDecoder !== 'undefined') {
      const bytes = new Uint8Array(binary.length);
      for (let i = 0; i < binary.length; i += 1) {
        bytes[i] = binary.charCodeAt(i);
      }
      return new TextDecoder('utf-8').decode(bytes);
    }
    try {
      return decodeURIComponent(escape(binary));
    } catch (err) {
      console.warn('fallback UTF-8 decode failed, returning raw string', err);
      return binary;
    }
  }

  function loadEdAA() {
    if (state.loadPromise) return state.loadPromise;
    state.loadPromise = Promise.resolve().then(function () {
      const html = decodeBase64Utf8(EDAA_BASE64);
      const parser = new DOMParser();
      const doc = parser.parseFromString(html, 'text/html');
      const styles = Array.from(doc.querySelectorAll('style'))
        .map(function (el) {
          return el.textContent || '';
        })
        .join('\n');
      const main = doc.querySelector('main');
      const modal = doc.querySelector('#methodModal');
      const markup =
        (main ? main.outerHTML : '') +
        (modal ? modal.outerHTML : '');
      const scripts = Array.from(doc.querySelectorAll('body > script'));
      const scriptText =
        scripts.length ? scripts[scripts.length - 1].textContent || '' : '';
      return { styles, markup, scriptText };
    });
    return state.loadPromise;
  }

  function mount(container) {
    document.body.classList.add('deposit-inline-active');
    return loadEdAA()
      .then(function (payload) {
        ensureStyle(payload.styles);
        document.body.classList.add('deposit-inline-active');

        if (!state.app) {
          const wrap = document.createElement('div');
          wrap.id = 'depositInlineApp';
          wrap.className = 'deposit-inline-page';
          wrap.innerHTML = payload.markup;
          state.app = wrap;
        }

        if (container && state.app.parentNode !== container) {
          container.innerHTML = '';
          container.appendChild(state.app);
        }

        if (!state.scriptLoaded) {
          state.scriptLoaded = true;
          const safeScript = payload.scriptText
            .replace(/window\.location\.replace\([^)]*\);?/g, '')
            .replace(
              /firebase\.initializeApp\(firebaseConfig\);/,
              'if (!firebase.apps || !firebase.apps.length) { firebase.initializeApp(firebaseConfig); } else { firebase.app(); }'
            );
          try {
            const scopedDoc = createScopedDocument(state.app);
            const fn = new Function('document', 'window', safeScript);
            fn(scopedDoc, window);
          } catch (err) {
            console.error('      ', err);
          }
        }
      })
      .catch(function (err) {
        console.error('    ', err);
        if (container) {
          container.innerHTML = '<p class="no-results" style="text-align:center;padding:24px;">    .</p>';
        }
      });
  }

  function deactivateStyles() {
    document.body.classList.remove('deposit-inline-active');
  }

  window.addEventListener('hashchange', function () {
    if ((location.hash || '') !== '#/deposit') {
      deactivateStyles();
    }
  });

  window.depositRoute = {
    build: function () {
      const container = document.createElement('div');
      container.id = 'depositInlineContainer';
      state.container = container;
      mount(container);
      return container;
    },
    onShow: function () {
      if (state.container) {
        mount(state.container);
      }
    },
    ready: function () {
      return true;
    },
  };
})();

